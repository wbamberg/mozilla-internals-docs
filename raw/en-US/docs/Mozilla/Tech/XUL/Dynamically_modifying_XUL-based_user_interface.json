{
    "content": "<p>This article discusses manipulating <a href=\"/en-US/docs/XUL\" title=\"en-US/docs/XUL\">XUL</a> interfaces, using <a href=\"/en-US/docs/DOM\" title=\"en-US/docs/DOM\">DOM</a> and other APIs. It explains the concept of DOM <em>documents</em>, demonstrates a few simple examples of using DOM calls to perform basic manipulations on a document, and then demonstrates working with <em>anonymous <a href=\"/en-US/docs/XBL\" title=\"en-US/docs/XBL\">XBL</a> content</em> using Mozilla-specific methods.</p>\n<p>It is written for beginner to intermediate XUL developers. We assume that the reader has basic knowledge of both XUL and JavaScript. You may also want to read some introductory documents about DOM, like the <a href=\"/en-US/docs/About_the_Document_Object_Model\" title=\"en-US/docs/About_the_Document_Object_Model\">About the Document Object Model</a> article or the <a href=\"/en-US/docs/Gecko_DOM_Reference/Introduction\" title=\"en-US/docs/Gecko_DOM_Reference/Introduction\">Introduction page</a> of the <a href=\"/en-US/docs/Gecko_DOM_Reference\" title=\"en-US/docs/Gecko_DOM_Reference\">Gecko DOM Reference</a>.</p>\n\n<h2 id=\"Introduction\" name=\"Introduction\">Introduction</h2>\n<p>As you know, <a href=\"/en-US/docs/XUL\" title=\"en-US/docs/XUL\">XUL</a> is an <a href=\"/en-US/docs/XML\" title=\"en-US/docs/XML\">XML</a> language used in various Mozilla-based applications, such as Firefox and Thunderbird, to describe the user interface. In XUL applications <a href=\"/en-US/docs/JavaScript\" title=\"en-US/docs/JavaScript\">JavaScript</a> defines the behavior, using <a href=\"/en-US/docs/Gecko_DOM_Reference\" title=\"en-US/docs/Gecko_DOM_Reference\">DOM APIs</a> to access the XUL document.</p>\n<p>So what are the <strong>D</strong>ocument <strong>O</strong>bject <strong>M</strong>odel APIs?</p>\n<p>They are the interfaces that are used in any interaction of a script and a document. If you have ever written a script that interacts with a XUL (or HTML) document, you have already used DOM calls. The most well known DOM method is probably <code><a href=\"/en-US/docs/DOM/document.getElementById\" title=\"en-US/docs/DOM/document.getElementById\">document.getElementById()</a></code>, which returns an element, given its <code>id</code>. You may also have used other calls, such as <code><a href=\"/en-US/docs/DOM/element.setAttribute\" title=\"en-US/docs/DOM/element.setAttribute\">element.setAttribute()</a></code>, or, if you wrote an extension, the <code><a href=\"/en-US/docs/DOM/element.addEventListener\" title=\"en-US/docs/DOM/element.addEventListener\">addEventListener()</a></code> method. All of these are defined in DOM.</p>\n<p>There are also DOM methods that create, move, or delete elements from a document. They will be demonstrated in a later section. Right now, let's learn what a <em>document</em> is.</p>\n\n\n<h2 id=\"What_is_a_document.3F\" name=\"What_is_a_document.3F\">What is a document?</h2>\n<p>A document is a data structure which is manipulated through DOM APIs. A logical structure of every document is a tree, with nodes being elements, attributes, processing instructions, comments, etc. Use the <a href=\"/en-US/docs/DOM_Inspector\" title=\"en-US/docs/DOM_Inspector\">DOM Inspector</a> tool to see the tree representation of any document. <span class=\"comment\">Todo: simple example of a XUL document and a tree</span></p>\n<p>You can think of a document as an in-memory representation of valid HTML or well-formed XML such as XHTML or XUL.</p>\n<p>It is important to remember that different web pages (and even different instances of the same web page) correspond to different documents. Each XUL window has its own distinct document, and there may even be a few different documents in a single window, when there is an <code><a href=\"/en-US/docs/XUL/iframe\" title=\"en-US/docs/XUL/iframe\">&lt;iframe&gt;</a></code>, <code><a href=\"/en-US/docs/XUL/browser\" title=\"en-US/docs/XUL/browser\">&lt;browser&gt;</a></code>, or a <code><a href=\"/en-US/docs/XUL/tabbrowser\" title=\"en-US/docs/XUL/tabbrowser\">&lt;tabbrowser&gt;</a></code> element. You must be sure to always manipulate the correct document. (Read more about this in <a href=\"/en-US/docs/Working_with_windows_in_chrome_code\" title=\"en-US/docs/Working_with_windows_in_chrome_code\">Working with windows in chrome code</a>.) When your script is included using a <code><a href=\"/en-US/docs/XUL/script\" title=\"en-US/docs/XUL/script\">&lt;script&gt;</a></code> tag, the <code>document</code> property references the DOM document that includes the script.</p>\n<h2 id=\"Examples:_Using_DOM_methods\" name=\"Examples:_Using_DOM_methods\">Examples: Using DOM methods</h2>\n<p>This section demonstrates the use of <code><a href=\"/en-US/docs/DOM/element.appendChild\" title=\"en-US/docs/DOM/element.appendChild\">appendChild()</a></code>, <code><a href=\"/en-US/docs/DOM/document.createElement\" title=\"en-US/docs/DOM/document.createElement\">createElement()</a></code>, <code><a href=\"/en-US/docs/DOM/element.insertBefore\" title=\"en-US/docs/DOM/element.insertBefore\">insertBefore()</a></code>, and <code><a href=\"/en-US/docs/DOM/element.removeChild\" title=\"en-US/docs/DOM/element.removeChild\">removeChild()</a></code> DOM methods.</p>\n<h3 id=\"Removing_all_children_of_an_element\" name=\"Removing_all_children_of_an_element\">Removing all children of an element</h3>\n<p>This example removes all children of an element with id=<code>someElement</code> from the current document, by calling <code><a href=\"/en-US/docs/DOM/element.removeChild\" title=\"en-US/docs/DOM/element.removeChild\">removeChild()</a></code> method to remove the first child, until there are no children remaining.</p>\n<p>Note, that <code><a href=\"/en-US/docs/DOM/element.hasChildNodes\" title=\"en-US/docs/DOM/element.hasChildNodes\">hasChildNodes()</a></code> and <code><a href=\"/en-US/docs/DOM/element.firstChild\" title=\"en-US/docs/DOM/element.firstChild\">firstChild</a></code> are also part of the DOM API.</p>\n<pre class=\"eval\">var element = document.getElementById(\"someElement\");\n  while(element.hasChildNodes()){\n    element.removeChild(element.firstChild);\n  }\n</pre>\n\n\n<h3 id=\"Inserting_menu_items_to_a_menu\" name=\"Inserting_menu_items_to_a_menu\">Inserting menu items to a menu</h3>\n<p>This example adds two new menu items to a <code><a href=\"/en-US/docs/XUL/menupopup\" title=\"en-US/docs/XUL/menupopup\">&lt;menupopup&gt;</a></code>: to the start and to the end of it. It uses <code><a href=\"/en-US/docs/DOM/document.createElementNS\" title=\"en-US/docs/DOM/document.createElementNS\">document.createElementNS()</a></code> method to create the items, and <code><a href=\"/en-US/docs/DOM/element.insertBefore\" title=\"en-US/docs/DOM/element.insertBefore\">insertBefore()</a></code> with <code><a href=\"/en-US/docs/DOM/element.appendChild\" title=\"en-US/docs/DOM/element.appendChild\">appendChild()</a></code> to insert the created xml elements within the document.</p>\n<p>Note:</p>\n<ul>\n  <li><code><a href=\"/en-US/docs/DOM/document.createElementNS\" title=\"en-US/docs/DOM/document.createElementNS\">document.createElementNS()</a></code> creates an element, but does not put it anywhere in the document. You need to use other DOM methods, such as <code><a href=\"/en-US/docs/DOM/element.appendChild\" title=\"en-US/docs/DOM/element.appendChild\">appendChild()</a></code> to insert the newly created element in the document.</li>\n  <li><code><a href=\"/en-US/docs/DOM/element.appendChild\" title=\"en-US/docs/DOM/element.appendChild\">appendChild()</a></code> appends the node after all other nodes, while <code><a href=\"/en-US/docs/DOM/element.insertBefore\" title=\"en-US/docs/DOM/element.insertBefore\">insertBefore()</a></code> inserts the node before the node referenced by its second parameter.</li>\n</ul>\n<pre class=\"eval\">function createMenuItem(aLabel) {\n  const XUL_NS = \"<span class=\"nowiki\">http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul</span>\";\n  var item = document.createElementNS(XUL_NS, \"menuitem\"); // create a new XUL menuitem\n  item.setAttribute(\"label\", aLabel);\n  return item;\n}\nvar popup = document.getElementById(\"myPopup\"); // a &lt;menupopup&gt; element\nvar first = createMenuItem(\"First item\");\nvar last = createMenuItem(\"Last item\");\npopup.insertBefore(first, popup.firstChild);\npopup.appendChild(last);\n</pre>\n<p>You can also use <code><a href=\"/en-US/docs/DOM/element.appendChild\" title=\"en-US/docs/DOM/element.appendChild\">appendChild()</a></code> and <code><a href=\"/en-US/docs/DOM/element.insertBefore\" title=\"en-US/docs/DOM/element.insertBefore\">insertBefore()</a></code> to move existing elements. For example you could move the item labeled \"First item\" to the end of popup by adding this statement as a last line to the snippet above:</p>\n<pre class=\"eval\">popup.appendChild(first);\n</pre>\n<p>This statement would remove the node from its current position in the document and re-insert it at the end of the popup.</p>\n<h2 id=\"Anonymous_content_.28XBL.29\" name=\"Anonymous_content_.28XBL.29\">Anonymous content (XBL)</h2>\n<p><a href=\"/en-US/docs/XBL\" title=\"en-US/docs/XBL\">XBL</a> is the language used in Mozilla to define new widgets. Widgets defined in XBL may choose to define some content which is inserted to the bound element, when the binding is attached. This content, called <em>anonymous content</em>, is not accessible through normal DOM methods.</p>\n<p>You need to use the methods of <code>nsIDOMDocumentXBL</code> interface instead. For example:</p>\n<pre class=\"eval\">// gets the first anonymous child of the given node\ndocument.getAnonymousNodes(node)[0];\n\n// returns a NodeList of anonymous elements with anonid attribute equals el1\ndocument.getAnonymousElementByAttribute(node, \"anonid\", \"el1\");\n</pre>\n<p>See <a href=\"/en-US/docs/XBL/XBL_1.0_Reference/DOM_Interfaces#getAnonymousNodes\" title=\"en-US/docs/XBL/XBL_1.0_Reference/DOM_Interfaces#getAnonymousNodes\">getAnonymousNodes</a> and <a href=\"/en-US/docs/XBL/XBL_1.0_Reference/DOM_Interfaces#getAnonymousElementByAttribute\" title=\"en-US/docs/XBL/XBL_1.0_Reference/DOM_Interfaces#getAnonymousElementByAttribute\">getAnonymousElementByAttribute</a> in the XBL reference for more information.</p>\n<p>Once you have an anonymous node, you can use regular DOM methods to navigate and manipulate the rest of the nodes of that binding.</p>\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n<ul>\n  <li><a href=\"/en-US/docs/XUL_Tutorial/Document_Object_Model\" title=\"en-US/docs/XUL_Tutorial/Document_Object_Model\">A related chapter on DOM</a></li>\n  <li><a href=\"/en-US/docs/XUL_Tutorial/Modifying_a_XUL_Interface\" title=\"en-US/docs/XUL_Tutorial/Modifying_a_XUL_Interface\">XUL Tutorial:Modifying a XUL Interface</a></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/teoli\">teoli</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/ethertank\">ethertank</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Johnjbarton\">Johnjbarton</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mathemajor\">mathemajor</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Mgjbot\">Mgjbot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Hwalters\">Hwalters</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Megapotz\">Megapotz</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Pmash\">Pmash</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Ptak82\">Ptak82</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Nickolay\">Nickolay</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/NickolayBot\">NickolayBot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Dria\">Dria</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Jt\">Jt</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/BenoitL\">BenoitL</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Waldo\">Waldo</a>",
    "title": "Dynamically modifying XUL-based user interface"
}