{
    "content": "<p></p><div class=\"blockIndicator warning\">\n    <p><strong>Warning:</strong> <strong>The content of this article may be out of date.</strong> See <a href=\"/en-US/docs/Mozilla/Tech/XUL/Template_Guide\">XUL:Template Guide</a> for up to date documentation.</p>\n</div><p></p>\n\n<h2 id=\"Overview\" name=\"Overview\">Overview</h2>\n\n<p>This document expands on the <a href=\"https://www.mozilla.org/docs/xul/xulnotes/template-primer.html\">XUL Template Primer</a> by introducing the <code>&lt;bindings&gt;</code> element in the <em>extended XUL template syntax</em>.</p>\n\n<p>The <code>&lt;bindings&gt;</code> element is used to create additional,<em>optional</em> variable bindings, in addition to those that are specified in a rule's <code>&lt;conditions&gt;</code>. This is different from the variables specified in the rule's conditions, where a value <em>must</em> be found for each variable for the rule to match. If a <code>&lt;binding&gt;</code> can't be matched, the rule will still fire.</p>\n\n<h2 id=\"Example\" name=\"Example\">Example</h2>\n\n<p>To illustrate how <code>&lt;bindings&gt;</code> work, we'll examine this <a href=\"https://www.mozilla.org/sample.xul\">XUL document</a>, which builds a simple content model an RDF/XML file.</p>\n\n<pre class=\"brush: xml;\">&lt;?xml version=\"1.0\"?&gt;\n\n&lt;?xml-stylesheet href=\"chrome://global/skin\" type=\"text/css\"?&gt;\n\n&lt;window xmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns=\"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul\" align=\"vertical\"&gt;\n  &lt;vbox datasources=\"friends.rdf\" ref=\"urn:root\"&gt;\n    &lt;template&gt;\n      &lt;rule&gt;\n        &lt;conditions&gt;\n          &lt;content uri=\"?uri\"/&gt;\n          &lt;triple subject=\"?uri\"\n                predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#friends</span>\"\n                   object=\"?friends\"/&gt;\n          &lt;member container=\"?friends\" child=\"?friend\"/&gt;\n          &lt;triple subject=\"?friend\"\n                predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#name</span>\"\n                   object=\"?name\"/&gt;\n        &lt;/conditions&gt;\n        &lt;bindings&gt;\n          &lt;binding subject=\"?friend\"\n                 predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#address</span>\"\n                    object=\"?addr\"/&gt;\n          &lt;binding subject=\"?addr\"\n                 predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#street</span>\"\n                    object=\"?street\"/&gt;\n        &lt;/bindings&gt;\n        &lt;action&gt;\n          &lt;hbox uri=\"?friend\"&gt;\n            &lt;label value=\"?name\"/&gt;\n            &lt;label value=\"?street\"/&gt;\n          &lt;/hbox&gt;\n        &lt;/action&gt;\n      &lt;/rule&gt;\n    &lt;/template&gt;\n  &lt;/vbox&gt;\n&lt;/window&gt;\n</pre>\n\n<p>The XUL Template Primer covers the <code>&lt;conditions&gt;</code> and <code>&lt;action&gt;</code> elements, so we won't discuss those here.</p>\n\n<p>We'll use a the following data model to illustrate how bindings work. See the RDF/XML file <code>friends.rdf</code>, below, a simple database with name and address information for some of my good friends.</p>\n\n<pre class=\"brush: xml;\">&lt;?xml version=\"1.0\"?&gt;\n\n&lt;rdf:RDF xmlns:rdf=\"<span class=\"nowiki\">http://www.w3.org/1999/02/22-rdf-syntax-ns#</span>\" xmlns:nc=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#</span>\"&gt;\n  &lt;rdf:Description about=\"urn:root\"&gt;\n    &lt;nc:friends&gt;\n      &lt;rdf:Seq&gt;\n        &lt;rdf:li&gt;\n          &lt;rdf:Description nc:name=\"Alison Appel\"&gt;\n            &lt;nc:address resource=\"#home\"/&gt;\n          &lt;/rdf:Description&gt;\n        &lt;/rdf:li&gt;\n        &lt;rdf:li&gt;\n          &lt;rdf:Description nc:name=\"Jack\"&gt;\n            &lt;nc:address resource=\"#doghouse\"/&gt;\n          &lt;/rdf:Description&gt;\n        &lt;/rdf:li&gt;\n        &lt;rdf:li&gt;\n          &lt;rdf:Description nc:name=\"Lumpy\"/&gt;\n        &lt;/rdf:li&gt;\n      &lt;/rdf:Seq&gt;\n    &lt;/nc:friends&gt;\n  &lt;/rdf:Description&gt;\n  &lt;rdf:Description ID=\"home\" nc:street=\"437 Hoffman\"/&gt;\n  &lt;rdf:Description ID=\"doghouse\" nc:street=\"435 Hoffman\"/&gt;\n&lt;/rdf:RDF&gt;\n</pre>\n\n<p><br>\n The RDF model that this file creates can be represented with the following graph.</p>\n\n<p><img alt=\"RDF Data Model\"></p>\n\n<p>When displayed in Mozilla, something like this appears:</p>\n\n<p><img alt=\"Screenshot\"></p>\n\n<p>Note that even though poor Lumpy has no <code><em>nc</em><span class=\"nowiki\">:address</span></code> property, he still appears in the content model! Unlike the <code>&lt;conditions&gt;</code>, bindings do not affect whether or not a rule matches: they just \"pull through\" additional information if it is available.</p>\n\n<h2 id=\"The_.3Cbindings.3E_element\" name=\"The_.3Cbindings.3E_element\">The <code>&lt;bindings&gt;</code> element</h2>\n\n<p>The <code>&lt;bindings&gt;</code> element is optional in a XUL template, but if present, must appear as a sibling of the <code>&lt;conditions&gt;</code> and <code>&lt;action&gt;</code> elements in a rule.</p>\n\n<h2 id=\"The_.3Cbinding.3E_element\" name=\"The_.3Cbinding.3E_element\">The <code>&lt;binding&gt;</code> element</h2>\n\n<p>The <code>&lt;bindings&gt;</code> element (plural) may contain any number of <code>&lt;binding&gt;</code> (singular) elements.</p>\n\n<pre class=\"eval\">&lt;bindings&gt;\n  &lt;binding subject=\"?friend\"\n         predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#address</span>\"\n            object=\"?addr\"/&gt;\n  &lt;binding subject=\"?addr\"\n         predicate=\"<span class=\"nowiki\">http://home.netscape.com/NC-rdf#street</span>\"\n            object=\"?street\"/&gt;\n&lt;/bindings&gt;\n</pre>\n\n<p>The &lt;binding&gt; element is very much like the <code>&lt;triple&gt;</code> <a href=\"https://www.mozilla.org/docs/xul/xulnotes/template-primer.html#conditions\">condition</a><span class=\"nowiki\">: it must have a </span>subject, predicate, and object attribute. These refer to the subject, predicate, and object of a statement in the RDF model.</p>\n\n<p>At least one of the <code>&lt;binding&gt;</code> elements must have a <code>subject</code> variable that appears in the <code>&lt;conditions&gt;</code><span class=\"nowiki\">: this variable is the \"hook\" that is used to bootstrap the binding. In our example, the </span><code>?friend</code> variable serves this purpose in the first <code>&lt;binding&gt;</code> element.</p>\n\n<p>The subject may refer to any variable that has been computed in the <code>&lt;conditions&gt;</code>, or it may refer to another <code>&lt;binding&gt;</code>'s <code>object</code> variable.<sup><a href=\"#footnote-1\">[1]</a></sup> In our example, the second <code>&lt;binding&gt;</code>'s <code>subject</code> does this: the value for the <code>?addr</code> variable is computed by the first <code>&lt;binding&gt;</code></p>\n\n<p>The <code>predicate</code> must name the URI of an RDF property, in this case, <code><em>nc</em><span class=\"nowiki\">:address</span></code>.</p>\n\n<p>The <code>object</code> must name a variable. The value of the <code>object</code>'s variable will be computed by invoking the <code>GetTarget()</code> method using the <code>object</code>'s value as the <code>aSource</code> argument, and the <code>predicate</code>'s resource as the <code>aProperty</code> argument. (See the <a class=\"external\" href=\"https://lxr.mozilla.org/mozilla/source/rdf/base/idl/nsIRDFDataSource.idl\"><code>nsIRDFDataSource</code></a> interface for more details.)</p>\n\n<p>In our example, the <code>&lt;rule&gt;</code> will be instantiated <em>three times</em><span class=\"nowiki\">: once each for Alison, Jack, and Lumpy. However, in Lumpy's case, we won't be able to bind the </span><code>?addr</code> variable because Lumpy has no home! (Well, there are no statements with Lumpy as the subject and a <code><em>nc</em><span class=\"nowiki\">:address</span></code> as the predicate, anyway.) Nevertheless, <em>the rule still matches</em>.</p>\n\n<p>In the content that's built for Lumpy's <code>&lt;hbox&gt;</code>, the second <code>&lt;label&gt;</code>'s <code>value</code> attribute (which should contain the value of <code>?street</code>) is just left blank.</p>\n\n<h2 id=\"Related_Documents\" name=\"Related_Documents\">Related Documents</h2>\n\n<dl>\n <dt><a class=\"external\" href=\"https://www.mozilla.org/docs/xul/xulnotes/template-primer.html\">XUL Template Primer</a></dt>\n <dd>XUL template basics.</dd>\n <dt><a class=\"external\" href=\"https://www.mozilla.org/docs/xul/xulnotes/template-multi.html\">XUL Template Primer - Multiple Rules</a></dt>\n <dd>Illustrates how to write templates with multiple <code>&lt;rule&gt;</code> elements.</dd>\n <dt><a class=\"external\" href=\"https://www.mozilla.org/docs/xul/xulnotes/template-nested.html\">XUL Template Primer - Nested Content</a></dt>\n <dd>Illustrates how a template can be used recursively to build <em>nested content</em>.</dd>\n <dt><a class=\"external\" href=\"https://www.mozilla.org/docs/xul/xulnotes/template-outliner.html\">XUL Template Primer - Outliner</a></dt>\n <dd>Illustrates how a template can be used as a view for a XUL outliner.</dd>\n <dt><a class=\"external\" href=\"https://www.mozilla.org/rdf/doc/xul-template-reference.html\">XUL Template Reference</a></dt>\n <dd>Describes the <em>simple XUL template syntax</em> in detail.</dd>\n</dl>\n\n<h2 id=\"Notes\" name=\"Notes\">Notes</h2>\n\n<p><a id=\"footnote-1\" name=\"footnote-1\">1.</a> As of this writing, it is necessary to order <code>&lt;binding&gt;</code> elements carefully. Specifically, if a binding depends on a variable in another binding, it must appear <em>after</em> the binding it depends on. For example, the sample in this document wouldn't work if the two <code>&lt;binding&gt;</code> elements were reversed, because of the dependency on the <code>?addr</code> variable. Fortunately, this is the natural way one would write bindings, so in practice this should not be a burden.</p>\n\n<div class=\"originaldocinfo\">\n<h2 id=\"Original_Document_Information\" name=\"Original_Document_Information\">Original Document Information</h2>\n\n<ul>\n <li>Author: Chris Waterson</li>\n</ul>\n</div>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/ExE-Boss\">ExE-Boss</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/teoli\">teoli</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Jorend\">Jorend</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Pd\">Pd</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Nickolay\">Nickolay</a>",
    "title": "XUL Template Primer - Bindings"
}