{
    "content": "<p>Undo a previous call to <a href=\"/en-US/docs/Components.utils.waiveXrays\"><code>Components.utils.waiveXrays()</code></a>, restoring <a href=\"/en-US/docs/Xray_vision\">Xray vision</a> for the caller.</p>\n<p>For example, if privileged code accesses a DOM object belonging to web content, it will by default see it using Xray vision, meaning that among other things expando properties added to the object by content are not visible. Privileged code can waive Xray vision using <code>waiveXrays</code>, and it will then see expandos. It can then use <code>unwaiveXrays</code> to restore its Xray vision for the object.</p>\n<p>The <code>waiveXrays</code> operation is transitive:  it waives Xrays not just for the given object, but for all properties of the object (and their properties, and so on). The <code>unwaiveXrays</code> operation undoes the operation, so Xray vision is restored transitively as well.</p>\n<h2 id=\"Syntax\" name=\"Syntax\">Syntax</h2>\n<pre class=\"eval\">xray = Components.utils.unwaiveXrays(<em>obj</em>);\n</pre>\n<h3 id=\"Parameters\" name=\"Parameters\">Parameters</h3>\n<dl>\n <dt>\n  <code>obj</code></dt>\n <dd>\n  The object for which we wish to restore Xrays.</dd>\n</dl>\n<h3 id=\"Returns\">Returns</h3>\n<p>The object with Xrays restored.</p>\n<h2 id=\"Example\" name=\"Example\">Example</h2>\n<p>Suppose a page script adds an expando to its global window:</p>\n<pre class=\"brush: js\">// page script\n\nfoo = \"I'm an expando\";\n</pre>\n<p>By default, chrome code won't see <code>foo</code>, because it sees the content window with Xray vision, but the chrome code can waive Xray protection. The chrome code can then use <code>unwaiveXrays</code> to restore Xray protection:</p>\n<pre class=\"brush: js\">// chrome code\n\n// contentWindow is an Xray\nvar isXray = Components.utils.isXrayWrapper(gBrowser.contentWindow);  // true\n\n// expandos are not visible in Xrays\nvar foo = gBrowser.contentWindow.foo;                                 // undefined\n\n// you can waive Xray vision for an object\nvar waived = Components.utils.waiveXrays(gBrowser.contentWindow);\nisXray = Components.utils.isXrayWrapper(waived);                      // false\nfoo = waived.foo;                                                     // \"I'm an expando\"\n\n// waiving is transitive\nisXray = Components.utils.isXrayWrapper(waived.document);             // false\n\n// use unwaiveXrays to undo the waiver\nvar unwaived = Components.utils.unwaiveXrays(waived);\nisXray = Components.utils.isXrayWrapper(unwaived);                    // true\nfoo = unwaived.foo;                                                   // undefined\n\n// unwaiving is transitive\nisXray = Components.utils.isXrayWrapper(unwaived.document);           // true</pre>\n<h2 id=\"See_also\">See also</h2>\n<ul>\n <li><a href=\"/en-US/docs/Xray_vision\">Xray vision</a></li>\n <li><a href=\"/en-US/docs/Components.utils.waiveXrays\"><code>Components.utils.waiveXrays</code></a></li>\n <li><a href=\"/en-US/docs/Components.utils.isXrayWrapper\"><code>Components.utils.isXrayWrapper</code></a></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>",
    "title": "Components.utils.unwaiveXrays"
}