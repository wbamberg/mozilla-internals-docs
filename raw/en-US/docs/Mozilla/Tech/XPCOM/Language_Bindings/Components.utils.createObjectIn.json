{
    "content": "<p><code><a href=\"/en-US/docs/Components.utils\">Components.utils</a>.createObjectIn</code> creates a new JavaScript object in the scope of the specified object's compartment.</p>\n\n<p>This function is made available as a global in sandboxes which have the <code>wantExportHelpers</code> option set in the <a href=\"https://developer.mozilla.org/en-US/docs/Components.utils.Sandbox\"><code>Sandbox()</code></a> constructor.</p>\n\n<div class=\"note\">\n<p>Note that this function is now mostly obsolete when you are using Sandbox, because you can create an object in a different compartment using <code>new</code>. For example, to create a new object in the compartment identified by contentWindow:</p>\n\n<pre class=\"brush: js\">var newObject = new contentWindow.Object();</pre>\n\n<p>But it is really needeed from Firefox 30 onwards when trying to manipulate the DOM window. See details in <a href=\"https://blog.mozilla.org/addons/2014/04/10/changes-to-unsafewindow-for-the-add-on-sdk/\">https://blog.mozilla.org/addons/2014/04/10/changes-to-unsafewindow-for-the-add-on-sdk/</a>.</p>\n</div>\n\n<h2 id=\"Syntax\" name=\"Syntax\">Syntax</h2>\n\n<pre class=\"eval\">var <em>newObject</em> = Components.utils.createObjectIn(<em>obj, options</em>);\n</pre>\n\n<h3 id=\"Parameters\" name=\"Parameters\">Parameters</h3>\n\n<dl>\n <dt><code>obj</code></dt>\n <dd>An object indicating the compartment in which the new object should be created; the new object will be created in the scope of this object's compartment.</dd>\n <dt><code>options</code></dt>\n <dd>An object containing a single option <code>defineAs</code>, which determines the name of the object in the target compartment.</dd>\n</dl>\n\n<h3 id=\"Return_value\">Return value</h3>\n\n<p>A new object in the specified scope.</p>\n\n<h2 id=\"Example\" name=\"Example\">Example</h2>\n\n<p>To create a new object in the scope of a specified DOM window, you can simply do:</p>\n\n<pre class=\"brush: js\">function genPropDesc(value) {\n  return {\n    enumerable: true, configurable: true, writable: true, value: value\n  };\n}\n\nvar myObject = Components.utils.createObjectIn(myWindow);\n\nvar propList = {\n  name: genPropDesc(\"name\"),\n  date: genPropDesc(\"date\"),\n  id: genPropDesc(\"id\"),\n  func: genPropDesc(function() { alert(\"Called func!\"); })\n};\n\nObject.defineProperties(myObject, propList);\nComponents.utils.makeObjectPropsNormal(myObject);\n</pre>\n\n<p>This sets up the new object in the scope of the object <code>myWindow</code>, then adds properties by calling <a href=\"/en/JavaScript/Reference/Global_Objects/Object/defineProperties\" title=\"en/JavaScript/Reference/Global Objects/Object/defineProperties\"><code>Object.defineProperties()</code></a>, then normalizes them by calling <a href=\"/en/Components.utils.makeObjectPropsNormal\" title=\"en/Components.utils.makeObjectPropsNormal\"><code>Components.utils.makeObjectPropsNormal()</code></a>.</p>\n\n<p>To create an object with a specified name, use <code>defineAs</code>:</p>\n\n<pre class=\"brush: js\">var foo = Components.utils.createObjectIn(myWindow, {defineAs: \"foo\"});</pre>\n\n<p>Now the target compartment's window has a new global object named <code>foo</code>.</p>\n\n<h2 id=\"See_also\">See also</h2>\n\n<ul>\n <li><a href=\"/en/JavaScript/Reference/Global_Objects/Object/defineProperties\" title=\"en/JavaScript/Reference/Global Objects/Object/defineProperties\"><code>Object.defineProperties()</code></a></li>\n <li><a href=\"/en/Components.utils.makeObjectPropsNormal\" title=\"en/Components.utils.makeObjectPropsNormal\"><code>Components.utils.makeObjectPropsNormal()</code></a></li>\n <li><a href=\"/en/SpiderMonkey/JSAPI_Reference/JS_NewObject\" title=\"en/SpiderMonkey/JSAPI Reference/JS NewObject\"><code>JS_NewObject()</code></a></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/teoli\">teoli</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kmaglione\">kmaglione</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/gal007\">gal007</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Delapouite\">Delapouite</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kscarfone\">kscarfone</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>",
    "title": "Components.utils.createObjectIn"
}