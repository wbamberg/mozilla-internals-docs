{
    "content": "<h1 id=\"nsIWebSocketChannel\">nsIWebSocketChannel</h1>\n<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/websocket/nsIWebSocketChannel.idl\" rel=\"custom\">netwerk/protocol/websocket/nsIWebSocketChannel.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">\n\nProvides support for WebSocket channels.\n</span>\n\n  <div style=\"height: 42px; position: relative; padding: 2px; width: auto;\">\n\n  <div style=\"top: 22px; font-size: 11px; position: absolute;\">1.0</div>\n  \n  <div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;\">66</div>\n  \n  <div style=\"height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 17.142857142857142%;\"></div>\n  \n<div style=\"height: 8px; top: 16px; left: 17.142857142857142%; background: #00dd00; position: absolute; width: 82.85714285714286%;\" title=\"Introduced in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)\"></div>\n\n<div style=\"top: 0px; font-size: 11px; position: absolute; left: 17.142857142857142%;\">Introduced</div>\n<div style=\"top: 22px; font-size: 11px; position: absolute; left: 17.142857142857142%;\">Gecko 8.0</div>\n\n</div>\n\n<div style=\"background: #eee; padding: 2px;\">\nInherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)</span></div>\n</div><p></p>\n<p>Implemented by: <code>?????????????????????????????????????</code>. To create an instance, use:</p>\n<pre class=\"eval\">var webSocketChannel = Components.classes[\"@mozilla.org/????????????????????????????\"]\n                       .createInstance(Components.interfaces.nsIWebSocketChannel);\n</pre>\n<h2 id=\"Method_overview\" name=\"Method_overview\">Method overview</h2>\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>void <a href=\"#asyncOpen()\">asyncOpen</a>(in nsIURI aURI, in ACString aOrigin, in nsIWebSocketListener aListener, in nsISupports aContext);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#close()\">close</a>(in unsigned short aCode, in AUTF8String aReason);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#sendBinaryMsg()\">sendBinaryMsg</a>(in ACString aMsg);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#sendMsg()\">sendMsg</a>(in AUTF8String aMsg);</code></td>\n  </tr>\n </tbody>\n</table>\n<h2 id=\"Attributes\" name=\"Attributes\">Attributes</h2>\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Attribute</td>\n   <td class=\"header\">Type</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td><code>extensions</code></td>\n   <td><code><a href=\"/en/ACString\" title=\"en/ACString\">ACString</a></code></td>\n   <td><code>Sec-Websocket-Extensions</code> response header value. <strong>Read only.</strong></td>\n  </tr>\n  <tr>\n   <td><code>loadGroup</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsILoadGroup\" title=\"\">nsILoadGroup</a></code></code></td>\n   <td>The load group of the WebSockets code.</td>\n  </tr>\n  <tr>\n   <td><code>notificationCallbacks</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIInterfaceRequestor\" title=\"\">nsIInterfaceRequestor</a></code></code></td>\n   <td>The notification callbacks for authorization and so forth.</td>\n  </tr>\n  <tr>\n   <td><code>originalURI</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI\" title=\"\">nsIURI</a></code></code></td>\n   <td>The original <code>URI</code> used to construct the <code>protocol</code> connection. This is used in the case of a redirect or <code>URI</code> \"resolution\" (for example resolving a resource: <code>URI</code> to a file: <code>URI</code>) so that the original pre-redirect <code>URI</code> can still be obtained. This is never <code>null</code>. <strong>Read only.</strong></td>\n  </tr>\n  <tr>\n   <td><code>protocol</code></td>\n   <td><code><a href=\"/en/ACString\" title=\"en/ACString\">ACString</a></code></td>\n   <td><code>Sec-Websocket-Protocol</code> value.</td>\n  </tr>\n  <tr>\n   <td><code>securityInfo</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code></code></td>\n   <td>Transport-level security information (if any). <strong>Read only.</strong></td>\n  </tr>\n  <tr>\n   <td><code>URI</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI\" title=\"\">nsIURI</a></code></code></td>\n   <td>The <code>URI</code> corresponding to the protocol connection after any redirections are completed. <strong>Read only.</strong></td>\n  </tr>\n </tbody>\n</table>\n<h2 id=\"Status_codes\">Status codes</h2>\n<p>The following values are permitted status codes.</p>\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Status code</td>\n   <td class=\"header\">Name</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td>0-999</td>\n   <td> </td>\n   <td><strong>Reserved and not used.</strong></td>\n  </tr>\n  <tr>\n   <td>1000</td>\n   <td><code>CLOSE_NORMAL</code></td>\n   <td>Normal closure; the connection successfully completed whatever purpose for which it was created.</td>\n  </tr>\n  <tr>\n   <td>1001</td>\n   <td><code>CLOSE_GOING_AWAY</code></td>\n   <td>The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.</td>\n  </tr>\n  <tr>\n   <td>1002</td>\n   <td><code>CLOSE_PROTOCOL_ERROR</code></td>\n   <td>The endpoint is terminating the connection due to a protocol error.</td>\n  </tr>\n  <tr>\n   <td>1003</td>\n   <td><code>CLOSE_UNSUPPORTED</code></td>\n   <td>The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).</td>\n  </tr>\n  <tr>\n   <td>1004</td>\n   <td><code>CLOSE_TOO_LARGE</code></td>\n   <td>The endpoint is terminating the connection because a data frame was received that is too large.</td>\n  </tr>\n  <tr>\n   <td>1005</td>\n   <td><code>CLOSE_NO_STATUS</code></td>\n   <td><strong>Reserved.</strong>  Indicates that no status code was provided even though one was expected.</td>\n  </tr>\n  <tr>\n   <td>1006</td>\n   <td><code>CLOSE_ABNORMAL</code></td>\n   <td><strong>Reserved.</strong> Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.</td>\n  </tr>\n  <tr>\n   <td>1007-1999</td>\n   <td> </td>\n   <td><strong>Reserved for future use by the WebSocket standard.</strong></td>\n  </tr>\n  <tr>\n   <td>2000-2999</td>\n   <td> </td>\n   <td><strong>Reserved for use by WebSocket extensions.</strong></td>\n  </tr>\n  <tr>\n   <td>3000-3999</td>\n   <td> </td>\n   <td>Available for use by libraries and frameworks. <strong>May not</strong> be used by applications.</td>\n  </tr>\n  <tr>\n   <td>4000-4999</td>\n   <td> </td>\n   <td>Available for use by applications.</td>\n  </tr>\n </tbody>\n</table>\n<h2 id=\"Methods\"><span style=\"font-weight: bold;\">Methods</span></h2>\n<h3 id=\"asyncOpen()\" name=\"asyncOpen()\">asyncOpen()</h3>\n<p>Asynchronously opens the WebSocket connection. Received messages are fed to the socket listener as they arrive. The socket listener's methods are called on the thread that calls <code>asyncOpen()</code> and are not called until after <code>asyncOpen()</code> returns. If <code>asyncOpen()</code> returns successfully, the <code>protocol</code> implementation promises to call at least <code>onStart</code> and <code>onStop</code> of the listener.</p>\n<p></p><div class=\"blockIndicator note\"><strong>Note:</strong> Implementations should throw NS_ERROR_ALREADY_OPENED if the WebSocket connection is reopened.</div><p></p>\n<pre class=\"eval\">void asyncOpen(\n  in nsIURI aURI,\n  in ACString aOrigin,\n  in nsIWebSocketListener aListener,\n  in nsISupports aContext\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aURI</code></dt>\n <dd>\n  The <code>uri</code> of the websocket protocol; this may be redirected.</dd>\n <dt>\n  <code>aOrigin</code></dt>\n <dd>\n  The URI of the originating resource.</dd>\n <dt>\n  <code>aListener</code></dt>\n <dd>\n  The <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener\" title=\"\">nsIWebSocketListener</a></code> implementation.</dd>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  An opaque parameter forwarded to <code>aListener</code>'s methods.</dd>\n</dl>\n<h3 id=\"close()\" name=\"close()\">close()</h3>\n<pre class=\"eval\">void close(\n  in unsigned short aCode,\n  in AUTF8String aReason\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aCode</code></dt>\n <dd>\n  The status of the connection when closed; see <a href=\"#Status_codes\">Status codes</a> for possible values.</dd>\n <dt>\n  <code>aReason</code></dt>\n <dd>\n  A human-readable string describing the reason the connection closed.</dd>\n</dl>\n<h3 id=\"sendBinaryMsg()\" name=\"sendBinaryMsg()\">sendBinaryMsg()</h3>\n<p>Sends a binary message to the WebSocket peer.</p>\n<pre class=\"eval\">void sendBinaryMsg(\n  in ACString aMsg\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aMsg</code></dt>\n <dd>\n  The data to send.</dd>\n</dl>\n<h3 id=\"sendMsg()\" name=\"sendMsg()\">sendMsg()</h3>\n<p>Sends a text message to the WebSocket peer.</p>\n<pre class=\"eval\">void sendMsg(\n  in AUTF8String aMsg\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aMsg</code></dt>\n <dd>\n  The UTF-8 string to send.</dd>\n</dl>\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n<ul>\n <li><a href=\"/en/WebSockets\" title=\"WebSockets\">WebSockets</a></li>\n <li><a href=\"/en/WebSockets/WebSockets_reference/WebSocket\" title=\"WebSocket\"><code>WebSocket</code></a></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/shawntea\">shawntea</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kscarfone\">kscarfone</a>",
    "title": "nsIWebSocketChannel"
}