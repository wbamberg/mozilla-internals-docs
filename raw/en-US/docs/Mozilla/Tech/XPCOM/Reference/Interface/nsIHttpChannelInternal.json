{
    "content": "<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/nsIHttpChannelInternal.idl\" rel=\"custom\">netwerk/protocol/http/nsIHttpChannelInternal.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">\n\nAn internal interface for HTTP channels. Using features exposed by this interface is <b>not</b> recommended, as it will change in unpredictable ways.\n</span>\n\n  <div style=\"height: 42px; position: relative; padding: 2px; width: auto;\">\n\n  <div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;\">66</div>\n  \n<div style=\"height: 8px; top: 16px; left: 0%; background: #00dd00; position: absolute; width: 100%;\" title=\"Introduced in Gecko 1.0 \"></div>\n\n<div style=\"top: 0px; font-size: 11px; position: absolute; left: 0%;\">Introduced</div>\n<div style=\"top: 22px; font-size: 11px; position: absolute; left: 0%;\">Gecko 1.0</div>\n\n    <div style=\"height: 8px; top: 16px; left: 13.785714285714285%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;\" title=\"Last changed in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)\"></div>\n    \n</div>\n\n<div style=\"background: #eee; padding: 2px;\">\nInherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)</span></div>\n</div><p></p>\n<h2 id=\"Method_overview\" name=\"Method_overview\">Method overview</h2>\n<table class=\"standard-table\"> <tbody> <tr> <td><code>void <a href=\"#getRequestVersion()\">getRequestVersion</a>(out unsigned long major, out unsigned long minor);</code></td> </tr> <tr> <td><code>void <a href=\"#getResponseVersion()\">getResponseVersion</a>(out unsigned long major, out unsigned long minor);</code></td> </tr> <tr> <td><code>void <a href=\"#HTTPUpgrade()\">HTTPUpgrade</a>(in ACString aProtocolName, in nsIHttpUpgradeListener aListener);</code> </td> </tr> <tr> <td><code>void <a href=\"#setCookie()\">setCookie</a>(in string aCookieHeader);</code></td> </tr> <tr> <td><code>void <a href=\"#setupFallbackChannel()\">setupFallbackChannel</a>(in string aFallbackKey);</code> </td> </tr> </tbody>\n</table>\n<h2 id=\"Attributes\" name=\"Attributes\">Attributes</h2>\n<table class=\"standard-table\"> <tbody> <tr> <td class=\"header\">Attribute</td> <td class=\"header\">Type</td> <td class=\"header\">Description</td> </tr> <tr> <td><code>canceled</code></td> <td><code><a href=\"/en/boolean\" title=\"en/boolean\">boolean</a></code></td> <td>Returns <code>true</code> if and only if the channel has been canceled. <strong>Read only.</strong> </td> </tr> <tr> <td><code>channelIsForDownload</code></td> <td><code><a href=\"/en/boolean\" title=\"en/boolean\">boolean</a></code></td> <td>External handlers may set this to <code>true</code> to notify the channel that it is open on behalf of a download. </td> </tr> <tr> <td><code>documentURI</code></td> <td><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI\" title=\"\">nsIURI</a></code></td> <td>An HTTP channel can own a reference to the document URI.</td> </tr> <tr> <td><code>forceAllowThirdPartyCookie</code></td> <td><code><a href=\"/en/boolean\" title=\"en/boolean\">boolean</a></code></td> <td>Force relevant cookies to be sent with this load even if normally they would not be. </td> </tr> <tr> <td><code>localAddress</code></td> <td><code><a href=\"/en/AUTF8String\" title=\"en/AUTF8String\">AUTF8String</a></code></td> <td> <p>The local IP address to which the channel is bound, in the same format produced by <code><a href=\"/en/PR_NetAddrToString\" title=\"en/PR NetAddrToString\">PR_NetAddrToString()</a></code>. This may be either an IPv4 or IPv6 address.</p> <div class=\"note\"><strong>Note:</strong> If <a href=\"https://en.wikipedia.org/wiki/Network Address Translation\" title=\"Network Address Translation\">Network Address Translation</a> (NAT) is in effect, this may not be the same address the remote host thinks it is talking to.</div> This may throw an <code>NS_ERROR_NOT_AVAILABLE</code> exception if accessed when the channel's endpoints haven't been determined yet, or any time the <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpActivityObserver#isActive\">nsIHttpActivityObserver.isActive</a></code> attribute is <code>false</code>. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=534698\" title=\"FIXED: nsTransportEventSinkProxy implementation eats event notifications\">bug 534698</a> and <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=526207\" title=\"FIXED: Add IP address and port info to nsIHttpActivityObserver\">bug 526207</a>. <strong>Read only.</strong> </td> </tr> <tr> <td><code>localPort</code></td> <td><code><a href=\"/en/PRInt32\" title=\"en/PRInt32\">PRInt32</a></code></td> <td> <p>The local port number to which the channel is bound.</p> This may throw an <code>NS_ERROR_NOT_AVAILABLE</code> exception if accessed when the channel's endpoints haven't been determined yet, or any time the <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpActivityObserver#isActive\">nsIHttpActivityObserver.isActive</a></code> attribute is <code>false</code>. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=534698\" title=\"FIXED: nsTransportEventSinkProxy implementation eats event notifications\">bug 534698</a> and <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=526207\" title=\"FIXED: Add IP address and port info to nsIHttpActivityObserver\">bug 526207</a>. <strong>Read only.</strong> </td> </tr> <tr> <td><code>proxyInfo</code></td> <td><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIProxyInfo\" title=\"\">nsIProxyInfo</a></code></td> <td>Get the proxy info in use by the channel. <strong>Read only.</strong>  <span class=\"inlineIndicator obsolete obsoleteInline\" title=\"(Firefox 3)\">Obsolete since Gecko 1.9</span></td> </tr> <tr> <td><code>remoteAddress</code></td> <td><code><a href=\"/en/AUTF8String\" title=\"en/AUTF8String\">AUTF8String</a></code></td> <td> <p>The IP address of the remote host to which this channel is bound, in the same format produced by <code><a href=\"/en/PR_NetAddrToString\" title=\"en/PR NetAddrToString\">PR_NetAddrToString()</a></code>.</p> This may throw an <code>NS_ERROR_NOT_AVAILABLE</code> exception if accessed when the channel's endpoints haven't been determined yet, or any time the <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpActivityObserver#isActive\">nsIHttpActivityObserver.isActive</a></code> attribute is <code>false</code>. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=534698\" title=\"FIXED: nsTransportEventSinkProxy implementation eats event notifications\">bug 534698</a> and <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=526207\" title=\"FIXED: Add IP address and port info to nsIHttpActivityObserver\">bug 526207</a>. <strong>Read only.</strong> </td> </tr> <tr> <td><code>remotePort</code></td> <td><code><a href=\"/en/PRInt32\" title=\"en/PRInt32\">PRInt32</a></code></td> <td> <p>The remote port number to which the channel is bound.</p> This may throw an <code>NS_ERROR_NOT_AVAILABLE</code> exception if accessed when the channel's endpoints haven't been determined yet, or any time the <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpActivityObserver#isActive\">nsIHttpActivityObserver.isActive</a></code> attribute is <code>false</code>. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=534698\" title=\"FIXED: nsTransportEventSinkProxy implementation eats event notifications\">bug 534698</a> and <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=526207\" title=\"FIXED: Add IP address and port info to nsIHttpActivityObserver\">bug 526207</a>. <strong>Read only.</strong> </td> </tr> </tbody>\n</table>\n<h2 id=\"Methods\" name=\"Methods\">Methods</h2>\n<h3 id=\"getRequestVersion()\" name=\"getRequestVersion()\">getRequestVersion()</h3>\n<p>Gets the request's major and minor version numbers.</p>\n<pre class=\"eval\">void getRequestVersion(\n  out unsigned long major,\n  out unsigned long minor\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl> <dt><code>major</code></dt> <dd>On return, contains the request's major version number.</dd> <dt><code>minor</code></dt> <dd>On return, contains the request's minor version number.</dd>\n</dl>\n<h3 id=\"getResponseVersion()\" name=\"getResponseVersion()\">getResponseVersion()</h3>\n<p>Gets the response's major and minor version numbers.</p>\n<pre class=\"eval\">void getResponseVersion(\n  out unsigned long major,\n  out unsigned long minor\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl> <dt><code>major</code></dt> <dd>On return, contains the response's major version number.</dd> <dt><code>minor</code></dt> <dd>On return, contains the response's minor version number.</dd>\n</dl>\n<p></p><h3 id=\"HTTPUpgrade()\">HTTPUpgrade()</h3><p></p>\n<p>Allows for the use of HTTP to bootstrap another protocol via the <a class=\" external\" href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.42\" title=\"www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\">RFC 2616 Upgrade request header</a> in conjunction with a <a class=\" external\" href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.1.2\" title=\"www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\">101</a> level response. The <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIHttpUpgradeListener\" title=\"\">nsIHttpUpgradeListener</a></code> will have its <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpUpgradeListener#onTransportAvailable()\">nsIHttpUpgradeListener.onTransportAvailable()</a></code> method invoked if a matching 101 is processed. The arguments to <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpUpgradeListener#onTransportAvailable()\">nsIHttpUpgradeListener.onTransportAvailable()</a></code> provide to the new protocol the low level transport streams that are no longer used by HTTP.</p>\n<p>The <code>onStartRequest</code> and <code>onStopRequest</code> events are still delivered and the listener gets full control over the socket if and when <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpUpgradeListener#onTransportAvailable()\">nsIHttpUpgradeListener.onTransportAvailable()</a></code> is delivered.</p>\n<pre class=\"eval\">void HTTPUpgrade(\n  in ACString aProtocolName,\n  in nsIHttpUpgradeListener aListener\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl> <dt><code>aProtocolName</code></dt> <dd>The value of the HTTP Upgrade request header.</dd> <dt><code>aListener</code></dt> <dd>The callback object used to handle a successful upgrade.</dd>\n</dl><h3 id=\"setCookie()\" name=\"setCookie()\">setCookie()</h3>\n<p>Helper method to set a cookie with a consumer-provided cookie header, <strong>but</strong> using the channel's other information (URI's, prompters, date headers and so on.).</p>\n<pre class=\"eval\">void setCookie(\n  in string aCookieHeader\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl> <dt><code>aCookieHeader</code></dt> <dd>The cookie header to be parsed.</dd>\n</dl>\n<p></p><h3 id=\"setupFallbackChannel()\">setupFallbackChannel()</h3><p></p>\n<p>Sets up this channel as an application cache fallback channel.</p>\n<pre class=\"eval\">void setupFallbackChannel(\n  in string aFallbackKey\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl> <dt><code>aFallbackKey</code></dt> <dd>The fallback key.</dd>\n</dl>\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n<ul> <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIHttpChannel\" title=\"\">nsIHttpChannel</a></code></li> <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIChannel\" title=\"\">nsIChannel</a></code></li> <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIHttpUpgradeListener\" title=\"\">nsIHttpUpgradeListener</a></code></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/trevorh\">trevorh</a>",
    "title": "nsIHttpChannelInternal"
}