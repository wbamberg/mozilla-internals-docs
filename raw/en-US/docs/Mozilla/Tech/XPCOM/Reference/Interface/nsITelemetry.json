{
    "content": "<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/nsITelemetry.idl\" rel=\"custom\">toolkit/components/telemetry/nsITelemetry.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">\n\nA service to gather performance data that can be tracked over time to allow generating histograms.\n</span>\n\n  <div style=\"height: 42px; position: relative; padding: 2px; width: auto;\">\n\n  <div style=\"top: 22px; font-size: 11px; position: absolute;\">1.0</div>\n  \n  <div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;\">66</div>\n  \n  <div style=\"height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 14.285714285714285%;\"></div>\n  \n<div style=\"height: 8px; top: 16px; left: 14.285714285714285%; background: #00dd00; position: absolute; width: 85.71428571428572%;\" title=\"Introduced in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)\"></div>\n\n<div style=\"top: 0px; font-size: 11px; position: absolute; left: 14.285714285714285%;\">Introduced</div>\n<div style=\"top: 22px; font-size: 11px; position: absolute; left: 14.285714285714285%;\">Gecko 6.0</div>\n\n    <div style=\"height: 8px; top: 16px; left: 15.214285714285714%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;\" title=\"Last changed in Gecko 7.0 (Firefox 7.0 / Thunderbird 7.0 / SeaMonkey 2.4)\"></div>\n    \n</div>\n\n<div style=\"background: #eee; padding: 2px;\">\nInherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 7.0 (Firefox 7.0 / Thunderbird 7.0 / SeaMonkey 2.4)</span></div>\n</div><p></p>\n\n<p>Implemented by: <code>@mozilla.org/base/telemetry;1</code> as a service:</p>\n\n<pre class=\"eval\">let telemetry = Components.classes[\"@mozilla.org/base/telemetry;1\"]\n                .getService(Components.interfaces.nsITelemetry);\n</pre>\n\n<h2 id=\"Method_overview\" name=\"Method_overview\">Method overview</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>jsval <a href=\"#getHistogramById()\">getHistogramById</a>(in ACString id);</code> </td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotHistograms(in uint32_t aDataset, in boolean aSubsession, in boolean aClear);</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval <a href=\"#getKeyedHistogramById()\">getKeyedHistogramById</a>(in ACString id);</code> </td>\n  </tr>\n  <tr>\n   <td><code>void captureStack(in ACString name);</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotCapturedStacks([optional] in boolean clear);</code></td>\n  </tr>\n  <tr>\n   <td><code>nsISupports getLoadedModules();</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotKeyedHistograms(in uint32_t aDataset, in boolean aSubsession, in boolean aClear);</code></td>\n  </tr>\n  <tr>\n   <td><code>void setHistogramRecordingEnabled(in ACString id, in boolean enabled);</code> <span title=\"This deprecated API should no longer be used, but will probably still work.\"><i class=\"icon-thumbs-down-alt\"> </i></span></td>\n  </tr>\n  <tr>\n   <td><code>void asyncFetchTelemetryData(in nsIFetchTelemetryDataCallback aCallback);</code></td>\n  </tr>\n  <tr>\n   <td><code>double msSinceProcessStart();</code></td>\n  </tr>\n  <tr>\n   <td><code>void scalarAdd(in ACString aName, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>void scalarSet(in ACString aName, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>void scalarSetMaximum(in ACString aName, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotScalars(in uint32_t aDataset, [optional] in boolean aClear);</code></td>\n  </tr>\n  <tr>\n   <td><code>void keyedScalarAdd(in ACString aName, in AString aKey, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>void keyedScalarSet(in ACString aName, in AString aKey, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>void keyedScalarSetMaximum(in ACString aName, in AString aKey, in jsval aValue);</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotKeyedScalars(in uint32_t aDataset, [optional] in boolean aClear);</code></td>\n  </tr>\n  <tr>\n   <td><code>void clearScalars();</code> <em>test only</em></td>\n  </tr>\n  <tr>\n   <td><code>void flushBatchedChildTelemetry();</code></td>\n  </tr>\n  <tr>\n   <td><code>void recordEvent(in ACString aCategory, in ACString aMethod, in ACString aObject, [optional] in jsval aValue, [optional] in jsval extra);</code></td>\n  </tr>\n  <tr>\n   <td><code>void setEventRecordingEnabled(in ACString aCategory, in boolean aEnabled);</code></td>\n  </tr>\n  <tr>\n   <td><code>jsval snapshotEvents(in uint32_t aDataset, [optional] in boolean aClear);</code></td>\n  </tr>\n  <tr>\n   <td><code>void registerEvents(in ACString aCategory, in jsval aEventData);</code></td>\n  </tr>\n  <tr>\n   <td><code>void registerScalars(in ACString aCategoryName, in jsval aScalarData);</code></td>\n  </tr>\n  <tr>\n   <td><code>void clearEvents();</code> <em>test only</em></td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Attributes\" name=\"Attributes\">Attributes</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Attribute</td>\n   <td class=\"header\">Type</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td><code>canRecordBase</code><span title=\"This deprecated API should no longer be used, but will probably still work.\"><i class=\"icon-thumbs-down-alt\"> </i></span></td>\n   <td><code><a href=\"/en-US/docs/Glossary/Boolean\" title=\"en/boolean\">boolean</a></code></td>\n   <td>A flag indicating if Telemetry can record base data (FHR data). This is <code>true</code> if the FHR data reporting service or the self-support service is enabled.</td>\n  </tr>\n  <tr>\n   <td><code>canRecordExtended</code> <span title=\"This deprecated API should no longer be used, but will probably still work.\"><i class=\"icon-thumbs-down-alt\"> </i></span></td>\n   <td><code><a href=\"/en-US/docs/Glossary/Boolean\">boolean</a></code></td>\n   <td>A flag indicating if Telemetry is allowed to record extended data. Returns <code>false</code> if the user has not opted into \"extended Telemetry\" on the Release channel, when the user has explicitly opted out of Telemetry on Nightly/Aurora/Beta or if manually set to <code>false</code> during tests.</td>\n  </tr>\n  <tr>\n   <td><code>canRecordReleaseData</code></td>\n   <td><code>readonly</code> <code><a href=\"/en-US/docs/Glossary/Boolean\">boolean</a></code></td>\n   <td>A flag indicating whether Telemetry is recording release data. Does not indicate whether Telemetry will send any data. That is governed by user preference and other mechanisms.</td>\n  </tr>\n  <tr>\n   <td><code>canRecordPreReleaseData</code></td>\n   <td><code>readonly</code> <code><a href=\"/en-US/docs/Glossary/Boolean\">boolean</a></code></td>\n   <td>A flag indicating whether Telemetry is recording pre-release data. Does not indicate whether Telemetry will send any data. That is governed by user preference and other mechanisms.</td>\n  </tr>\n  <tr>\n   <td><code>histogramSnapshots</code></td>\n   <td><a href=\"/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/jsval\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>jsval</code></a></td>\n   <td>\n    <p>An object containing a snapshot from all of the currently registered histograms. { name1: {data1}, name2:{data2}...} where data consists of the following properties:</p>\n\n    <ul>\n     <li>min - Minimal bucket size</li>\n     <li>max - Maximum bucket size</li>\n     <li>histogram_type - <code>HISTOGRAM_EXPONENTIAL</code> or <code>HISTOGRAM_LINEAR</code></li>\n     <li>counts - An array representing the values of buckets in the histogram.</li>\n     <li>ranges - An array with corresponding bucket sizes.</li>\n     <li>sum - Sum of the counts array.</li>\n     <li>static - <code>true</code> for histograms defined in <a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">Histograms.json</a>, <code>false</code> for ones defined with <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITelemetry#newHistogram()\">newHistogram()</a></code>.</li>\n    </ul>\n    <strong>Read only.</strong></td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Constants\" name=\"Constants\">Constants</h2>\n\n<h3 id=\"Histogram_Types\">Histogram Types</h3>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Constant</td>\n   <td class=\"header\">Value</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_EXPONENTIAL</code></td>\n   <td><code>0</code></td>\n   <td>Buckets increase exponentially.</td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_LINEAR</code></td>\n   <td><code>1</code></td>\n   <td>Buckets increase linearly.</td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_BOOLEAN</code></td>\n   <td><code>2</code></td>\n   <td>For storing 0/1 values. </td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_FLAG</code></td>\n   <td><code>3</code></td>\n   <td>For storing a single value; its count is always == 1. </td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_COUNT</code></td>\n   <td><code>4</code></td>\n   <td>For storing counter values without bucketing. </td>\n  </tr>\n  <tr>\n   <td><code>HISTOGRAM_CATEGORICAL</code></td>\n   <td><code>5</code></td>\n   <td>For storing enumerated values by label.</td>\n  </tr>\n </tbody>\n</table>\n\n<h3 id=\"Methods\" name=\"Methods\">Scalar Types</h3>\n\n<table class=\"standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Constant</th>\n   <th scope=\"col\">Value</th>\n   <th scope=\"col\">Description</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><code>SCALAR_TYPE_COUNT</code></td>\n   <td><code>0</code></td>\n   <td>For storing a numeric value.</td>\n  </tr>\n  <tr>\n   <td><code>SCALAR_TYPE_STRING</code></td>\n   <td><code>1</code></td>\n   <td>For storing a string value.</td>\n  </tr>\n  <tr>\n   <td><code>SCALAR_TYPE_BOOLEAN</code></td>\n   <td><code>2</code></td>\n   <td>For storing a boolean value.</td>\n  </tr>\n </tbody>\n</table>\n\n<h3 id=\"Methods\" name=\"Methods\">Dataset Types</h3>\n\n<table class=\"standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Constant</th>\n   <th scope=\"col\">Value</th>\n   <th scope=\"col\">Description</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><code>DATASET_RELEASE_CHANNEL_OPTOUT</code></td>\n   <td><code>0</code></td>\n   <td>The basic dataset that is on-by-default on all channels.</td>\n  </tr>\n  <tr>\n   <td><code>DATASET_RELEASE_CHANNEL_OPTIN</code></td>\n   <td><code>1</code></td>\n   <td>The extended dataset that is opt-in on release, opt-out on pre-release channels.</td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Methods\" name=\"Methods\">Methods</h2>\n\n<p></p><h3 id=\"getHistogramById()\">getHistogramById()</h3><p></p>\n\n<p>Get an histogram by id for histograms registered in <a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">Histograms.json</a>.</p>\n\n<pre class=\"eval\">jsval getHistogramById(\n  in ACString id\n);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt><code>id</code></dt>\n <dd>Unique identifier from <code><a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">toolkit/components/telemetry/Histograms.json</a></code>.</dd>\n</dl>\n\n<h6 id=\"Return_value\" name=\"Return_value\">Return value</h6>\n\n<p>The returned <a href=\"/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/jsval\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>jsval</code></a> object has the following functions:</p>\n\n<ul>\n <li><code>add(value)</code> - Adds an integer value to the appropriate bucket</li>\n <li><code>snapshot()</code> - Returns a snapshot of the histogram with the same data fields as in <code>histogramSnapshots</code>.</li>\n</ul>\n\n<p></p><h3 id=\"getKeyedHistogramById()\">getKeyedHistogramById()</h3><p></p>\n\n<p>Get a keyed histogram for histograms registered in <a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">Histograms.json</a>.</p>\n\n<pre class=\"eval\">jsval getKeyedHistogramById(\n  in ACString id\n);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt><code>id</code></dt>\n <dd>Unique identifier from <code><a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">toolkit/components/telemetry/Histograms.json</a></code>.</dd>\n</dl>\n\n<h6 id=\"Return_value\" name=\"Return_value\">Return value</h6>\n\n<p>The returned <a href=\"/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/jsval\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>jsval</code></a> object has the following functions:</p>\n\n<ul>\n <li><code>add(key, [optional] value)</code> - Adds an integer value to the appropriate bucket. For count histograms providing the value is optional.</li>\n <li><code>snapshot([optional] key)</code> - Returns a snapshot of the keyed histogram or (if <code>key</code> is provided) the snapshot of the contained histogram with that key.</li>\n <li><code>keys()</code> - Returns an array with the string keys of the currently registered histograms.</li>\n <li><code>clear()</code> - Clear out the registered histograms and keys.</li>\n</ul>\n\n<h2 id=\"Example\" name=\"Example\">Example</h2>\n\n<p>You can find detailed information on adding a new Telemetry probe and recording  Telemetry data at <a href=\"/en-US/docs/Performance/Adding_a_new_Telemetry_probe\" title=\"/en-US/docs/Performance/Adding_a_new_Telemetry_probe\">Adding a new Telemetry probe [en-US]</a>.</p>\n\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n\n<ul>\n <li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=649502\" title=\"FIXED: Expose histograms to JS\">bug 649502</a> - Expose histograms to JS</li>\n <li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=585196\" title=\"FIXED: telemetry infrastructure\">bug 585196</a> - Telemetry infrastructure</li>\n <li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=668312\" title=\"FIXED: Report only probes defined in TelemetryHistograms.h\">bug 668312</a> - Report only probes defined in <a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/Histograms.json\" rel=\"custom\">Histograms.json</a></li>\n <li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1069874\" title=\"FIXED: Add keyed histogram types\">bug 1069874</a> - <span id=\"summary_alias_container\"><span id=\"short_desc_nonedit_display\">Add keyed histogram types</span></span></li>\n <li><span><span><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1426453\" title=\"FIXED: Documentation of nsITelemetry not up to date\">bug 1426453</a> - Documentation of <a href=\"https://dxr.mozilla.org/mozilla-central/source/toolkit/components/telemetry/nsITelemetry.idl\" rel=\"custom\">nsITelemetry</a> not up to date</span></span></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Dexterp37\">Dexterp37</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/adbugger\">adbugger</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/gfritzsche\">gfritzsche</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kscarfone\">kscarfone</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Vladan\">Vladan</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mreid\">mreid</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mnoorenberghe\">mnoorenberghe</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/trevorh\">trevorh</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Tglek\">Tglek</a>",
    "title": "nsITelemetry"
}