{
    "content": "<p>The <code>nsITimer</code> interface offers a functionality to invoke a function after a specified delay.</p>\n\n<p>Note that the delay is approximate: the timer can be fired <strong>before the requested time has elapsed</strong>.</p>\n\n<p><code>nsITimer</code> instances must be initialized by calling one of the initialization methods. You may also re-initialize (using one of the initialization methods) an existing instance to avoid the overhead of destroying and creating a timer. It is not necessary to cancel the timer in that case.</p>\n\n<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/xpcom/threads/nsITimer.idl\" rel=\"custom\">xpcom/threads/nsITimer.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">\n\n<i>Please add a summary to this article.</i>\n</span>\n\n<div style=\"background: #eee; padding: 2px;\">\n<span> </span>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 5 (Firefox 5 / Thunderbird 5 / SeaMonkey 2.2)</span></div>\n</div><p></p>\n\n<p>Inherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code></p>\n\n<p>Implemented by: <code>@mozilla.org/timer;1</code>. To create an instance, use:</p>\n\n<pre class=\"eval\">var timer = Components.classes[\"@mozilla.org/timer;1\"]\n            .createInstance(Components.interfaces.nsITimer);\n</pre>\n\n<div class=\"note\">Users of instances of <code>nsITimer</code> should keep a reference to the timer until it is no longer needed in order to assure the timer is fired.</div>\n\n<h2 id=\"Method_overview\" name=\"Method_overview\">Method overview</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>void <a href=\"#cancel()\">cancel</a>();</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#init()\">init</a>(in nsIObserver aObserver, in unsigned long aDelay, in unsigned long aType);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#initWithCallback()\">initWithCallback</a>(in nsITimerCallback aCallback, in unsigned long aDelay, in unsigned long aType);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#initWithFuncCallback()\">initWithFuncCallback</a>(in nsTimerCallbackFunc aCallback, in voidPtr aClosure, in unsigned long aDelay, in unsigned long aType);</code> <span class=\"inlineIndicator noscript noscriptInline\" title=\"This method may only be called from C++; don't use it from JavaScript.\">Native code only!</span></td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Attributes\" name=\"Attributes\">Attributes</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Attribute</td>\n   <td class=\"header\">Type</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td><code>callback</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimerCallback\" title=\"\">nsITimerCallback</a></code></code></td>\n   <td>The <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimerCallback\" title=\"\">nsITimerCallback</a></code> object passed to <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimer#initWithCallback()\">initWithCallback()</a></code>. <strong>Read only.</strong> </td>\n  </tr>\n  <tr>\n   <td><code>closure</code></td>\n   <td><code><a href=\"/en/voidPtr\" title=\"en/voidPtr\">voidPtr</a></code></td>\n   <td>The opaque pointer pass to <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimer#initWithFuncCallback()\">initWithFuncCallback()</a></code>. <strong>Read only.</strong> <span class=\"inlineIndicator noscript noscriptInline\" title=\"This method may only be called from C++; don't use it from JavaScript.\">Native code only!</span></td>\n  </tr>\n  <tr>\n   <td><code>delay</code></td>\n   <td><code><a href=\"/en/unsigned_long\" title=\"en/unsigned long\">unsigned long</a></code></td>\n   <td>\n    <p>The timeout delay in millisecond.</p>\n    <div class=\"blockIndicator note\"><strong>Note:</strong> Re-setting the delay on a one-shot timer that has already fired doesn't restart the timer. Call one of the <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimer#init()\">init()</a></code> methods to restart a one-shot timer.</div></td>\n  </tr>\n  <tr>\n   <td><code>target</code></td>\n   <td><code><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIEventTarget\" title=\"\">nsIEventTarget</a></code></code></td>\n   <td>The <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIEventTarget\" title=\"\">nsIEventTarget</a></code> to which the callback is dispatched. This target must be set before calling any of the initialization methods. </td>\n  </tr>\n  <tr>\n   <td><code>type</code></td>\n   <td><code><a href=\"/en/unsigned_long\" title=\"en/unsigned long\">unsigned long</a></code></td>\n   <td>Defines the timer type: one shot, repeating slack or repeating precise. Must be one of the constants defined under <a href=\"#Constants\">Constants</a> on this page.</td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Constants\" name=\"Constants\">Constants</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Constant</td>\n   <td class=\"header\">Value</td>\n   <td class=\"header\">Description</td>\n  </tr>\n  <tr>\n   <td><code>TYPE_ONE_SHOT</code></td>\n   <td><code>0</code></td>\n   <td>Type of a timer that fires once only.</td>\n  </tr>\n  <tr>\n   <td><code>TYPE_REPEATING_SLACK</code></td>\n   <td><code>1</code></td>\n   <td>\n    <p>After firing, the timer is stopped and not restarted until its callback completes. The timer period will ideally be at least the time between when processing for last firing the callback completes and when the next firing occurs, but note that this is not guaranteed: the timer can fire at any time.</p>\n    This is the preferable repeating type for most situations.</td>\n  </tr>\n  <tr>\n   <td><code>TYPE_REPEATING_PRECISE</code></td>\n   <td><code>2</code></td>\n   <td>\n    <p>TYPE_REPEATING_PRECISE is just a synonym for TYPE_REPEATING_PRECISE_CAN_SKIP. They used to be distinct, but the old TYPE_REPEATING_PRECISE kind was similar to TYPE_REPEATING_PRECISE_CAN_SKIP while also being less useful. So the distinction was removed.</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>TYPE_REPEATING_PRECISE_CAN_SKIP</code></td>\n   <td><code>3</code></td>\n   <td>This repeating timer aims to have constant period between firings.  The processing time for each timer callback should not influence the timer period.  However this timer type guarantees that it will not queue up new events to fire the callback until the previous callback event finishes firing.  If the callback takes a long time, then the next callback will be scheduled immediately afterward, but only once, unlike TYPE_REPEATING_PRECISE.  If you want a non-slack timer, you probably want this one.</td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Methods\" name=\"Methods\">Methods</h2>\n\n<h3 id=\"cancel()\" name=\"cancel()\">cancel()</h3>\n\n<p>Cancels the timer. This method works on all types, not just on repeating timers -- you might want to cancel a <code>TYPE_ONE_SHOT</code> timer, and even reuse it by re-initializing it (to avoid object destruction and creation costs by conserving one timer instance).</p>\n\n<pre class=\"eval\">void cancel();\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<p>None.</p>\n\n<h3 id=\"init()\" name=\"init()\">init()</h3>\n\n<p>Initialize a timer that will fire after the specified delay. A user must keep a reference to this timer till it is no longer needed or has been cancelled.</p>\n\n<pre class=\"eval\">void init(\n  in nsIObserver aObserver,\n  in unsigned long aDelay,\n  in unsigned long aType\n);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt><code>aObserver</code></dt>\n <dd>A callback Object, that is capable listening to timer events. If the timer fires, the observer will be notified via the <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIObserver\" title=\"\">nsIObserver</a></code> Interface. The subject is set to the <code>nsITimer</code> Object which fired, the topic is equal to \"timer-callback\" and data is always set to null.</dd>\n <dt><code>aDelay</code></dt>\n <dd>Timeout delay in milliseconds.</dd>\n <dt><code>aType</code></dt>\n <dd>Defines the timer type: one shot, repeating slack or repeating precise. Must be one of the constants defined under <a href=\"#Constants\">Constants</a> on this page.</dd>\n</dl>\n\n<h3 id=\"initWithCallback()\" name=\"initWithCallback()\">initWithCallback()</h3>\n\n<p>Initialize a timer to fire after the given millisecond interval. This version takes a function to call.</p>\n\n<pre class=\"eval\">void initWithCallback(\n  in nsITimerCallback aCallback,\n  in unsigned long aDelay,\n  in unsigned long aType\n);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt><code>aCallback</code></dt>\n <dd>An <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimerCallback\" title=\"\">nsITimerCallback</a></code> interface to call when timer expires.</dd>\n <dt><code>aDelay</code></dt>\n <dd>Timeout delay in milliseconds.</dd>\n <dt><code>aType</code></dt>\n <dd>Defines the timer type: one shot, repeating slack or repeating precise. Must be one of the constants defined under <a href=\"#Constants\">Constants</a> on this page.</dd>\n</dl>\n\n<p></p><div><span class=\"indicatorInHeadline noscript noscriptMethod\" title=\"This method may only be called from C++; don't use it from JavaScript.\">Native code only!</span><h3 id=\"initWithFuncCallback\">initWithFuncCallback</h3></div><p></p>\n\n<p>Initialize a timer to fire after the given millisecond interval. This version takes a function to call and a closure to pass to that function.</p>\n\n<pre class=\"eval\">void initWithFuncCallback(\n  in nsTimerCallbackFunc aCallback,\n  in voidPtr aClosure,\n  in unsigned long aDelay,\n  in unsigned long aType\n);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt><code>aCallback</code></dt>\n <dd>A <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsTimerCallbackFunc\" title=\"\">nsTimerCallbackFunc</a></code> interface compatible function to call when timer fires.</dd>\n <dt><code>aClosure</code></dt>\n <dd>An opaque pointer to pass to that function.</dd>\n <dt><code>aDelay</code></dt>\n <dd>Timeout delay in milliseconds.</dd>\n <dt><code>aType</code></dt>\n <dd>Defines the timer type: one shot, repeating slack or repeating precise. Must be one of the constants defined under <a href=\"#Constants\">Constants</a> on this page.</dd>\n</dl>\n\n<h2 id=\"Remarks\" name=\"Remarks\">Remarks</h2>\n\n<p>TYPE_REPEATING_SLACK timer is the preferable repeating timer type for most situations</p>\n\n<h2 id=\"Example\" name=\"Example\">Example</h2>\n\n<p>Using <code>initWithCallback</code>:</p>\n\n<pre class=\"brush: js\">// we need an nsITimerCallback compatible...\n// ... interface for the callbacks.\nvar event = {\n  notify: function(timer) {\n    alert(\"Fire!\");\n  }\n}\n \n// Now it is time to create the timer...  \nvar timer = Components.classes[\"@mozilla.org/timer;1\"].createInstance(Components.interfaces.nsITimer);\n \n// ... and to initialize it, we want to call event.notify() ...\n// ... one time after exactly ten seconds. \ntimer.initWithCallback(event,10000, Components.interfaces.nsITimer.TYPE_ONE_SHOT);\n</pre>\n\n<p>Using <code>init</code>, we fire an event every 10 seconds:</p>\n\n<pre class=\"brush: js\">var event = {\n  observe: function(subject, topic, data) {\n    dump(\"hello world\\n\");\n  }\n}\nvar timer = Components.classes[\"@mozilla.org/timer;1\"].createInstance(Components.interfaces.nsITimer);\nconst TYPE_REPEATING_PRECISE_CAN_SKIP = Components.interfaces.nsITimer.TYPE_REPEATING_PRECISE_CAN_SKIP;\n\ntimer.init(event, 10*1000, TYPE_REPEATING_PRECISE_CAN_SKIP);\n</pre>\n\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n\n<ul>\n <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsTimerCallbackFunc\" title=\"\">nsTimerCallbackFunc</a></code></li>\n <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITimerCallback\" title=\"\">nsITimerCallback</a></code></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/SvensterM\">SvensterM</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/nnethercote\">nnethercote</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/freaktechnik\">freaktechnik</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/rnewman\">rnewman</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mnoorenberghe\">mnoorenberghe</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/ioncube\">ioncube</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/trevorh\">trevorh</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/markd\">markd</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Mh512\">Mh512</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Smi\">Smi</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Waldo\">Waldo</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/DaveG\">DaveG</a>",
    "title": "nsITimer"
}