{
    "content": "<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/dom/interfaces/base/nsITextInputProcessor.idl\" rel=\"custom\">dom/interfaces/base/nsITextInputProcessor.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">\n\nA callback interface for nsITextInputProcessor user\n</span>\n\n  <div style=\"height: 42px; position: relative; padding: 2px; width: auto;\">\n\n  <div style=\"top: 22px; font-size: 11px; position: absolute;\">1.0</div>\n  \n  <div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;\">66</div>\n  \n  <div style=\"height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 60%;\"></div>\n  \n<div style=\"height: 8px; top: 16px; left: 60%; background: #00dd00; position: absolute; width: 40%;\" title=\"Introduced in Gecko 38 (Firefox 38 / Thunderbird 38 / SeaMonkey 2.35)\"></div>\n\n<div style=\"top: 0px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 60%;\">Introduced</div>\n<div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 60%;\">Gecko 38</div>\n\n</div>\n\n<div style=\"background: #eee; padding: 2px;\">\nInherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 38.0 (Firefox 38.0 / Thunderbird 38.0 / SeaMonkey 2.35)</span></div>\n</div><p></p>\n\n<p>nsITextInputProcessorCallback is defined for receiving requests and notifications to IME from Gecko. This interface has a \"function\" attribute. Therefore, JS-IME can implement this as a function.</p>\n\n<p>Example of simple JS-IME:</p>\n\n<pre>var simpleIME = {\n  _hasFocus: false,\n  _hasRightsToCompose: false,\n  _TIP: null,\n  _callback: function simpleIME_callback(aTIP, aNotification)\n  {\n    try {\n      switch (aNotification.type) {\n        case \"request-to-commit\":\n          aTIP.commitComposition();\n          break;\n        case \"request-to-cancel\":\n          aTIP.cancelComposition();\n          break;\n        case \"notify-focus\":\n          this._hasFocus = true;\n          break;\n        case \"notify-blur\":\n          this._hasFocus = false;\n          break;\n        case \"notify-detached\":\n          this._hasFocus = false;\n          this._hasRightsToCompose = false;\n          break;\n      }\n      return true;\n    } catch (e) {\n      return false;\n    }\n  },\n  setComposition: function simpleIME_setComposition(aText, aClauses, aCaret)\n  {\n    if (!this._TIP) {\n      this._TIP = Components.classes[\"@mozilla.org/text-input-processor;1\"].\n                    createInstance(Components.interfaces.nsITextInputProcessor);\n    }\n    if (!this._TIP.beginInputTransaction(window, this._callback)) {\n      return false;\n    }\n    ...\n  },\n}\n</pre>\n\n<h2 id=\"Method_overview\">Method overview</h2>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>boolean <a href=\"#onNotify()\">onNotify</a>(in nsITextInputProcessor aTextInputProcessor, in nsITextInputProcessorNotification aNotification);</code></td>\n  </tr>\n </tbody>\n</table>\n\n<h2 id=\"Methods\">Methods</h2>\n\n<p></p><h3 id=\"onNotify()\">onNotify()</h3><p></p>\n\n<p>This is called when Gecko requests or notifies something to IME.</p>\n\n<pre>boolean onNotify(in nsITextInputProcessor aTextInputProcessor,\n                 in nsITextInputProcessorNotification aNotification);\n</pre>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n\n<dl>\n <dt>aTextInputProcessor</dt>\n <dd>The instance which receives the notification. If the handler needs to do something with composition, you can use this.</dd>\n <dt>aNotification</dt>\n <dd>A notification or request. See the document of <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITextInputProcessorNotification\" title=\"\">nsITextInputProcessorNotification</a></code> for the details.</dd>\n</dl>\n\n<h6 id=\"Parameters\" name=\"Parameters\">Return value</h6>\n\n<p>If this handles the notification normally or does nothing, it should return true. Otherwise, false.</p>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Masayuki\">Masayuki</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kscarfone\">kscarfone</a>",
    "title": "nsITextInputProcessorCallback"
}