{
    "content": "<p></p><div style=\"border: solid #ddd 2px; margin-bottom: 12px;\">\n<div style=\"background: #eee; padding: 2px;\"><code><a href=\"https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/websocket/nsIWebSocketListener.idl\" rel=\"custom\">netwerk/protocol/websocket/nsIWebSocketListener.idl</a></code><span style=\"text-align: right; float: right;\"><a href=\"/en-US/docs/Interfaces/About_Scriptable_Interfaces\" style=\"color: #00cc00; font-weight: 700;\">Scriptable</a></span></div>\n<span style=\"padding: 4px 2px;\">Implement this interface to receive WebSocket traffic events asynchronously after calling <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebSocketChannel#asyncOpen()\">nsIWebSocketChannel.asyncOpen()</a></code>.</span>\n\n  <div style=\"height: 42px; position: relative; padding: 2px; width: auto;\">\n\n  <div style=\"top: 22px; font-size: 11px; position: absolute;\">1.0</div>\n  \n  <div style=\"top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;\">66</div>\n  \n  <div style=\"height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 17.142857142857142%;\"></div>\n  \n<div style=\"height: 8px; top: 16px; left: 17.142857142857142%; background: #00dd00; position: absolute; width: 82.85714285714286%;\" title=\"Introduced in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)\"></div>\n\n<div style=\"top: 0px; font-size: 11px; position: absolute; left: 17.142857142857142%;\">Introduced</div>\n<div style=\"top: 22px; font-size: 11px; position: absolute; left: 17.142857142857142%;\">Gecko 8.0</div>\n\n</div>\n\n<div style=\"background: #eee; padding: 2px;\">\nInherits from: <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports\" title=\"\">nsISupports</a></code>\n<span style=\"text-align: right; float: right;\">Last changed in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)</span></div>\n</div><p></p>\n<h2 id=\"Method_overview\" name=\"Method_overview\">Method overview</h2>\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>void <a href=\"#onAcknowledge()\">onAcknowledge</a>(in nsISupports aContext, in PRUint32 aSize);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#onBinaryMessageAvailable()\">onBinaryMessageAvailable</a>(in nsISupports aContext, in ACString aMsg);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#onMessageAvailable()\">onMessageAvailable</a>(in nsISupports aContext, in AUTF8String aMsg);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#onServerClose()\">onServerClose</a>(in nsISupports aContext, in unsigned short aCode, in AUTF8String aReason);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#onStart()\">onStart</a>(in nsISupports aContext);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#onStop()\">onStop</a>(in nsISupports aContext, in nsresult aStatusCode);</code></td>\n  </tr>\n </tbody>\n</table>\n<h2 id=\"Methods\" name=\"Methods\">Methods</h2>\n<h3 id=\"onAcknowledge()\" name=\"onAcknowledge()\">onAcknowledge()</h3>\n<p>Called to acknowledge a message sent via <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebSocketChannel#sendMsg()\">nsIWebSocketChannel.sendMsg()</a></code> or <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebSocketChannel#sendBinaryMsg()\">nsIWebSocketChannel.sendBinaryMsg()</a></code>.</p>\n<pre class=\"eval\">void onAcknowledge(\n  in nsISupports aContext,\n  in PRUint32 aSize\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n <dt>\n  <code>aSize</code></dt>\n <dd>\n  Number of bytes placed in OS send buffer.</dd>\n</dl>\n<h3 id=\"onBinaryMessageAvailable()\" name=\"onBinaryMessageAvailable()\">onBinaryMessageAvailable()</h3>\n<p>Called when a binary message has been received.</p>\n<pre class=\"eval\">void onBinaryMessageAvailable(\n  in nsISupports aContext,\n  in ACString aMsg\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n <dt>\n  <code>aMsg</code></dt>\n <dd>\n  The message data.</dd>\n</dl>\n<h3 id=\"onMessageAvailable()\" name=\"onMessageAvailable()\">onMessageAvailable()</h3>\n<p>Called when a text message has been received.</p>\n<pre class=\"eval\">void onMessageAvailable(\n  in nsISupports aContext,\n  in AUTF8String aMsg\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n <dt>\n  <code>aMsg</code></dt>\n <dd>\n  The message data, as a UTF-8 string.</dd>\n</dl>\n<h3 id=\"onServerClose()\" name=\"onServerClose()\">onServerClose()</h3>\n<p>Called when the server sends a close message. In the case of errors, <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener#onStop()\">onStop()</a></code> may be called without this method ever getting called.</p>\n<p>No additional messages through <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener#onMessageAvailable()\">onMessageAvailable()</a></code>, <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener#onBinaryMessageAvailable()\">onBinaryMessageAvailable()</a></code>() or <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener#onAcknowledge()\">onAcknowledge()</a></code>() will be delievered to the listener after <code>onServerClose()</code> is called, but outgoing messages can still be sent through the <code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketChannel\" title=\"\">nsIWebSocketChannel</a></code> connection.</p>\n<pre class=\"eval\">void onServerClose(\n  in nsISupports aContext,\n  in unsigned short aCode,\n  in AUTF8String aReason\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n <dt>\n  <code>aCode</code></dt>\n <dd>\n  The WebSocket closing handshake status code; see <a href=\"/en/XPCOM_Interface_Reference/nsIWebSocketChannel#Status_codes\" title=\"en/XPCOM_Interface_Reference/nsIWebSocketChannel#Status_codes\">Status codes</a> for possible values.</dd>\n <dt>\n  <code>aReason</code></dt>\n <dd>\n  A text string explaining the reason for the closure of the connection.</dd>\n</dl>\n<h3 id=\"onStart()\" name=\"onStart()\">onStart()</h3>\n<p>Called to signify the establishment of the message stream. Any listener that receives <code>onStart()</code> will also receive <code><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener#OnStop()\">OnStop()</a></code>.</p>\n<pre class=\"eval\">void onStart(\n  in nsISupports aContext\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n</dl>\n<h3 id=\"onStop()\" name=\"onStop()\">onStop()</h3>\n<p>Called to signify the completion of the message stream. This is the final notification the listener will receive; once it's been received, the WebSocket connection is complete. This event can be received in error cases even if <code><a href=\"https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebSocketChannel#close()\">nsIWebSocketChannel.close()</a></code> has not been called.</p>\n<pre class=\"eval\">void onStop(\n  in nsISupports aContext,\n  in nsresult aStatusCode\n);\n</pre>\n<h6 id=\"Parameters\" name=\"Parameters\">Parameters</h6>\n<dl>\n <dt>\n  <code>aContext</code></dt>\n <dd>\n  User defined context.</dd>\n <dt>\n  <code>aStatusCode</code></dt>\n <dd>\n  Reason for stopping (<code>NS_OK</code> if completed successfully).</dd>\n</dl>\n<h2 id=\"See_also\" name=\"See_also\">See also</h2>\n<ul>\n <li><a href=\"/en/WebSockets\" title=\"WebSockets\">WebSockets</a></li>\n <li><code><a href=\"/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketChannel\" title=\"\">nsIWebSocketChannel</a></code></li>\n</ul>",
    "contributors": "<a href=\"https://developer.mozilla.org/en-US/profiles/wbamberg\">wbamberg</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot\">mdnwebdocs-bot</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/Sheppy\">Sheppy</a>, <a href=\"https://developer.mozilla.org/en-US/profiles/kscarfone\">kscarfone</a>",
    "title": "nsIWebSocketListener"
}