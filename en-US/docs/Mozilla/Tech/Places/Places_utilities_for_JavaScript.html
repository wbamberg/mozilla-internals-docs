<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Places utilities for JavaScript</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../Tech.html">Tech</a>&raquo;<a href="../Places.html">Places</a></nav><div class="content-heading"><h1>Places utilities for JavaScript</h1></div>
<div class="content"><p>
</p>
<div class="blockIndicator warning">
 <p>
  <strong>
   Warning:
  </strong>
  <strong>
   The content of this article may be out of date.
  </strong>
 </p>
</div>
<p>
</p>
<p>
 utils.js is accessible at the following URL:
 <br>
  <a class="external" href="http://mxr.mozilla.org/mozilla-central/source/browser/components/places/content/utils.js" rel="freelink">
   http://mxr.mozilla.org/mozilla-centr...ntent/utils.js
  </a>
  <br>
   This file includes utility functions used by a lot of the bookmarking, tagging, and annotation services that are built into Firefox. By default its only included in browser.xul. Its not an interface, and as such it will never be frozen, but it provides some easy to use functions that can save you from reinventing the wheel and cluttering up your own classes/functions when you need it.
  </br>
 </br>
</p>
<h3 id="Global_Objects" name="Global_Objects">
 Global Objects
</h3>
<p>
 There are a few global objects and constants defined in utils.js. These are:
</p>
<h4 id="QI_node" name="QI_node">
 QI_node
</h4>
<p>
 QI_node(aNode, aIID) Runs a query interface on a bookmark node to expose the interface available to that type. If the interface isn't available to that node, null is returned.
</p>
<ul>
 <li>
  aNode - The bookmark
 </li>
 <li>
  aIID - The return interface wanted.
 </li>
</ul>
<p>
 There are several predefined versions of this for common calls. These just take in the node, as the interface is already defined:
</p>
<ul>
 <li>
  asVisit(aNode)
 </li>
 <li>
  asFullVisit(aNode)
 </li>
 <li>
  asContainer(aNode)
 </li>
 <li>
  asQuery(aNode)
 </li>
</ul>
<h4 id="Annotations" name="Annotations">
 Annotations
</h4>
<p>
 A few annotation names are defined here.
</p>
<ul>
 <li>
  LOAD_IN_SIDEBAR_ANNO - This annotation is associated with bookmarks or items that should load in the sidebar automatically.
 </li>
 <li>
  DESCRIPTION_ANNO - This annotation stores description information about a bookmark.
 </li>
 <li>
  POST_DATA_ANNO - I need to clarify here, but I think this is the name of the annotation that stores information for keyword searches from a bookmark.
 </li>
 <li>
  LMANNO_FEEDURI - Need to clarify here too, but I think for each livemark, there is an bookmark which contains an annotation storing the associated feed uri.
 </li>
 <li>
  LMANNO_SITEURI - Need to clarify here, but I think for each livemark, there is an bookmark which contains an annotation storing the associated site uri.
 </li>
 <li>
  ORGANIZER_FOLDER_ANNO - This annotation is associated with a folder that should be shown in the Library's left pane.
 </li>
 <li>
  ORGANIZER_QUERY_ANNO - This annotation is used by the places organizer to decide what nodes should be shown in the left pane.
 </li>
</ul>
<p>
 <br>
  WarningÂ : PlacesUtils class since Firefox 3 beta 5 has been split into:
 </br>
</p>
<ul>
 <li>
  PlacesUtils: can be used in any toolkit application
 </li>
 <li>
  PlacesUIUtils: only in Firefox
 </li>
</ul>
<h4 id="PlacesUtils" name="PlacesUtils">
 PlacesUtils
</h4>
<p>
 This is a gigantic object full of usefulness if you need to do any bookmark work from within browser.xul. As such, it gets its own special section.
</p>
<h2 id="PlacesUtils_2" name="PlacesUtils_2">
 PlacesUtils
</h2>
<h2 id="Method_overview" name="Method_overview">
 Method overview
</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td>
    <code>
     <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="en/nsIURI">
      nsIURI
     </a>
     <a href="#createFixedURI.28.29">
      createFixedURI
     </a>
     (string aSpec);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getFormattedString.28.29">
      getFormattedString
     </a>
     (string key, string params);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getString.28.29">
      getString
     </a>
     (string key);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsFolder
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsBookmark
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsSeparator
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsVisit
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsURI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsQuery
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsReadOnly
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsHost
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsContainer
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsDynamicContainer
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <p>
     <code>
      boolean
      <a href="#nodeIs.28.29">
       nodeIsLivemarkContainer
      </a>
      (
      <code>
       <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
        nsINavHistoryResultNode
       </a>
      </code>
      aNode);
      <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 21 / Thunderbird 21 / SeaMonkey 2.18)">
       Obsolete since Gecko 21
      </span>
     </code>
    </p>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#nodeIs.28.29">
      nodeIsLivemarkItem
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
    <code>
     <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 21 / Thunderbird 21 / SeaMonkey 2.18)">
      Obsolete since Gecko 21
     </span>
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#isReadonlyFolder.28.29">
      isReadonlyFolder
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     int
     <a href="#getIndexOfNode.28.29">
      getIndexOfNode
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#wrapNode.28.29">
      wrapNode
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode, string aType,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aOverrideURI);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     array
     <a href="#unwrapNodes.28.29">
      unwrapNodes
     </a>
     (string blob, string aType);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITransaction" title="">
       nsITransaction
      </a>
     </code>
     <a href="#makeTransaction.28.29">
      makeTransaction
     </a>
     (string data, string type,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     container, int index, boolean copy);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResult" title="">
       nsINavHistoryResult
      </a>
     </code>
     <a href="#getFolderContents.28.29">
      getFolderContents
     </a>
     (int aFolderId, boolean aExcludeItems, boolean aExpandQueries);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showAddBookmarkUI.28.29">
      showAddBookmarkUI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI, string aTitle, string aDescription, int aDefaultInsertionPoint, boolean aShowPicker, boolean aLoadInSidebar, string aKeyword, string aPostData);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showMinimalAddBookmarkUI.28.29">
      showMinimalAddBookmarkUI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI, string aTitle, string aDescription, int aDefaultInsertionPoint, boolean aShowPicker, boolean aLoadInSidebar, string aKeyword, string aPostData);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showAddLivemarkUI.28.29">
      showAddLivemarkUI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aFeedURI,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aSiteURI, string aTitle, string aDescription, int aDefaultInsertionPoint, boolean aShowPicker);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showMinimalAddLivemarkUI.28.29">
      showMinimalAddLivemarkUI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aFeedURI,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aSiteURI, string aTitle, string aDescription, int aDefaultInsertionPoint, boolean aShowPicker);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showMinimalAddMultiBookmarkUI.28.29">
      showMinimalAddMultiBookmarkUI
     </a>
     (array
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURIList);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showBookmarkProperties.28.29">
      showBookmarkProperties
     </a>
     (int aId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showFolderProperties.28.29">
      showFolderProperties
     </a>
     (int aId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#showAddFolderUI.28.29">
      showAddFolderUI
     </a>
     (string aTitle, int aDefaultInsertionPoint, boolean aShowPicker);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     array object
     <a href="#getAnnotationsForURI.28.29">
      getAnnotationsForURI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     array object
     <a href="#getAnnotationsForItem.28.29">
      getAnnotationsForItem
     </a>
     (int aItemId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#setAnnotationsForURI.28.29">
      setAnnotationsForURI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI, object aAnnos);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#setAnnotationsForURI.28.29">
      setAnnotationsForURI
     </a>
     (int aItemId, object aAnnos);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <a href="#getViewForNode.28.29">
      getViewForNode
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMNode" title="">
       nsIDOMNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#markPageAsTyped.28.29">
      markPageAsTyped
     </a>
     (string aURL);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#markPageAsFollowedBookmark.28.29">
      markPageAsFollowedBookmark
     </a>
     (string aURL);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     boolean
     <a href="#checkURLSecurity.28.29">
      checkURLSecurity
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aURINode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getQueryStringForFolder.28.29">
      getQueryStringForFolder
     </a>
     (int aFolderId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getDescriptionFromDocument.28.29">
      getDescriptionFromDocument
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMDocument" title="">
       nsIDOMDocument
      </a>
     </code>
     doc);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#setPostDataForBookmark.28.29">
      setPostDataForBookmark
     </a>
     (int aBoomarkId, string aPostData);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getPostDataForBookmark.28.29">
      getPostDataForBookmark
     </a>
     (int aBoomarkId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     array string
     <a href="#getURLAndPostDataForKeyword.28.29">
      getURLAndPostDataForKeyword
     </a>
     (string aKeyword);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     string
     <a href="#getItemDescription.28.29">
      getItemDescription
     </a>
     (int aItemId);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     <a href="#getMostRecentBookmarkForURI.28.29">
      getMostRecentBookmarkForURI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     <a href="#getMostRecentFolderForFeedURI.28.29">
      getMostRecentFolderForFeedURI
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
       nsIURI
      </a>
     </code>
     aURI);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     <a href="#getURLsForContainerNode.28.29">
      getURLsForContainerNode
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#openContainerNodeInTabs.28.29">
      openContainerNodeInTabs
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMEvent" title="">
       nsIDOMEvent
      </a>
     </code>
     aEvent);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#openURINodesInTabs.28.29">
      openURINodesInTabs
     </a>
     (array
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNodes,
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMEvent" title="">
       nsIDOMEvent
      </a>
     </code>
     aEvent);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#createMenuItemForNode.28.29">
      createMenuItemForNode
     </a>
     (
     <code>
      <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">
       nsINavHistoryResultNode
      </a>
     </code>
     aNode, aContainersMap);
    </code>
   </td>
  </tr>
 </tbody>
</table>
<h3 id="Constants" name="Constants">
 Constants
</h3>
<h4 id="Mimetypes" name="Mimetypes">
 Mimetypes
</h4>
<ul>
 <li>
  TYPE_X_MOZ_PLACE_CONTAINER
 </li>
 <li>
  TYPE_X_MOZ_PLACE_SEPARATOR: "text/x-moz-place-separator",
 </li>
 <li>
  TYPE_X_MOZ_PLACE: "text/x-moz-place",
 </li>
 <li>
  TYPE_X_MOZ_URL: "text/x-moz-url",
 </li>
 <li>
  TYPE_HTML: "text/html",
 </li>
 <li>
  TYPE_UNICODE: "text/unicode",
 </li>
</ul>
<h4 id="Services" name="Services">
 Services
</h4>
<p>
 There's easy access to some of the common services used in bookmarks or history navigation here. For instance, normally in order to get access to the bookmarks service, you have to run something like:
</p>
<pre class="brush: js"> Components.classes["@mozilla.org/browser/nav-bookmarks-service;1"]
   .getService(Components.interfaces.nsINavBookmarksService);
</pre>
<p>
 With places utils all you need to write is:
</p>
<pre class="brush: js"> PlacesUtils.bookmarks
</pre>
<p>
 This should save on the number of references to the service that are needed, and can help clean up interfaces that are already fairly cluttered. There are currently 11 services defined in here.
</p>
<dl>
 <dt>
  <code>
   bookmarks
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavBookmarksService" title="">
    nsINavBookmarksService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   history
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService" title="">
    nsINavHistoryService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   globalHistory
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIBrowserHistory" title="">
    nsIBrowserHistory
   </a>
  </code>
 </dd>
 <dt>
  <code>
   livemarks
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsILivemarkService" title="">
    nsILivemarkService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   annotations
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService" title="">
    nsIAnnotationService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   favicons
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFaviconService" title="">
    nsIFaviconService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   microsummaries
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIMicrosummaryService" title="">
    nsIMicrosummaryService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   tagging
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITaggingService" title="">
    nsITaggingService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   RDF
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIRDFService" title="">
    nsIRDFService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   ptm
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIPlacesTransactionsService" title="">
    nsIPlacesTransactionsService
   </a>
  </code>
 </dd>
 <dt>
  <code>
   clipboard
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIClipboard" title="">
    nsIClipboard
   </a>
  </code>
 </dd>
 <dt>
  <code>
   URIFixup
  </code>
 </dt>
 <dd>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURIFixup" title="">
    nsIURIFixup
   </a>
  </code>
 </dd>
</dl>
<h4 id="Special_Places" name="Special_Places">
 Special Places
</h4>
<p>
 These are essentially references to the id's of special folders within places. They can save you time calling the service and searching for a particular folder on your own.
</p>
<dl>
 <dt>
  <code>
   placesRootId
  </code>
 </dt>
 <dd>
 </dd>
 <dt>
  <code>
   bookmarksMenuFolderId
  </code>
 </dt>
 <dd>
  The bookmarks menu.
 </dd>
 <dt>
  <code>
   toolbarFolderId
  </code>
 </dt>
 <dd>
  The bookmarks toolbar.
 </dd>
 <dt>
  <code>
   tagsFolderId
  </code>
 </dt>
 <dd>
  The folder that tags are stored in.
 </dd>
 <dt>
  <code>
   unfiledBookmarksFolderId
  </code>
 </dt>
 <dd>
 </dd>
</dl>
<h4 id="Other" name="Other">
 Other
</h4>
<p>
 Other attributes stored in PlacesUtils.
</p>
<dl>
 <dt>
  <s>
   <code>
    localStore
   </code>
  </s>
 </dt>
 <dd>
  <span style="color: #ff0000;">
   Warning
  </span>
  : Local store provided access to the local-store rdf data source, which stores persisted information about the browser. Its functionality has been replaced by
  <a href="http://dxr.mozilla.org/mozilla-central/source/toolkit/components/xulstore/nsIXULStore.idl">
   xulstore
  </a>
  .
 </dd>
 <dt>
  <code>
   uriTypes
  </code>
 </dt>
 <dd>
 </dd>
 <dt>
  <code>
   containerTypes
  </code>
 </dt>
 <dd>
 </dd>
 <dt>
  <code>
   leftPaneQueries
  </code>
 </dt>
 <dd>
  Queries that appear in the Library's left pane.
 </dd>
 <dt>
  <code>
   leftPaneFolderId
  </code>
 </dt>
 <dd>
  A single folder shown in the Library's left pane.
 </dd>
 <dt>
  <code>
   allBookmarksFolderId
  </code>
 </dt>
 <dd>
  The id of the "All Bookmarks" folder shown in the Library's left pane.
 </dd>
 <dt>
  <code>
   placesFlavors
  </code>
 </dt>
 <dd>
 </dd>
 <dt>
  <code>
   GENERIC_VIEW_DROP_TYPES
  </code>
 </dt>
 <dd>
 </dd>
</dl>
<h3 id="Methods" name="Methods">
 Methods
</h3>
<h4 id="createFixedURI" name="createFixedURI">
 createFixedURI
</h4>
<pre class="brush: cpp;"> nsIURI createFixedURI(string aSpec)
</pre>
<p>
 Takes in a spec and returns a valid uri based on it using the
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURIFixup" title="">
   nsIURIFixup
  </a>
 </code>
 service.
</p>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aSpec
  </code>
 </dt>
 <dd>
  a url string that needs fixup
 </dd>
</dl>
<h6 id="Return_type" name="Return_type">
 Return type
</h6>
<p>
 Returns a correct
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
   nsIURI
  </a>
 </code>
 .
</p>
<h4 id="getFormattedString.28.29" name="getFormattedString.28.29">
 getFormattedString()
</h4>
<pre class="brush: cpp;"> string getFormattedString(string key,
                           array string params)
</pre>
<h6 id="Parameters_2" name="Parameters_2">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   key
  </code>
 </dt>
 <dd>
  The string name to get from the string bundle
 </dd>
 <dt>
  <code>
   params
  </code>
 </dt>
 <dd>
  Strings to substitute into the bundle at designated points
 </dd>
</dl>
<p>
 See
 <a href="/en-US/docs/Mozilla/Tech/XUL/stringbundle" title="en/XUL/stringbundle">
  XUL:stringbundle
 </a>
 for more information.
</p>
<h6 id="Return_type_2" name="Return_type_2">
 Return type
</h6>
<p>
 Returns a string from the default places
 <a href="/en-US/docs/Mozilla/Tech/XUL/stringbundle" title="en/XUL/stringbundle">
  stringbundle
 </a>
 .
</p>
<h4 id="getString.28.29" name="getString.28.29">
 getString()
</h4>
<pre class="brush: cpp;"> string getString(string key)
</pre>
<h6 id="Parameters_3" name="Parameters_3">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   key
  </code>
 </dt>
 <dd>
  The name of the string to get.
 </dd>
</dl>
<h6 id="Return_type_3" name="Return_type_3">
 Return type
</h6>
<p>
 Returns a string from the default places
 <a href="/en-US/docs/Mozilla/Tech/XUL/stringbundle" title="en/XUL/stringbundle">
  stringbundle
 </a>
 .
</p>
<h4 id="nodeIs.28.29" name="nodeIs.28.29">
 nodeIs()
</h4>
<p>
 There are a ton of nodeIs(something) functions in here to check properties of a bookmark node. The all take in the same argument and return a boolean true or false, so I'm just going to list them all in one lump:
</p>
<dl>
 <dt>
  <code>
   <code>
    boolean nodeIsFolder(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a Bookmark folder or not.
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsBookmark(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode represents a bookmarked URI.
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsSeparator(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a Bookmark separator.
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsVisit(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a visit item or not
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsURI(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a URL item or not
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsQuery(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a Query item or not
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsReadOnly(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines if a node is read only (children cannot be inserted, sometimes they cannot be removed depending on the circumstance)
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsHost(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a host folder or not
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsContainer(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a ResultNode is a container item or not
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsDynamicContainer(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether or not a result-node is a dynamic-container item. The dynamic container result node type is for dynamically created containers (e.g. for the file browser service where you get your folders in bookmark menus).
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsLivemarkContainer(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether a result node is a remote container registered by the livemark service.
 </dd>
 <dt>
  <code>
   <code>
    boolean nodeIsLivemarkItem(aNode)
   </code>
  </code>
 </dt>
 <dd>
  Determines whether a result node is a live-bookmark item
 </dd>
</dl>
<h6 id="Parameters_4" name="Parameters_4">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aNode
  </code>
 </dt>
 <dd>
  The node to check.
 </dd>
</dl>
<h6 id="Return_type_4" name="Return_type_4">
 Return type
</h6>
<p>
 Returns a boolean.
</p>
<h3 id="isReadonlyFolder.28.29" name="isReadonlyFolder.28.29">
 isReadonlyFolder()
</h3>
<p>
 Determines whether or not a node is a readonly folder.
</p>
<pre class="brush: cpp;"> boolean isReadonlyFolder(aNode)
</pre>
<h6 id="Parameters_5" name="Parameters_5">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aNode
  </code>
 </dt>
 <dd>
  The node to check.
 </dd>
</dl>
<h6 id="Return_type_5" name="Return_type_5">
 Return type
</h6>
<p>
 Return true if the node is a folder, false otherwise.
</p>
<h4 id="getIndexOfNode.28.29" name="getIndexOfNode.28.29">
 getIndexOfNode()
</h4>
<p>
 Gets the index of a node within its parent container
</p>
<pre class="brush: cpp;"> int getIndexOfNode(aNode)
</pre>
<h6 id="Parameters_6" name="Parameters_6">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aNode
  </code>
 </dt>
 <dd>
  The node to look up
 </dd>
</dl>
<h6 id="Return_type_6" name="Return_type_6">
 Return type
</h6>
<p>
 Returns the index of the node within its parent container, or -1 if the node was not found or the node specified has no parent.
</p>
<h4 id="wrapNode.28.29" name="wrapNode.28.29">
 wrapNode()
</h4>
<p>
 String-wraps a result node according to the rules of the specified content type.
</p>
<pre class="brush: cpp;"> string wrapNode(aNode,
                 string aType,
                 nsIURI aOverrideURI)
</pre>
<h6 id="Parameters_7" name="Parameters_7">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aNode
  </code>
 </dt>
 <dd>
  The Result node to wrap (serialize)
 </dd>
 <dt>
  <code>
   aType
  </code>
 </dt>
 <dd>
  The content type to serialize as
 </dd>
 <dt>
  <code>
   aOverrideURI
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  Used instead of the node's URI if provided. This is useful for wrapping a container as TYPE_X_MOZ_URL, TYPE_HTML or TYPE_UNICODE.
 </dd>
</dl>
<h6 id="Return_type_7" name="Return_type_7">
 Return type
</h6>
<p>
 Returns A string serialization of the node
</p>
<h4 id="unwrapNodes.28.29" name="unwrapNodes.28.29">
 unwrapNodes()
</h4>
<p>
 Unwraps data from the Clipboard or the current Drag Session.
</p>
<pre class="brush: cpp;"> array object unwrapNodes(blob,
                          type)
</pre>
<h6 id="Parameters_8" name="Parameters_8">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   blob
  </code>
 </dt>
 <dd>
  A blob (string) of data, in some format we potentially know how to parse.
 </dd>
 <dt>
  <code>
   type
  </code>
 </dt>
 <dd>
  The content type of the blob.
 </dd>
</dl>
<h6 id="Return_type_8" name="Return_type_8">
 Return type
</h6>
<p>
 Returns an array of objects representing each item contained by the source.
</p>
<h4 id="makeTransaction.28.29" name="makeTransaction.28.29">
 makeTransaction()
</h4>
<p>
 Constructs a Transaction for the drop or paste of a blob of data into a container.
</p>
<pre class="brush: cpp;"> makeTransaction(data,
                 type,
                 container,
                 index,
                 copy)
</pre>
<h6 id="Parameters_9" name="Parameters_9">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   data
  </code>
 </dt>
 <dd>
  The unwrapped data blob of dropped or pasted data.
 </dd>
 <dt>
  <code>
   type
  </code>
 </dt>
 <dd>
  The content type of the data
 </dd>
 <dt>
  <code>
   container
  </code>
 </dt>
 <dd>
  The container the data was dropped or pasted into
 </dd>
 <dt>
  <code>
   index
  </code>
 </dt>
 <dd>
  The index within the container the item was dropped or pasted at
 </dd>
 <dt>
  <code>
   copy
  </code>
 </dt>
 <dd>
  The drag action was copy, so don't move folders or links.
 </dd>
</dl>
<h6 id="Return_type_9" name="Return_type_9">
 Return type
</h6>
<p>
 Returns an object implementing
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITransaction" title="">
   nsITransaction
  </a>
 </code>
 that can perform the move/insert.
</p>
<h4 id="getFolderContents.28.29" name="getFolderContents.28.29">
 getFolderContents()
</h4>
<pre class="brush: cpp;"> getFolderContents(aFolderId,
                   aExcludeItems,
                   aExpandQueries)
</pre>
<p>
 Generates a nsINavHistoryResult for the contents of a folder.
</p>
<h6 id="Parameters_10" name="Parameters_10">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   folderId
  </code>
 </dt>
 <dd>
  The folder to open
 </dd>
 <dt>
  <code>
   [optional] excludeItems
  </code>
 </dt>
 <dd>
  True to hide all items (individual bookmarks). This is used on the left places pane so you just get a folder hierarchy.
 </dd>
 <dt>
  <code>
   [optional] expandQueries
  </code>
 </dt>
 <dd>
  True to make query items expand as new containers. For managing,you want this to be false, for menus and such, you want this to be true.
 </dd>
</dl>
<h6 id="Return_type_10" name="Return_type_10">
 Return type
</h6>
<p>
 Returns a
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResult" title="">
   nsINavHistoryResult
  </a>
 </code>
 containing the contents of the folder. The result.root is guaranteed to be open.
</p>
<h3 id="Bookmark_Dialog" name="Bookmark_Dialog">
 Bookmark Dialog
</h3>
<p>
 Methods to show the bookmarkProperties dialog in its various modes.
</p>
<p>
 The showMinimalAdd methods open the dialog by its alternative URI. Thus they persist the dialog dimensions separately from the showAdd methods. Note these variants also do not return the dialog "performed" state since they may not open the dialog modally.
</p>
<h4 id="showAddBookmarkUI.28.29" name="showAddBookmarkUI.28.29">
 showAddBookmarkUI()
</h4>
<p>
 Shows the "Add Bookmark" dialog.
</p>
<pre class="brush: cpp;"> showAddBookmarkUI(aURI,
                   aTitle,
                   aDescription,
                   aDefaultInsertionPoint,
                   aShowPicker,
                   aLoadInSidebar,
                   aKeyword,
                   aPostData)
</pre>
<h6 id="Parameters_11" name="Parameters_11">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   [optional] aURI
  </code>
 </dt>
 <dd>
  An
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="en/nsIURI">
   nsIURI
  </a>
  object for which the "add bookmark" dialog is to be shown.
 </dd>
 <dt>
  <code>
   [optional] aTitle
  </code>
 </dt>
 <dd>
  The default title for the new bookmark.
 </dd>
 <dt>
  <code>
   [optional] aDescription
  </code>
 </dt>
 <dd>
  The default description for the new bookmark
 </dd>
 <dt>
  <code>
   [optional] aDefaultInsertionPoint
  </code>
 </dt>
 <dd>
  The default insertion point for the new item. If set, the folder picker would be hidden unless aShowPicker is set to true, in which case the dialog only uses the folder identifier from the insertion point as the initially selected item in the folder picker.
 </dd>
 <dt>
  <code>
   [optional] aShowPicker
  </code>
 </dt>
 <dd>
  see above
 </dd>
 <dt>
  <code>
   [optional] aLoadInSidebar
  </code>
 </dt>
 <dd>
  If true, the dialog will default to load the new item in the sidebar (as a web panel).
 </dd>
 <dt>
  <code>
   [optional] aKeyword
  </code>
 </dt>
 <dd>
  The default keyword for the new bookmark. The keyword field will be shown in the dialog if this is used.
 </dd>
 <dt>
  <code>
   [optional] aPostData
  </code>
 </dt>
 <dd>
  POST data for POST-style keywords.
 </dd>
</dl>
<h6 id="Return_type_11" name="Return_type_11">
 Return type
</h6>
<p>
 Returns true if any transaction has been performed.
</p>
<div class="blockIndicator note">
 <p>
  <strong>
   Note:
  </strong>
  The location, description and "load in sidebar" fields are visible only if there is no initial URI (aURI is null).
 </p>
</div>
<div class="blockIndicator note">
 <p>
  <strong>
   Note:
  </strong>
  When aDefaultInsertionPoint is not set, the dialog defaults to the bookmarks root folder.
 </p>
</div>
<h4 id="showMinimalAddBookmarkUI.28.29" name="showMinimalAddBookmarkUI.28.29">
 showMinimalAddBookmarkUI()
</h4>
<pre class="brush: cpp;"> showMinimalAddBookmarkUI(aURI,
                        aTitle,
                        aDescription,
                        aDefaultInsertionPoint,
                        aShowPicker,
                        aLoadInSidebar,
                        aKeyword,
                        aPostData)
</pre>
<p>
 This opens the dialog with only the name and folder pickers visible by default. You can still pass in the various paramaters as the default properties for the new bookmark. The keyword field will be visible only if the aKeyword parameter was used.
</p>
<p>
 See
 <a href="#showAddBookmarkUI.28.29">
  showAddBookmarkUI
 </a>
 for a description of the params.
</p>
<h4 id="showAddLivemarkUI.28.29" name="showAddLivemarkUI.28.29">
 showAddLivemarkUI()
</h4>
<p>
 Shows the "Add Live Bookmark" dialog.
</p>
<pre class="brush: cpp;"> boolean showAddLivemarkUI(aFeedURI,
                           aSiteURI,
                           aTitle,
                           aDescription,
                           aDefaultInsertionPoint,
                           aShowPicker)
</pre>
<h6 id="Parameters_12" name="Parameters_12">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   [optional] aFeedURI
  </code>
 </dt>
 <dd>
  The feed URI for which the dialog is to be shown (nsIURI).
 </dd>
 <dt>
  <code>
   [optional] aSiteURI
  </code>
 </dt>
 <dd>
  The site URI for the new live-bookmark (nsIURI).
 </dd>
 <dt>
  <code>
   [optional] aDefaultInsertionPoint
  </code>
 </dt>
 <dd>
  The default insertion point for the new item. If set, the folder picker would be hidden unless aShowPicker is set to true, in which case the dialog only uses the folder identifier from the insertion point as the initially selected item in the folder picker.
 </dd>
 <dt>
  <code>
   [optional] aShowPicker
  </code>
 </dt>
 <dd>
  see above
 </dd>
</dl>
<h6 id="Return_type_12" name="Return_type_12">
 Return type
</h6>
<p>
 Return true if any transaction has been performed.
</p>
<div class="blockIndicator note">
 <p>
  <strong>
   Note:
  </strong>
  The feedURI and description fields are visible only if there is no initial feed URI (aFeedURI is null).
 </p>
</div>
<div class="blockIndicator note">
 <p>
  <strong>
   Note:
  </strong>
  When aDefaultInsertionPoint is not set, the dialog defaults to the bookmarks root folder.
 </p>
</div>
<h4 id="showMinimalAddLivemarkUI.28.29" name="showMinimalAddLivemarkUI.28.29">
 showMinimalAddLivemarkUI()
</h4>
<p>
 This opens the dialog with only the name and folder pickers visible by default. You can still pass in the various paramaters as the default properties for the new live-bookmark.
</p>
<pre class="brush: cpp;"> boolean showMinimalAddLivemarkUI(aFeedURI,
                                  aSiteURI,
                                  aTitle,
                                  aDescription,
                                  aDefaultInsertionPoint,
                                  aShowPicker)
</pre>
<p>
 See
 <a href="#showAddLivemarkUI.28.29">
  showAddLivemarkUI
 </a>
 for a description of the params.
</p>
<h4 id="showMinimalAddMultiBookmarkUI.28.29" name="showMinimalAddMultiBookmarkUI.28.29">
 showMinimalAddMultiBookmarkUI()
</h4>
<p>
 Show an "Add Bookmarks" dialog to allow the adding of a folder full of bookmarks corresponding to the objects in the uriList. This will be called most often as the result of a "Bookmark All Tabs..." command.
</p>
<pre class="brush: cpp;"> showAddMultiBookmarkUI(aURIList)
</pre>
<h6 id="Parameters_13" name="Parameters_13">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURIList
  </code>
 </dt>
 <dd>
  List of nsIURI objects representing the locations to be bookmarked.
 </dd>
</dl>
<h6 id="Return_type_13" name="Return_type_13">
 Return type
</h6>
<p>
 Return true if any transaction has been performed.
</p>
<h4 id="showBookmarkProperties.28.29" name="showBookmarkProperties.28.29">
 showBookmarkProperties()
</h4>
<p>
 Opens the bookmark properties panel for a given bookmark identifier.
</p>
<pre class="brush: cpp;"> showBookmarkProperties(aId)
</pre>
<h6 id="Parameters_14" name="Parameters_14">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aId
  </code>
 </dt>
 <dd>
  bookmark identifier for which the properties are to be shown
 </dd>
</dl>
<h6 id="Return_type_14" name="Return_type_14">
 Return type
</h6>
<p>
 Return true if any transaction has been performed.
</p>
<h4 id="showFolderProperties.28.29" name="showFolderProperties.28.29">
 showFolderProperties()
</h4>
<p>
 Opens the folder properties panel for a given folder ID.
</p>
<pre class="brush: cpp;"> showFolderProperties(aId)
</pre>
<h6 id="Parameters_15" name="Parameters_15">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aId
  </code>
 </dt>
 <dd>
  an integer representing the ID of the folder to edit
 </dd>
</dl>
<h6 id="Return_type_15" name="Return_type_15">
 Return type
</h6>
<p>
 Return true if any transaction has been performed.
</p>
<h4 id="showAddFolderUI.28.29" name="showAddFolderUI.28.29">
 showAddFolderUI()
</h4>
<p>
 Shows the "New Folder" dialog.
</p>
<pre class="brush: cpp;"> showAddFolderUI(aTitle,
                 aDefaultInsertionPoint, 
                 aShowPicker)
</pre>
<h6 id="Parameters_16" name="Parameters_16">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   [optional] aTitle
  </code>
 </dt>
 <dd>
  The default title for the new bookmark.
 </dd>
 <dt>
  <code>
   [optional] aDefaultInsertionPoint
  </code>
 </dt>
 <dd>
  The default insertion point for the new item. If set, the folder picker would be hidden unless aShowPicker is set to true, in which case the dialog only uses the folder identifier from the insertion point as the initially selected item in the folder picker.
 </dd>
 <dt>
  <code>
   [optional] aShowPicker
  </code>
 </dt>
 <dd>
  see above
 </dd>
</dl>
<h6 id="Return_type_16" name="Return_type_16">
 Return type
</h6>
<p>
 Return true if any transaction has been performed.
</p>
<h3 id="Annotations_2" name="Annotations_2">
 Annotations
</h3>
<p>
 These are functions that simplify annotating pages. Information like keywords, descriptions, and POST data is already stored as annotations by Firefox, but you can create additional ones. Using the functions can save you some implementation work. For example, given a uri, the traditional code to get all its annotations would be:
</p>
<pre class="brush: js"> var annotationService = Components.classes["@mozilla.org/browser/annotation-service;1"]
   .getService(Components.interfaces.nsIAnnotationService);
 try {
   var names = annotationService.getPageAnnotationNames(uri);
 } catch(e) {
   // no annotations
 }
 var annotations = new Array();
 for(var i in names) {
   try {
     annotations.push(annotationService.getPageAnnotation(uri, names[i]));
   } catch(e) {
     // this shouldn't happen
   }
 }
</pre>
<p>
 The code using placesUtils collapses a bit to:
</p>
<pre class="brush: js"> var annotations = PlacesUtils.getAnnotationsForUri(uri);
</pre>
<p>
 saving you a bit of clumsy code and leaving Mozilla to make sure everything is written correctly. It also gives you more information that my hastily written (and probably incorrect) example up above. The annotation objects returned or send from/to all these functions all are arrays of objects which have the properties:
</p>
<dl>
 <dt>
  <code>
   name
  </code>
 </dt>
 <dd>
  the annotation name
 </dd>
 <dt>
  <code>
   flags
  </code>
 </dt>
 <dd>
  annotation flags
 </dd>
 <dt>
  <code>
   expires
  </code>
 </dt>
 <dd>
  annotation expiration
 </dd>
 <dt>
  <code>
   mimeType
  </code>
 </dt>
 <dd>
  mimetype of the annotation, usually only used for binary annotations
 </dd>
 <dt>
  <code>
   type
  </code>
 </dt>
 <dd>
  the type used for non-binary annotations
 </dd>
 <dt>
  <code>
   value
  </code>
 </dt>
 <dd>
  the value of the annotation
 </dd>
</dl>
<h4 id="getAnnotationsForURI.28.29" name="getAnnotationsForURI.28.29">
 getAnnotationsForURI()
</h4>
<p>
 Fetch all annotations for a URI, including all properties of each annotation which would be required to recreate it.
</p>
<pre class="brush: cpp;"> array object getAnnotationsForURI(aURI)
</pre>
<h6 id="Parameters_17" name="Parameters_17">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The URI for which annotations are to be retrieved.
 </dd>
</dl>
<p>
 Return array of objects, each containing the following properties: name, flags, expires, mimeType, type, value
</p>
<h4 id="getAnnotationsForItem.28.29" name="getAnnotationsForItem.28.29">
 getAnnotationsForItem()
</h4>
<p>
 Fetch all annotations for an item, including all properties of each annotation which would be required to recreate it.
</p>
<pre class="brush: cpp;"> array object getAnnotationsForItem(aItemId)
</pre>
<h6 id="Parameters_18" name="Parameters_18">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aItemId
  </code>
 </dt>
 <dd>
  The identifier of the itme for which annotations are to be retrieved.
 </dd>
</dl>
<h6 id="Return_type_17" name="Return_type_17">
 Return type
</h6>
<p>
 Return Array of objects, each containing the following properties: name, flags, expires, mimeType, type, value
</p>
<h4 id="setAnnotationsForURI.28.29" name="setAnnotationsForURI.28.29">
 setAnnotationsForURI()
</h4>
<p>
 Annotate a URI with a batch of annotations.
</p>
<pre class="brush: cpp;"> setAnnotationsForURI(nsIURI aURI,
                      array object aAnnos)
</pre>
<h6 id="Parameters_19" name="Parameters_19">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The URI for which annotations are to be set.
 </dd>
 <dt>
  <code>
   aAnnotations
  </code>
 </dt>
 <dd>
  Array of objects, each containing the following properties: name, flags, expires, type, mimeType (only used for binary annotations) value.
 </dd>
</dl>
<h4 id="setAnnotationsForItem.28.29" name="setAnnotationsForItem.28.29">
 setAnnotationsForItem()
</h4>
<p>
 Annotate an item with a batch of annotations.
</p>
<pre class="brush: cpp;"> setAnnotationsForItem(int aItemId,
                       array object aAnnos)
</pre>
<h6 id="Parameters_20" name="Parameters_20">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aItemId
  </code>
 </dt>
 <dd>
  The identifier of the item for which annotations are to be set
 </dd>
 <dt>
  <code>
   aAnnotations
  </code>
 </dt>
 <dd>
  Array of objects, each containing the following properties: name, flags, expires, type, mimeType (only used for binary annotations) value.
 </dd>
</dl>
<h3 id="Other_2" name="Other_2">
 Other
</h3>
<p>
 Other functions that I'm not sure how to file.
</p>
<h4 id="getViewForNode.28.29" name="getViewForNode.28.29">
 getViewForNode()
</h4>
<p>
 Returns the closet ancestor places view for the given DOM node
</p>
<pre class="brush: cpp;"> getViewForNode(aNode)
</pre>
<h6 id="Parameters_21" name="Parameters_21">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aNode
  </code>
 </dt>
 <dd>
  a DOM node
 </dd>
</dl>
<h6 id="Return_type_18" name="Return_type_18">
 Return type
</h6>
<p>
 Return the closet ancestor places view if exists, null otherwsie.
</p>
<h4 id="markPageAsTyped.28.29" name="markPageAsTyped.28.29">
 markPageAsTyped()
</h4>
<p>
 By calling this before we visit a URL, we will use TRANSITION_TYPED as the transition for the visit to that URL (if we don't have a referrer). This is used when visiting pages from the history menu, history sidebar, url bar, url autocomplete results, and history searches from the places organizer. If we don't call this, we'll treat those visits as TRANSITION_LINK.
</p>
<pre class="brush: cpp;"> markPageAsTyped(string aURL)
</pre>
<h4 id="markPageAsFollowedBookmark.28.29" name="markPageAsFollowedBookmark.28.29">
 markPageAsFollowedBookmark()
</h4>
<p>
 By calling this before we visit a URL, we will use TRANSITION_BOOKMARK as the transition for the visit to that URL (if we don't have a referrer). This is used when visiting pages from the bookmarks menu, personal toolbar, and bookmarks from within the places organizer. If we don't call this, we'll treat those visits as TRANSITION_LINK.
</p>
<pre class="brush: cpp;"> markPageAsFollowedBookmark(string aURL)
</pre>
<h4 id="checkURLSecurity.28.29" name="checkURLSecurity.28.29">
 checkURLSecurity()
</h4>
<p>
 Allows opening of javascript/data URI only if the given node is bookmarked (see bug 224521).
</p>
<pre class="brush: cpp;"> checkURLSecurity(aURINode)
</pre>
<h6 id="Parameters_22" name="Parameters_22">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURINode
  </code>
 </dt>
 <dd>
  a URI node
 </dd>
</dl>
<h6 id="Return_type_19" name="Return_type_19">
 Return type
</h6>
<p>
 Return true if it's safe to open the node in the browser, false otherwise.
</p>
<h4 id="getQueryStringForFolder.28.29" name="getQueryStringForFolder.28.29">
 getQueryStringForFolder()
</h4>
<p>
 Helper for getting a serialized Places query for a particular folder.
</p>
<pre class="brush: cpp;"> getQueryStringForFolder(int aFolderId)
</pre>
<h6 id="Parameters_23" name="Parameters_23">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aFolderId
  </code>
 </dt>
 <dd>
  The folder id to get a query for.
 </dd>
</dl>
<h6 id="Return_type_20" name="Return_type_20">
 Return type
</h6>
<p>
 Return string serialized place URI
</p>
<h4 id="getDescriptionFromDocument.28.29" name="getDescriptionFromDocument.28.29">
 getDescriptionFromDocument()
</h4>
<p>
 Get the description associated with a document, as specified in a &lt;META&gt; element.
</p>
<pre class="brush: cpp;"> getDescriptionFromDocument(doc)
</pre>
<h6 id="Parameters_24" name="Parameters_24">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   doc
  </code>
 </dt>
 <dd>
  A DOM Document to get a description for
 </dd>
</dl>
<h6 id="Return_type_21" name="Return_type_21">
 Return type
</h6>
<p>
 Returns a description string if a META element was discovered with a "description" or "httpequiv" attribute, empty string otherwise.
</p>
<h4 id="setPostDataForBookmark.28.29" name="setPostDataForBookmark.28.29">
 setPostDataForBookmark()
</h4>
<p>
 Set the POST data associated with a bookmark, if any. Used by POST keywords.
</p>
<pre class="brush: cpp;"> setPostDataForBookmark(int aBookmarkId,
                        string aPostData)
</pre>
<dl>
 <dt>
  <code>
   aBookmarkId
  </code>
 </dt>
 <dd>
 </dd>
</dl>
<h6 id="Return_type_22" name="Return_type_22">
 Return type
</h6>
<p>
 Returns string of POST data
</p>
<h4 id="getPostDataForBookmark.28.29" name="getPostDataForBookmark.28.29">
 getPostDataForBookmark()
</h4>
<p>
 Get the POST data associated with a bookmark, if any.
</p>
<pre class="brush: cpp;"> getPostDataForBookmark(int aBookmarkId)
</pre>
<h6 id="Parameters_25" name="Parameters_25">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aBookmarkId
  </code>
 </dt>
 <dd>
 </dd>
</dl>
<h6 id="Return_type_23" name="Return_type_23">
 Return type
</h6>
<p>
 Returns string of POST data if set for aBookmarkId. null otherwise.
</p>
<h4 id="getURLAndPostDataForKeyword.28.29" name="getURLAndPostDataForKeyword.28.29">
 getURLAndPostDataForKeyword()
</h4>
<p>
 Get the URI (and any associated POST data) for a given keyword.
</p>
<pre class="brush: cpp;"> getURLAndPostDataForKeyword(aKeyword)
</pre>
<h6 id="Parameters_26" name="Parameters_26">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aKeyword
  </code>
 </dt>
 <dd>
  keyword
 </dd>
</dl>
<h6 id="Return_type_24" name="Return_type_24">
 Return type
</h6>
<p>
 Returns an array containing a string URL and a string of POST data
</p>
<h4 id="getItemDescription.28.29" name="getItemDescription.28.29">
 getItemDescription()
</h4>
<p>
 Retrieve the description of an item
</p>
<pre class="brush: cpp;"> getItemDescription(aItemId)
</pre>
<h6 id="Parameters_27" name="Parameters_27">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aItemId
  </code>
 </dt>
 <dd>
  item identifier
 </dd>
</dl>
<h6 id="Return_type_25" name="Return_type_25">
 Return type
</h6>
<p>
 Returns the description of the given item, or an empty string if it is not set.
</p>
<h4 id="getMostRecentBookmarkForURI.28.29" name="getMostRecentBookmarkForURI.28.29">
 getMostRecentBookmarkForURI()
</h4>
<p>
 Get the most recently added/modified bookmark for a URL, excluding items under tag or livemark containers. -1 is returned if no item is found.
</p>
<pre class="brush: cpp;"> getMostRecentBookmarkForURI(aURI)
</pre>
<h4 id="getMostRecentFolderForFeedURI.28.29" name="getMostRecentFolderForFeedURI.28.29">
 getMostRecentFolderForFeedURI()
</h4>
<pre class="brush: cpp;"> getMostRecentFolderForFeedURI(aURI)
</pre>
<h4 id="getURLsForContainerNode.28.29" name="getURLsForContainerNode.28.29">
 getURLsForContainerNode()
</h4>
<pre class="brush: cpp;"> getURLsForContainerNode(aNode)
</pre>
<h4 id="openContainerNodeInTabs.28.29" name="openContainerNodeInTabs.28.29">
 openContainerNodeInTabs()
</h4>
<pre class="brush: cpp;"> openContainerInTabs(aNode,
                     aEvent)
</pre>
<h4 id="openURINodesInTabs.28.29" name="openURINodesInTabs.28.29">
 openURINodesInTabs()
</h4>
<pre class="brush: cpp;"> openURINodesInTabs(aNodes,
                    aEvent)
</pre>
<h4 id="createMenuItemForNode.28.29" name="createMenuItemForNode.28.29">
 createMenuItemForNode()
</h4>
<p>
 Helper for the toolbar and menu views.
</p>
<pre class="brush: cpp;"> createMenuItemForNode(aNode,
                       aContainersMap)
</pre></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/ExE-Boss">ExE-Boss</a>, <a href="https://developer.mozilla.org/en-US/profiles/e-motiv">e-motiv</a>, <a href="https://developer.mozilla.org/en-US/profiles/rvitillo">rvitillo</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sebastianz">Sebastianz</a>, <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, <a href="https://developer.mozilla.org/en-US/profiles/PikadudeNo1">PikadudeNo1</a>, <a href="https://developer.mozilla.org/en-US/profiles/pdmdn">pdmdn</a>, <a href="https://developer.mozilla.org/en-US/profiles/mathemajor">mathemajor</a>, <a href="https://developer.mozilla.org/en-US/profiles/Varmaa">Varmaa</a>, <a href="https://developer.mozilla.org/en-US/profiles/Dietrich">Dietrich</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Graememcc">Graememcc</a>, <a href="https://developer.mozilla.org/en-US/profiles/Pcdingo">Pcdingo</a>, <a href="https://developer.mozilla.org/en-US/profiles/Potappo">Potappo</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wjjohnst">Wjjohnst</a>.</p></div></body>
</html>
