<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Using the Places tagging service</title>
  </head>

  <body><div class="content-heading"><h1>Using the Places tagging service</h1></div>
<div class="content"><p></p>

<p>The tagging service, offered by the <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITaggingService" title="">nsITaggingService</a></code> interface, provides methods to tag and untag a URI, to retrieve URIs for a given tag, and to retrieve all tags for a URI.</p>

<h3 id="Initiating_the_tagging_service" name="Initiating_the_tagging_service">Initiating the tagging service</h3>

<p>Before using the tagging service, you need to obtain a reference to an instance of it:</p>

<pre>var taggingSvc = Components.classes["@mozilla.org/browser/tagging-service;1"]
                           .getService(Components.interfaces.nsITaggingService);
</pre>

<h3 id="Tagging_a_URI" name="Tagging_a_URI">Tagging a URI</h3>

<p>The <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsITaggingService#tagURI()">nsITaggingService.tagURI()</a></code> method tags a URL with the given set of tags. Current tags set for the URL persist, and tags which are already set for the given URL are ignored.</p>

<pre>taggingSvc.tagURI(uri("http://example.com/"), ["tag 1"]); //First argument = URI
                                                          //Second Argument = Array of tag(s)

where uri() is probably similar to <a class="external" href="http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#702" title="http://mxr.mozilla.org/mozilla-central/source/toolkit/content/contentAreaUtils.js#702">makeURI()</a>.
</pre>

<h3 id="Untagging_a_URI" name="Untagging_a_URI">Untagging a URI</h3>

<p><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsITaggingService#untagURI()">nsITaggingService.untagURI()</a></code> removes tags from a URL. From the given set of tags, a tag is ignored if it isn't set for the given URL.</p>

<pre>tagginSvc.untagURI(uri("http://example.com/"), ["tag 1"]); //First argument = URI
                                                           //Second Argument = Array of tag(s)
</pre>

<h3 id="Finding_all_URLs_with_a_given_tag" name="Finding_all_URLs_with_a_given_tag">Finding all URLs with a given tag</h3>

<p>The <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsITaggingService#getURIsForTag()">nsITaggingService.getURIsForTag()</a></code> method returns an array of all URLs tagged with the given tag.</p>

<pre>var tag1uris = taggingSvc.getURIsForTag("tag 1"); //"tag 1" = given tag
</pre>

<h3 id="Getting_all_tags_associated_with_a_URL" name="Getting_all_tags_associated_with_a_URL">Getting all tags associated with a URL</h3>

<p>The <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsITaggingService#getTagsForURI()">nsITaggingService.getTagsForURI()</a></code> method returns an array of all tags set for the given URL.</p>

<pre>var tags = taggingSvc.getTagsForURI(uri("http://example.com/", {})); 
  //tags = an array of tags stored in http://example.com/
</pre>

<h3 id="See_also" name="See_also">See also</h3>

<ul>
 <li><a href="/en/Places" title="en/Places">Places</a></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITaggingService" title="">nsITaggingService</a></code></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>.</p></div></body>
</html>
