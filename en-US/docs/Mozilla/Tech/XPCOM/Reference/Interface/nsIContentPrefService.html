<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIContentPrefService</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIContentPrefService</h1></div>
<div class="content"><p></p><div class="blockIndicator deprecated deprecatedHeader">
            <p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> Deprecated since Gecko 20.0 (Firefox 20.0 / Thunderbird 20.0 / SeaMonkey 2.17)</strong><br>This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#Browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p>
        </div><p></p>
<p>Use the asynchronous interface <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPrefService2" title="">nsIContentPrefService2</a></code> instead.</p>
<p>Provides a way for extensions and browser code to save preferences for specific websites. Preferences are saved as key/value pairs on a per-website basis.</p>
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/dom/interfaces/base/nsIContentPrefService.idl" rel="custom">dom/interfaces/base/nsIContentPrefService.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

<i>Please add a summary to this article.</i>
</span>

<div style="background: #eee; padding: 2px;">
<span> </span>
<span style="text-align: right; float: right;">Last changed in Gecko 2 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>
<p>Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></p>
<p>Implemented by: <code>@mozilla.org/content-pref/service;1</code>. To create an instance, use:</p>
<pre class="eval">var contentPrefService = Components.classes["@mozilla.org/content-pref/service;1"]
                         .getService(Components.interfaces.nsIContentPrefService);
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#addObserver()">addObserver</a>(in AString aName, in nsIContentPrefObserver aObserver);</code></td>
  </tr>
  <tr>
   <td><code>nsIVariant <a href="#getPref()">getPref</a>(in nsIVariant aGroup, in AString aName, [optional] in nsIContentPrefCallback aCallback);</code></td>
  </tr>
  <tr>
   <td><code>nsIPropertyBag2 <a href="#getPrefs()">getPrefs</a>(in nsIVariant aGroup);</code></td>
  </tr>
  <tr>
   <td><code>nsIPropertyBag2 <a href="#getPrefsByName()">getPrefsByName</a>(in AString aName);</code> </td>
  </tr>
  <tr>
   <td><code>boolean <a href="#hasPref()">hasPref</a>(in nsIVariant aGroup, in AString aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeGroupedPrefs()">removeGroupedPrefs</a>();</code> </td>
  </tr>
  <tr>
   <td><code>void <a href="#removeObserver()">removeObserver</a>(in AString aName, in nsIContentPrefObserver aObserver);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removePref()">removePref</a>(in nsIVariant aGroup, in AString aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removePrefsByName()">removePrefsByName</a>(in AString aName);</code> </td>
  </tr>
  <tr>
   <td><code>void <a href="#setPref()">setPref</a>(in nsIVariant aGroup, in AString aName, in nsIVariant aValue);</code></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>DBConnection</code></td>
   <td><code><a href="/en/mozIStorageConnection" title="en/mozIStorageConnection">mozIStorageConnection</a></code></td>
   <td>The database connection to the content preferences database. Useful for accessing and manipulating preferences in ways that are caller-specific or for which there is not yet a generic method, although generic functionality useful to multiple callers should generally be added to this unfrozen interface. Also useful for testing the database creation and migration code. <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>grouper</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentURIGrouper" title="">nsIContentURIGrouper</a></code></code></td>
   <td>The component that the service uses to determine the groups to which URIs belong. By default, this is the "hostname grouper," which groups URIs by full hostname (in otherwords, by site). <strong>Read only.</strong></td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="addObserver()" name="addObserver()">addObserver()</h3>
<p>Adds an observer that monitors a preference for changes.</p>
<pre class="eval">void addObserver(
  in AString aName,
  in nsIContentPrefObserver aObserver
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference to observe. You may specify <code>null</code> to add a generic observer that is notified of all preference changes.</dd>
 <dt>
  <code>aObserver</code></dt>
 <dd>
  The name of an object implementing <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPrefObserver" title="">nsIContentPrefObserver</a></code> that will receive notifications of changes to the preference's value.</dd>
</dl>
<h3 id="getPref()" name="getPref()">getPref()</h3>
<p>Returns the value of a preference saved for a particular site.</p>
<div class="note">
 <p><strong>Note:</strong> Prior to <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, the site could only be specified by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>. Now a string can be used as well.</p>
</div>
<pre class="eval">nsIVariant getPref(
  in nsIVariant aGroup,
  in AString aName,
  in nsIContentPrefCallback aCallback <span class="inlineIndicator optional optionalInline">Optional</span> 
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aGroup</code></dt>
 <dd>
  The group for which to retrieve a preference; this may be specified as either a URI or as a string; in either case, the group consists of all sites matching the hostname portion of the specified URI. Specify <code>null</code> to get the preference from the global preference space; those preferences apply to all sites.</dd>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference whose value is to be retrieved.</dd>
 <dt>
  <code>aCallback</code></dt>
 <dd>
  An optional <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPrefCallback" title="">nsIContentPrefCallback</a></code> to receive the result. If desired, JavaScript callers can instead provide a function to call upon completion.</dd>
</dl>
<h4 id="Return_value" name="Return_value">Return value</h4>
<p>The preference's value is returned; this value may be a string, integer, boolean, or any other value. The result may be null (<code>nsIDataType:VTYPE_EMPTY</code>) if the preference's value is either null, or undefined (<code>nsIDataType:VTYPE_VOID</code>) if there is no saved preference by the specified name.</p>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aGroup is not a string, <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>, or <code>null</code>. Or if aName is null or an empty string</dd>
</dl>
<h3 id="getPrefs()" name="getPrefs()">getPrefs()</h3>
<p>Get all preferences and their values for the specified URI.</p>
<div class="note">
 <p><strong>Note:</strong> Prior to <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, the site could only be specified by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>. Now a string can be used as well.</p>
</div>
<pre class="eval">nsIPropertyBag2 getPrefs(
  in nsIVariant aGroup
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aGroup</code></dt>
 <dd>
  The group whose preferences are to be retrieved; this may be specified as either a URI or as a string; in either case, the group consists of all sites matching the hostname portion of the specified URI. Specify <code>null</code> to get the preferences from the global preference space; those preferences apply to all sites.</dd>
</dl>
<h4 id="Return_value" name="Return_value">Return value</h4>
<p>The result is an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIPropertyBag2" title="">nsIPropertyBag2</a></code> containing the preferences and their values.</p>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aGroup is not a string, <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>, or <code>null</code>.</dd>
</dl>
<p></p><h3 id="getPrefsByName()">getPrefsByName()</h3><p></p>
<p>Returns the values of all preferences with the specified name.</p>
<pre class="eval">nsIPropertyBag2 getPrefsByName(
  in AString aName
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name for which all values are to be returned.</dd>
</dl>
<h4 id="Return_value" name="Return_value">Return value</h4>
<p>The result is an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIPropertyBag2" title="">nsIPropertyBag2</a></code> containing the preferences and their values.</p>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aName is <code>null</code> or an empty string.</dd>
</dl>
<h3 id="hasPref()" name="hasPref()">hasPref()</h3>
<p>Determines whether or not a preference exists.</p>
<div class="note">
 <p><strong>Note:</strong> Prior to <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, the site could only be specified by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>. Now a string can be used as well.</p>
</div>
<pre class="eval">boolean hasPref(
  in nsIVariant aGroup,
  in AString aName
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aGroup</code></dt>
 <dd>
  The group for which to see if a preference exists; this may be specified as either a URI or as a string. In either case, the group consists of all sites matching the hostname portion of the specified URI. Specify <code>null</code> to check for the preference in the global preference space; those preferences apply to all sites.</dd>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference whose existence is to be determined.</dd>
</dl>
<h4 id="Return_value" name="Return_value">Return value</h4>
<p><code>true</code> if the preference exists; otherwise <code>false</code>.</p>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aGroup is not a string, <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>, or <code>null</code>. Or if aName is null or an empty string</dd>
</dl>
<p></p><h3 id="removeGroupedPrefs()">removeGroupedPrefs()</h3><p></p>
<p>Remove all grouped prefs. Useful for removing references to the sites the user has visited when the user clears their private data.</p>
<pre class="eval">void removeGroupedPrefs();
</pre>
<h3 id="removeObserver()" name="removeObserver()">removeObserver()</h3>
<p>Removes an observer that's presently monitoring a preference for changes.</p>
<pre class="eval">void removeObserver(
  in AString aName,
  in nsIContentPrefObserver aObserver
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference to stop observing. You may specify <code>null</code> to remove a generic observer that is monitoring all preference changes.</dd>
 <dt>
  <code>aObserver</code></dt>
 <dd>
  The name of the observer that will cease receiving notifications of changes to the preference's value.</dd>
</dl>
<h3 id="removePref()" name="removePref()">removePref()</h3>
<p>Removes the specified preference.</p>
<div class="note">
 <p><strong>Note:</strong> Prior to <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, the site could only be specified by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>. Now a string can be used as well.</p>
</div>
<pre class="eval">void removePref(
  in nsIVariant aGroup,
  in AString aName
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aGroup</code></dt>
 <dd>
  The group for which to delete a preference; this may be specified as either a URI or as a string. In either case, the group consists of all sites matching the hostname portion of the specified URI. Specify <code>null</code> to delete the preference from the global preference space; those preferences apply to all sites.</dd>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference to remove.</dd>
</dl>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aGroup is not a string, <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>, or <code>null</code>. Or if aName is null or an empty string</dd>
</dl>
<p></p><h3 id="removePrefsByName()">removePrefsByName()</h3><p></p>
<p>Removes all preferences with the specified name.</p>
<pre class="eval">void removePrefsByName(
  in AString aName
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preferences to remove.</dd>
</dl>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aName is <code>null</code> or an empty string.</dd>
</dl>
<h3 id="setPref()" name="setPref()">setPref()</h3>
<p>Sets the value of a preference for a particular URI.</p>
<div class="note">
 <p><strong>Note:</strong> Prior to <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, the site could only be specified by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>. Now a string can be used as well.</p>
</div>
<pre class="eval">void setPref(
  in nsIVariant aGroup,
  in AString aName,
  in nsIVariant aValue
);
</pre>
<h4 id="Parameters" name="Parameters">Parameters</h4>
<dl>
 <dt>
  <code>aGroup</code></dt>
 <dd>
  The group for which to set a preference; this may be specified as either a URI or as a string; in either case, the group consists of all sites matching the hostname portion of the specified URI. Specify <code>null</code> to set the preference in the global preference space; those preferences apply to all sites.</dd>
 <dt>
  <code>aName</code></dt>
 <dd>
  The name of the preference whose value is to be set.</dd>
 <dt>
  <code>aValue</code></dt>
 <dd>
  The value to assign to the preference.</dd>
</dl>
<h4 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h4>
<dl>
 <dt>
  <code>NS_ERROR_ILLEGAL_VALUE</code></dt>
 <dd>
  If aGroup is not a string, <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code>, or <code>null</code>. Or if aName is null or an empty string</dd>
</dl>
<h2 id="See_also" name="See_also">See also</h2>
<ul>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPrefService2" title="">nsIContentPrefService2</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPrefObserver" title="">nsIContentPrefObserver</a></code></li>
 <li><a href="/en/Using_content_preferences" title="en/Using_content_preferences">Using content preferences</a></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/fscholz">fscholz</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/MykMelez">MykMelez</a>, <a href="https://developer.mozilla.org/en-US/profiles/Kohei">Kohei</a>.</p></div></body>
</html>
