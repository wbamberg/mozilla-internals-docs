<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIWindowMediator</title>
  </head>

  <body><div class="content-heading"><h1>nsIWindowMediator</h1></div>
<div class="content"><p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/xpfe/appshell/public/nsIWindowMediator.idl" rel="custom">xpfe/appshell/public/nsIWindowMediator.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

The window mediator is a Mozilla component that keeps track of open windows.
</span>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)</span></div>
</div><p></p>

<p>The two most common uses of <code>nsIWindowMediator</code> are, enumerating all windows of a given type and getting the most recent / any window of a given type.</p>

<p>Implemented by: <code>@mozilla.org/appshell/window-mediator;1</code> as a service:</p>

<pre class="eval">var windowMediator = Components.classes["@mozilla.org/appshell/window-mediator;1"]
                     .getService(Components.interfaces.nsIWindowMediator);
</pre>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#addListener()">addListener</a>(in nsIWindowMediatorListener aListener);</code></td>
  </tr>
  <tr>
   <td><code>boolean <a href="#calculateZPosition()">calculateZPosition</a>(in nsIXULWindow inWindow, in unsigned long inPosition, in nsIWidget inBelow, out unsigned long outPosition, out nsIWidget outBelow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>nsISimpleEnumerator <a href="#getEnumerator()">getEnumerator</a>(in wstring aWindowType);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMWindow <a href="#getMostRecentWindow()">getMostRecentWindow</a>(in wstring aWindowType);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMWindow <a href="#getOuterWindowWithId()">getOuterWindowWithId</a>(in unsigned long long aOuterWindowID); </code></td>
  </tr>
  <tr>
   <td><code>nsISimpleEnumerator <a href="#getXULWindowEnumerator()">getXULWindowEnumerator</a>(in wstring aWindowType);</code></td>
  </tr>
  <tr>
   <td><code>PRUint32 <a href="#getZLevel()">getZLevel</a>(in nsIXULWindow aWindow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>nsISimpleEnumerator <a href="#getZOrderDOMWindowEnumerator()">getZOrderDOMWindowEnumerator</a>(in wstring aWindowType, in boolean aFrontToBack);</code></td>
  </tr>
  <tr>
   <td><code>nsISimpleEnumerator <a href="#getZOrderXULWindowEnumerator()">getZOrderXULWindowEnumerator</a>(in wstring aWindowType, in boolean aFrontToBack);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#registerWindow()">registerWindow</a>(in nsIXULWindow aWindow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeListener()">removeListener</a>(in nsIWindowMediatorListener aListener);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setZLevel()">setZLevel</a>(in nsIXULWindow aWindow, in PRUint32 aZLevel);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#setZPosition()">setZPosition</a>(in nsIXULWindow inWindow, in unsigned long inPosition, in nsIXULWindow inBelow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#unregisterWindow()">unregisterWindow</a>(in nsIXULWindow aWindow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#updateWindowTimeStamp()">updateWindowTimeStamp</a>(in nsIXULWindow aWindow);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#updateWindowTitle()">updateWindowTitle</a>(in nsIXULWindow aWindow, in wstring inTitle );</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td>
  </tr>
 </tbody>
</table>

<h2 id="Constants" name="Constants">Constants</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>zLevelTop</code></td>
   <td><code>1</code></td>
   <td>Send window to top.</td>
  </tr>
  <tr>
   <td><code>zLevelBottom</code></td>
   <td><code>2</code></td>
   <td>Send window to bottom.</td>
  </tr>
  <tr>
   <td><code>zLevelBelow</code></td>
   <td><code>3</code></td>
   <td>Place window below some window.</td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="addListener()" name="addListener()">addListener()</h3>

<p>Register a listener for window status changes.</p>

<pre class="eval">void addListener(
  in nsIWindowMediatorListener aListener
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aListener</code></dt>
 <dd>The listener to register.</dd>
</dl>

<div class="note">
<p><strong>Example:</strong> Of window listener object and how to register then unregister. This example below waits for listens to when a window opens, and then after that window opens it adds event listener to listen to when the window completes loading, after that it fires a function. IMPORTANT: This will attach the functionality to future opened windows, so if you copy paste this code to scratchpad, then after running this script, you need to open a new window by pressing Ctrl + N and then in the new window, selecting tabs will fire the alert.</p>

<pre class="eval">var {Cc: classes, Ci: interfaces} = Components;

var windowListener = {
    onOpenWindow: function (aWindow) {
        // Wait for the window to finish loading
        let domWindow = aWindow.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindowInternal || Ci.nsIDOMWindow);
        domWindow.addEventListener("load", function () {
            domWindow.removeEventListener("load", arguments.callee, false); //this removes this load function from the window
            //window has now loaded now do stuff to it
            //as example this will add a function to listen to tab select and will fire alert in that window
            if (domWindow.gBrowser &amp;&amp; domWindow.gBrowser.tabContainer) {
                domWindow.gBrowser.tabContainer.addEventListener('TabSelect', function () {
                    domWindow.alert('tab was selected')
                }, false);
            }
        }, false);
    },
    onCloseWindow: function (aWindow) {},
    onWindowTitleChange: function (aWindow, aTitle) {}
};

//to register
Services.wm.addListener(windowListener);

//Services.wm.removeListener(windowListener); //once you want to remove this listener execute removeListener, currently its commented out so you can copy paste this code in scratchpad and see it work
</pre>
</div>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="calculateZPosition">calculateZPosition</h3></div><p></p>

<p>A window wants to be moved in z-order. Calculate whether and how it should be constrained. Note this method is advisory only: it changes nothing either in WindowMediator's internal state or with the window.</p>

<p></p><div class="blockIndicator note"><strong>Note:</strong>Â It compares the <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code> to <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWidgets" title="">nsIWidgets</a></code>. A pure interface would use all <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindows" title="">nsIXULWindows</a></code>. But we expect this to be called from callbacks originating in native window code. They are expected to hand us comparison values which are pulled from general storage in the native widget, and may not correspond to an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWidget" title="">nsIWidget</a></code> at all. For that reason this interface requires only objects one step removed from the native window (<code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWidgets" title="">nsIWidgets</a></code>), and its implementation must be very understanding of what may be completely invalid pointers in those parameters.</div><p></p>

<pre class="eval">boolean calculateZPosition(
  in nsIXULWindow inWindow,
  in unsigned long inPosition,
  in nsIWidget inBelow,
  out unsigned long outPosition,
  out nsIWidget outBelow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>inWindow</code></dt>
 <dd>The window in question.</dd>
 <dt><code>inPosition</code></dt>
 <dd>Requested position one of the zLevel constants. <code>zLevelTop</code> send the window to the top window, <code>zLevelBottom</code> to the bottom. If set to <code>zLevelBelow</code> the window will be placed below ioBelow. The value of inBelow will be ignored for <code>zLevelTop</code> and <code>zLevelBottom</code>.)</dd>
 <dt><code>inBelow</code></dt>
 <dd>If inPosition is set to <code>zLevelBelow</code>, the window below which inWindow wants to be placed. Otherwise this variable is ignored.</dd>
 <dt><code>outPosition</code></dt>
 <dd>Constrained position, values like inPosition.</dd>
 <dt><code>outBelow</code></dt>
 <dd>The window below which <code>inWindow</code> should be placed, if outPosition equals <code>zLevelBelow</code>. Otherwise this value will be <code>null</code>.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>PR_TRUE if the position returned is different from the position given.</p>

<h3 id="getEnumerator()" name="getEnumerator()">getEnumerator()</h3>

<p>Return an enumerator which iterates over all windows of type <code>aWindowType</code> from the oldest window to the youngest.</p>

<pre class="eval">nsISimpleEnumerator getEnumerator(
  in wstring aWindowType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindowType</code></dt>
 <dd>The returned enumerator will enumerate only windows of this type. ("type" is the |windowtype| attribute of the XML &lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code>&gt; element.) If <code>null</code>, all windows will be enumerated.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>An enumerator of <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title="">nsIDOMWindow</a></code>s.</p>

<h3 id="getMostRecentWindow()" name="getMostRecentWindow()">getMostRecentWindow()</h3>

<p>This is a shortcut for simply fetching the first window in front to back order.</p>

<pre class="eval">nsIDOMWindow getMostRecentWindow(
  in wstring aWindowType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindowType</code></dt>
 <dd>Return the topmost window of this type. ("type" is the |windowtype| attribute of the XML &lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code>&gt; element.) If <code>null</code>, return the topmost window of any type.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>The topmost window.</p>

<div class="note">
<p><strong>Note:</strong> Starting in <span title="(Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)">GeckoÂ 8.0</span>, the returned value is an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title="">nsIDOMWindow</a></code>; previously, it was an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindowInternal" title="">nsIDOMWindowInternal</a></code>. You may need to update your code or recompile binary components, if they use this method.</p>
</div>

<p></p><h3 id="getOuterWindowWithId()">getOuterWindowWithId()</h3><p></p>

<p>Return the outer window with the given ID, if any.</p>

<pre class="eval">nsIDOMWindow getOuterWindowWithId(
  in unsigned long long aOuterWindowID
);
</pre>

<h4 id="Parameters" name="Parameters">Parameters</h4>

<dl>
 <dt><code>aOuterWindowID</code></dt>
 <dd>The id of the outer window, e.g., as obtained by <code><a href="/en-US/docs/XPCOM_Interface_Reference/nsIDOMWindowUtils#outerWindowID" title="/en-US/docs/XPCOM_Interface_Reference/nsIDOMWindowUtils#outerWindowID">nsIDOMWindowUtils.outerWindowID</a></code>.</dd>
</dl>

<h4 id="Return_value" name="Return_value">Return value</h4>

<p>The DOM window with the given ID. If no window with the ID exists, or the window exists but it is an inner window, null is returned instead. See also: <a href="/en-US/docs/Inner_and_outer_windows" title="/en-US/docs/Inner_and_outer_windows">Inner and outer windows</a>.</p>

<div class="note">
<p><strong>Note:</strong> Before <span title="(Firefox 23.0 / Thunderbird 23.0 / SeaMonkey 2.20)">GeckoÂ 23.0</span>, use <code><a href="/en-US/docs/XPCOM_Interface_Reference/nsIDOMWindowUtils#getOuterWindowWithID" title="/en-US/docs/XPCOM_Interface_Reference/nsIDOMWindowUtils#outerWindowID">nsIDOMWindowUtils.getOuterWindowWithId</a></code>.</p>

<pre class="eval">windowMediator = Components.classes["@mozilla.org/appshell/window-mediator;1"]
    .getService(Components.interfaces.nsIWindowMediator);

if (!windowMediator.getOuterWindowWithId) {

  windowMediator.getOuterWindowWithId = function (aOuterWindowID) {

     let win = this.getMostRecentWindow();
     let winUtil = win.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
         .getInterface(Components.interfaces.nsIDOMWindowUtils);

     return winUtil.getOuterWindowWithId(aOuterWindowID);
  }

}
</pre>
</div>

<h3 id="getXULWindowEnumerator()" name="getXULWindowEnumerator()">getXULWindowEnumerator()</h3>

<p>Identical to <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#getEnumerator()">getEnumerator()</a></code> except it returns <code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code></code> instead of <code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title="">nsIDOMWindow</a></code></code>.</p>

<pre class="eval">nsISimpleEnumerator getXULWindowEnumerator(
  in wstring aWindowType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindowType</code></dt>
 <dd>The returned enumerator will enumerate only windows of this type; that is, the <code id="a-windowtype"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/windowtype">windowtype</a></code> attribute of the XUL <code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code> element. If <code>null</code>, all windows are enumerated.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>An enumerator of <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>s.</p>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="getZLevel">getZLevel</h3></div><p></p>

<p>Return the window's Z level (as defined in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>).</p>

<pre class="eval">PRUint32 getZLevel(
  in nsIXULWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window in question.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p><code>aWindow</code>'s z level.</p>

<h3 id="getZOrderDOMWindowEnumerator()" name="getZOrderDOMWindowEnumerator()">getZOrderDOMWindowEnumerator()</h3>

<p>Return an enumerator which iterates over all windows of type <code>aWindowType</code> in their z (front-to-back) order. Note this interface makes no requirement that a window couldn't be revisited if windows are re-ordered while z-order enumerators are active.</p>

<pre class="eval">nsISimpleEnumerator getZOrderDOMWindowEnumerator(
  in wstring aWindowType,
  in boolean aFrontToBack
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindowType</code></dt>
 <dd>The returned enumerator will enumerate only windows of this type. ("type" is the |windowtype| attribute of the XML &lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code>&gt; element.) If <code>null</code>, all windows will be enumerated.</dd>
 <dt><code>aFrontToBack</code></dt>
 <dd>If <code>true</code>, the enumerator enumerates windows in order from front to back. Back to front if <code>false</code>.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>An enumerator of <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title="">nsIDOMWindow</a></code>s.</p>

<div class="warning">
<p>This method may not work on Linux or Mac (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=462222">bug 462222</a>) nor on OS2 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=370134">bug 370134</a>) - please check those bugs before relying on it.Â  More information can be found by searching mxr for <code>BROKEN_WM_Z_ORDER</code>)</p>
</div>

<h3 id="getZOrderXULWindowEnumerator()" name="getZOrderXULWindowEnumerator()">getZOrderXULWindowEnumerator()</h3>

<p>Identical to <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#getZOrderDOMWindowEnumerator()">getZOrderDOMWindowEnumerator()</a></code> except returns an enumerator of <code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code></code>.</p>

<pre class="eval">nsISimpleEnumerator getZOrderXULWindowEnumerator(
  in wstring aWindowType,
  in boolean aFrontToBack
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindowType</code></dt>
 <dd>The returned enumerator will enumerate only windows of this type. ("type" is the |windowtype| attribute of the XML &lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code>&gt; element.) If <code>null</code>, all windows will be enumerated.</dd>
 <dt><code>aFrontToBack</code></dt>
 <dd>If <code>true</code>, the enumerator enumerates windows in order from front to back. Back to front if <code>false</code>.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>An enumerator of <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>s.</p>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="registerWindow">registerWindow</h3></div><p></p>

<p>Add the window to the list of known windows. Listeners (see <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#addListener()">addListener()</a></code>) will be notified through their onOpenWindow method.</p>

<pre class="eval">void registerWindow(
  in nsIXULWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window to add.</dd>
</dl>

<h3 id="removeListener()" name="removeListener()">removeListener()</h3>

<p>Unregister a listener of window status changes.</p>

<pre class="eval">void removeListener(
  in nsIWindowMediatorListener aListener
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aListener</code></dt>
 <dd>The listener to unregister.</dd>
</dl>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="setZLevel">setZLevel</h3></div><p></p>

<p>Set the window's Z level (as defined in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>). The implementation will reposition the window as necessary to match its new Z level. The implementation will assume a window's Z level to be <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>.normalZ until it has been informed of a different level.</p>

<pre class="eval">void setZLevel(
  in nsIXULWindow aWindow,
  in PRUint32 aZLevel
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window in question.</dd>
 <dt><code>aZLevel</code></dt>
 <dd>The window's new Z level.</dd>
</dl>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="setZPosition">setZPosition</h3></div><p></p>

<p>A window has been positioned behind another. Inform WindowMediator.</p>

<pre class="eval">void setZPosition(
  in nsIXULWindow inWindow,
  in unsigned long inPosition,
  in nsIXULWindow inBelow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>inWindow</code></dt>
 <dd>The window in question.</dd>
 <dt><code>inPosition</code></dt>
 <dd>Requested position one of the zLevel constants. <code>zLevelTop</code> send the window to the top window, <code>zLevelBottom</code> to the bottom. If set to <code>zLevelBelow</code> the window will be placed below ioBelow. The value of inBelow will be ignored for <code>zLevelTop</code> and <code>zLevelBottom</code>.)</dd>
 <dt><code>inBelow</code></dt>
 <dd>The window inWindow is behind, if <code>zLevelBelow</code>.</dd>
</dl>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="unregisterWindow">unregisterWindow</h3></div><p></p>

<p>Remove the window from the list of known windows. Listeners (see <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#addListener()">addListener()</a></code>) will be be notified through their onCloseWindow method.</p>

<pre class="eval">void unregisterWindow(
  in nsIXULWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window to remove.</dd>
</dl>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="updateWindowTimeStamp">updateWindowTimeStamp</h3></div><p></p>

<p>Call this method when a window gains focus. It's a primitive means of determining the most recent window. It's no longer necessary and it really should be removed.</p>

<pre class="eval">void updateWindowTimeStamp(
  in nsIXULWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window which has gained focus.</dd>
</dl>

<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="updateWindowTitle">updateWindowTitle</h3></div><p></p>

<p>Call this method when a window's title changes. Listeners (see <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#addListener()">addListener()</a></code>) will be notified through their onWindowTitleChange method.</p>

<pre class="eval">void updateWindowTitle(
  in nsIXULWindow aWindow,
  in wstring inTitle 
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window whose title has changed.</dd>
 <dt><code>inTitle</code></dt>
 <dd>The window's new title.</dd>
</dl>

<h2 id="Examples" name="Examples">Examples</h2>

<p>In the examples below, <code>type</code> specifies the type of windows you want to search. You can specify the type of your window by putting a <code><code id="a-windowtype"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/windowtype">windowtype</a></code></code> attribute on the top-level element, like <code>&lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code>&gt;</code> or <code>&lt;<code><a href="/en-US/docs/Mozilla/Tech/XUL/dialog" title="dialog">dialog</a></code>&gt;</code>.</p>

<p>Browser windows have a window type of <code>navigator:browser</code>. To search all windows, regardless of their type, pass an empty string, <code>""</code>.</p>

<h3 id="Getting_most_recent_window" name="Getting_most_recent_window">Getting most recent window</h3>

<p>The following code is useful when you need any of the windows of given type, or to check if a window of a particular type (for example your extension's Options dialog) is already open.</p>

<p><code>getMostRecentWindow</code> returns a <code>ChromeWindow</code> object, or <code>null</code>, if there are no windows of a given type open.</p>

<pre class="brush: js">var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"]
                   .getService(Components.interfaces.nsIWindowMediator);
var win = wm.getMostRecentWindow(type);
</pre>

<h3 id="Changing_an_nsIDOMWindow_to_an_nsIXULWindow">Changing an nsIDOMWindow to an nsIXULWindow</h3>

<p>If you need an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>, you should use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#getXULWindowEnumerator()">getXULWindowEnumerator()</a></code>. However, if you are looking for the <em>most recent</em> <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code>, it can be helpful to get the corresponding <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title="">nsIXULWindow</a></code> from the <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title="">nsIDOMWindow</a></code> returned by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWindowMediator#getMostRecentWindow()">getMostRecentWindow()</a></code>.</p>

<pre class="brush: js">win.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
      .getInterface(Components.interfaces.nsIWebNavigation)
      .QueryInterface(Components.interfaces.nsIDocShellTreeItem).treeOwner
      .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
      .getInterface(Components.interfaces.nsIXULWindow) 
</pre>

<h3 id="Enumerating_windows" name="Enumerating_windows">Enumerating windows</h3>

<p>The following code can be used if you need to do something for each open window of a particular type. For example, you could use it in the "OK" handler of your Options dialog to apply the new settings to each open browser window.</p>

<pre class="brush: js">var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"]
                   .getService(Components.interfaces.nsIWindowMediator);
var enumerator = wm.getEnumerator(type);
while(enumerator.hasMoreElements()) {
  var win = enumerator.getNext();
  // <code>win</code> is [Object ChromeWindow] (just like <code>window</code>), do something with it
}
</pre>

<p>This code iterates over all windows of the specified type, where <var>type</var> you specify is the window type. If, for example, you wish to enumerate all browser windows, you would specify "navigator:browser". If you want to enumerate all windows regardless of type, specify <code>null</code>.</p>

<div class="note"><strong>Note:</strong> In <code>nsIWindowMediator</code>'s reference page the return type of <code>getMostRecentWindow</code> and the type of enumerator's elements is said to be <code>nsIDOMWindow</code>/<code>nsIDOMWindowInternal</code>. In fact, those methods usually (always?) return a <code>ChromeWindow</code> object, implementing both of those interfaces and a few others, when called from JavaScript code. The global <code>window</code> object you're probably familiar with is of <code>ChromeWindow</code> type.</div>

<h2 id="See_also" name="See_also">See also</h2>

<ul>
 <li><a href="/en/Working_with_windows_in_chrome_code" title="en/Working_with_windows_in_chrome_code">Working with windows in chrome code</a></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Noitidart">Noitidart</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/the_felis_leo">the_felis_leo</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sevenspade">Sevenspade</a>, <a href="https://developer.mozilla.org/en-US/profiles/Markh">Markh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wladimir_Palant">Wladimir_Palant</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/DRice">DRice</a>, <a href="https://developer.mozilla.org/en-US/profiles/Smi">Smi</a>, <a href="https://developer.mozilla.org/en-US/profiles/PWeilbacher">PWeilbacher</a>, <a href="https://developer.mozilla.org/en-US/profiles/Tsahi">Tsahi</a>, <a href="https://developer.mozilla.org/en-US/profiles/Shoot">Shoot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Bmjaanes">Bmjaanes</a>, <a href="https://developer.mozilla.org/en-US/profiles/LouCypher">LouCypher</a>, <a href="https://developer.mozilla.org/en-US/profiles/Nickolay">Nickolay</a>, <a href="https://developer.mozilla.org/en-US/profiles/Np">Np</a>.</p></div></body>
</html>
