<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>mozIColorAnalyzer</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>mozIColorAnalyzer</h1></div>
<div class="content"><div>
  <div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/mozIColorAnalyzer.idl" rel="custom">toolkit/components/places/mozIColorAnalyzer.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Provides methods to analyze colors in an image
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>
  
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>
  
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 30%;"></div>
  
<div style="height: 8px; top: 16px; left: 30%; background: #00dd00; position: absolute; width: 70%;" title="Introduced in Gecko 17.0 (Firefox 17.0 / Thunderbird 17.0 / SeaMonkey 2.14)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 30%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 30%;">Gecko 17.0</div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 17.0 (Firefox 17.0 / Thunderbird 17.0 / SeaMonkey 2.14)</span></div>
</div></div>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
  <tbody>
    <tr>
      <td><code>void <a href="#findRepresentativeColor()" title="#findRepresentativeColor()">findRepresentativeColor</a>(in nsIURI imageURI, in mozIRepresentativeColorCallback callback);</code></td>
    </tr>
  </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<p></p><h3 id="findRepresentativeColor()">findRepresentativeColor()</h3><p></p>
<p>Given an image URI, find the most representative color for that image based on the frequency of each color. Preference is given to colors that are more interesting. It avoids the background color if it can be discerned and ignores sufficiently transparent colors.</p>
<p>This is intended to be used on favicon images. Larger images take longer to process, especially those with a larger number of unique colors. If imageURI points to an image that has more than 128^2 pixels, this method will fail for performance reasons before analyzing it.</p>
<pre class="eval">void findRepresentativeColor(
  in nsIURI imageURI,
  in mozIRepresentativeColorCallback callback
);</pre>
<h3 id="Parameters" name="Parameters">Parameters</h3>
<dl>
  <dt>
    <code>imageURI</code></dt>
  <dd>
    A URI pointing to the image - ideally a data: URI, but any scheme that will load when setting the src attribute of a DOM img element should work.</dd>
  <dt>
    <code>callback</code></dt>
  <dd>
    Function to call when the representative color is found or an error occurs.</dd>
</dl>
<h2 id="Remarks" name="Remarks">Remarks</h2>
<p>Below are some images with the result of findRepresentativeColor:</p>
<table>
  <thead>
    <tr>
      <th scope="col">Image</th>
      <th colspan="2" scope="col">Representative color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center;"><img alt="" src="https://hg.mozilla.org/mozilla-central/raw-file/62cc5a20b2f1/toolkit/components/places/tests/browser/colorAnalyzer/category-discover.png" style="width: 32px; height: 32px;"></td>
      <td style="background-color: #B28D3A;"> </td>
      <td>0xB28D3A</td>
    </tr>
    <tr>
      <td style="text-align: center;"><img alt="" src="https://hg.mozilla.org/mozilla-central/raw-file/62cc5a20b2f1/toolkit/components/places/tests/browser/colorAnalyzer/dictionaryGeneric-16.png" style="width: 16px; height: 16px;"></td>
      <td style="background-color: #502E1E;"> </td>
      <td>0x502E1E</td>
    </tr>
    <tr>
      <td style="text-align: center;"><img alt="" src="https://hg.mozilla.org/mozilla-central/raw-file/62cc5a20b2f1/toolkit/components/places/tests/browser/colorAnalyzer/extensionGeneric-16.png" style="width: 16px; height: 16px;"></td>
      <td style="background-color: #53BA3F;"> </td>
      <td>0x53BA3F</td>
    </tr>
    <tr>
      <td style="text-align: center;"><img alt="" src="https://hg.mozilla.org/mozilla-central/raw-file/62cc5a20b2f1/toolkit/components/places/tests/browser/colorAnalyzer/localeGeneric.png" style="width: 32px; height: 32px;"></td>
      <td style="background-color: #00A400;"> </td>
      <td>0x00A400</td>
    </tr>
  </tbody>
</table>
<h2 id="See_also" name="See_also">See also</h2>
<ul>
  <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/mozIRepresentativeColorCallback" title="">mozIRepresentativeColorCallback</a></code></li>
  <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=634139" title="FIXED: Need the ability to extract the most representative color from a favicon">bug 634139</a></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/ethertank">ethertank</a>, <a href="https://developer.mozilla.org/en-US/profiles/mnoorenberghe">mnoorenberghe</a>.</p></div></body>
</html>
