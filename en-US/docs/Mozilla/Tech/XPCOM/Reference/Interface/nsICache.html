<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsICache</title>
  </head>

  <body><div class="content-heading"><h1>nsICache</h1></div>
<div class="content"><p>The <code>nsICache</code> is a namespace for various cache constants. It does not represent an actual object.</p>
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/cache/public/nsICache.idl" rel="custom">netwerk/cache/public/nsICache.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

<i>Please add a summary to this article.</i>
</span>

<div style="background: #eee; padding: 2px;">
<span> </span>
<span style="text-align: right; float: right;">Last changed in Gecko 1.9 (Firefox 3)</span></div>
</div><p></p>
<p>Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></p>
<h2 id="Constants" name="Constants">Constants</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Constant</td> <td class="header">Value</td> <td class="header">Description</td> </tr> <tr> <td><code>ACCESS_NONE</code></td> <td>0</td> <td>ACCESS GRANTED - No descriptor is provided.</td> </tr> <tr> <td><code>ACCESS_READ</code></td> <td>1</td> <td>ACCESS REQUESTED - I only want to <code>READ</code>, if there isn't an entry just fail. <p>ACCESS GRANTED - You can <code>READ</code> from this descriptor.</p> </td> </tr> <tr> <td><code>ACCESS_WRITE</code></td> <td>2</td> <td>ACCESS REQUESTED - I have something new I want to <code>WRITE</code> into the cache, make me a new entry and doom the old one, if any. <p>ACCESS GRANTED - You must <code>WRITE</code> to this descriptor because the cache entry was just created for you.</p> </td> </tr> <tr> <td><code>ACCESS_READ_WRITE</code></td> <td>3</td> <td>ACCESS REQUESTED - I want to <code>READ</code>, but I'm willing to update an existing entry if necessary, or create a new one if none exists. <p>ACCESS GRANTED - You can <code>READ</code> the descriptor to determine if it's valid, you may <code>WRITE</code> if it needs updating.</p> </td> </tr> <tr> <td><code>STORE_ANYWHERE</code></td> <td>0</td> <td>The storage policy of a cache entry determines the device(s) to which it belongs. See <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession" title="">nsICacheSession</a></code> and <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryDescriptor" title="">nsICacheEntryDescriptor</a></code> for more details. <p>Allows the cache entry to be stored in any device. The cache service decides which cache device to use based on "some resource management calculation."</p> </td> </tr> <tr> <td><code>STORE_IN_MEMORY</code></td> <td>1</td> <td>The storage policy of a cache entry determines the device(s) to which it belongs. See <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession" title="">nsICacheSession</a></code> and <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryDescriptor" title="">nsICacheEntryDescriptor</a></code> for more details. <p>Requires the cache entry to reside in non-persistent storage. That is typically in system RAM.</p> </td> </tr> <tr> <td><code>STORE_ON_DISK</code></td> <td>2</td> <td>The storage policy of a cache entry determines the device(s) to which it belongs. See <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession" title="">nsICacheSession</a></code> and <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryDescriptor" title="">nsICacheEntryDescriptor</a></code> for more details. <p>Requires the cache entry to reside in persistent storage. That is typically on a system's hard disk.</p> </td> </tr> <tr> <td><code>STORE_ON_DISK_AS_FILE</code></td> <td>3</td> <td>The storage policy of a cache entry determines the device(s) to which it belongs. See <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession" title="">nsICacheSession</a></code> and <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryDescriptor" title="">nsICacheEntryDescriptor</a></code> for more details. <p>Requires the cache entry to reside in persistent storage, and in a separate file.</p> </td> </tr> <tr> <td><code>STORE_OFFLINE</code></td> <td>4</td> <td>The storage policy of a cache entry determines the device(s) to which it belongs. See <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession" title="">nsICacheSession</a></code> and <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryDescriptor" title="">nsICacheEntryDescriptor</a></code> for more details. <p>Requires the cache entry to reside in persistent, reliable storage for offline use.</p> </td> </tr> <tr> <td><code>NOT_STREAM_BASED</code></td> <td>0</td> <td>All entries for a cache session are stored as streams of data or as objects. This constant specify that cache session is not a stream based entry when calling <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICacheService#createSession()">nsICacheService.createSession()</a></code> method.</td> </tr> <tr> <td><code>STREAM_BASED</code></td> <td>1</td> <td>All entries for a cache session are stored as streams of data or as objects. This constant specify that cache session is a stream based entry when calling <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICacheService#createSession()">nsICacheService.createSession()</a></code> method.</td> </tr> <tr> <td><code>NON_BLOCKING</code></td> <td>0</td> <td>The synchronous <code>OpenCacheEntry()</code> may be blocking or non-blocking. If a cache entry is waiting to be validated by another cache descriptor (so no new cache descriptors for that key can be created), <code>OpenCacheEntry()</code> will return <code>NS_ERROR_CACHE_WAIT_FOR_VALIDATION</code> in non-blocking mode. If the cache entry is validated, then a descriptor for that entry will be created and returned. If the cache entry was doomed, then a descriptor will be created for a new cache entry for the key.</td> </tr> <tr> <td><code>BLOCKING</code></td> <td>1</td> <td>The synchronous <code>OpenCacheEntry()</code> may be blocking or non-blocking. In blocking mode, it will wait until the cache entry for the key has been validated or doomed. If the cache entry is validated, then a descriptor for that entry will be created and returned. If the cache entry was doomed, then a descriptor will be created for a new cache entry for the key.</td> </tr> </tbody>
</table>
<p></p><div class="blockIndicator note"><strong>Note:</strong> If you think that you might need to modify cached data or meta data, then you must open a cache entry requesting <code>WRITE</code> access. Only one cache entry descriptor, per cache entry, will be granted <code>WRITE</code> access.</div><p></p>
<p>Usually, you will request <code>READ_WRITE</code> access in order to first test the meta data and informational fields to determine if a write, that is going to the net, may actually be necessary. If you determine that it is not, then you would mark the cache entry as valid (using MarkValid) and then simply read the data from the cache.</p>
<p>A descriptor granted <code>WRITE</code> access has exclusive access to the cache entry up to the point at which it marks it as valid. Once the cache entry has been "validated", other descriptors with <code>READ</code> access may be opened to the cache entry.</p>
<p>If you make a request for <code>READ_WRITE</code> access to a cache entry, the cache service will downgrade your access to <code>READ</code> if there is already a cache entry descriptor open with <code>WRITE</code> access.</p>
<p>If you make a request for only <code>WRITE</code> access to a cache entry and another descriptor with <code>WRITE</code> access is currently open, then the existing cache entry will be 'doomed', and you will be given a descriptor (with <code>WRITE</code> access only) to a new cache entry.</p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/didizingo">didizingo</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Arehman4">Arehman4</a>.</p></div></body>
</html>
