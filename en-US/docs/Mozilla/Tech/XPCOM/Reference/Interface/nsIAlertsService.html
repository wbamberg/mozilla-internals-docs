<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIAlertsService</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIAlertsService</h1></div>
<div class="content"><p>
</p>
<div style="border: solid #ddd 2px; margin-bottom: 12px;">
 <div style="background: #eee; padding: 2px;">
  <code>
   <a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/alerts/nsIAlertsService.idl" rel="custom">
    toolkit/components/alerts/nsIAlertsService.idl
   </a>
  </code>
  <span style="text-align: right; float: right;">
   <a href="https://developer.mozilla.org/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">
    Scriptable
   </a>
  </span>
 </div>
 <span style="padding: 4px 2px;">
  This interface can be used to notify the user of something that does not require an immediate reaction. For example, it can be used to notify the user that their downloads are complete or that they have new mail.
 </span>
 <div style="height: 42px; position: relative; padding: 2px; width: auto;">
  <div style="top: 22px; font-size: 11px; position: absolute;">
   1.0
  </div>
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">
   66
  </div>
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 2.857142857142857%;">
  </div>
  <div style="height: 8px; top: 16px; left: 2.857142857142857%; background: #00dd00; position: absolute; width: 97.14285714285714%;" title="Introduced in Gecko 1.7 ">
  </div>
  <div style="top: 0px; font-size: 11px; position: absolute; left: 2.857142857142857%;">
   Introduced
  </div>
  <div style="top: 22px; font-size: 11px; position: absolute; left: 2.857142857142857%;">
   Gecko 1.7
  </div>
  <div style="height: 8px; top: 16px; left: 36.642857142857146%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 22 (Firefox 22 / Thunderbird 22 / SeaMonkey 2.19)">
  </div>
 </div>
 <div style="background: #eee; padding: 2px;">
  Inherits from:
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">
    nsISupports
   </a>
  </code>
  <span style="text-align: right; float: right;">
   Last changed in Gecko 22 (Firefox 22 / Thunderbird 22 / SeaMonkey 2.19)
  </span>
 </div>
</div>
<p>
</p>
<p>
 <img alt="A notification displayed by the alerts service" class="internal" src="/@api/deki/files/31/=AlertsServiceNotification.png" style="float: right;">
  By default a message is displayed in a small window that slides up from the bottom of the screen, holds there for a few seconds, then slides down. The specific appearance varies from platform to platform.
 </img>
</p>
<p>
</p>
<div class="blockIndicator note">
 <strong>
  Note:
 </strong>
 Prior Firefox 22, the alerts service was only supported on Windows in
 <span title="">
  Gecko 1.7
 </span>
 , had no effect on Mac OS X in
 <span title="(Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)">
  Gecko 1.8
 </span>
 , but was fully supported in Mac OS X in
 <span title="(Firefox 3)">
  Gecko 1.9
 </span>
 .
</div>
<p>
</p>
<p>
</p>
<div class="blockIndicator note">
 <strong>
  Note:
 </strong>
 Since
 <span title="(Firefox 22 / Thunderbird 22 / SeaMonkey 2.19)">
  Gecko 22
 </span>
 , the notifications are provided by Firefox and have become platform-independent.
</div>
<p>
</p>
<p>
 Implemented by:
 <code>
  @mozilla.org/alerts-service;1
 </code>
 as a service:
</p>
<pre class="eval">var alertsService = Components.classes["@mozilla.org/alerts-service;1"]
                    .getService(Components.interfaces.nsIAlertsService);
</pre>
<h2 id="Method_overview" name="Method_overview">
 Method overview
</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td>
    <code>
     void
     <a href="#showAlertNotification()">
      showAlertNotification
     </a>
     (in AString imageUrl, in AString title, in AString text, [optional] in boolean textClickable, [optional] in AString cookie, [optional] in nsIObserver alertListener, [optional] in AString name, [optional] in AString dir, [optional] in AString lang, [optional] in AString data, [optional] in nsIPrincipal principal,[optional] in boolean inPrivateBrowsing);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#closeAlert()">
      closeAlert
     </a>
     ([optional] in AString name, [optional] in nsIPrincipal principal);
    </code>
   </td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">
 Methods
</h2>
<h3 id="showAlertNotification()" name="showAlertNotification()">
 showAlertNotification()
</h3>
<p>
 Displays a notification window.
</p>
<p>
</p>
<div class="blockIndicator note">
 <strong>
  Note:
 </strong>
 If you are calling this function from JavaScript, you should wrap it in a try/catch because it can fail on Mac OS X prior to Firefox 22.
</div>
<p>
</p>
<pre class="eval">void showAlertNotification(
  in AString imageUrl,
  in AString title,
  in AString text,
  in boolean textClickable, <span class="inlineIndicator optional optionalInline">Optional</span>
  in AString cookie, <span class="inlineIndicator optional optionalInline">Optional</span>
  in nsIObserver alertListener, <span class="inlineIndicator optional optionalInline">Optional</span>
  in AString name, <span class="inlineIndicator optional optionalInline">Optional</span> 
  in AString dir, <span class="inlineIndicator optional optionalInline">Optional</span> 
  in AString lang, <span class="inlineIndicator optional optionalInline">Optional</span> 
  in AString data, <span class="inlineIndicator optional optionalInline">Optional</span> 
  in nsIPrincipal principal, <span class="inlineIndicator optional optionalInline">Optional</span> 
  in boolean inPrivateBrowsing, <span class="inlineIndicator optional optionalInline">Optional</span> 
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   imageUrl
  </code>
 </dt>
 <dd>
  A URL identifying the image to display in the notification alert.
 </dd>
 <dt>
  <code>
   title
  </code>
 </dt>
 <dd>
  The title for the alert.
 </dd>
 <dt>
  <code>
   text
  </code>
 </dt>
 <dd>
  The text to display in the alert, explaining the alert condition. The text must not be too long, otherwise it might be truncated to a platform-specific length. If the text is too long, try to use line returns in the text to have it split and displayed over multiple lines.
 </dd>
 <dt>
  <code>
   textClickable
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  If
  <code>
   true
  </code>
  , if the user clicks on it, the listener is notified; when hovered the notification background becomes lighter and the cursor turns to a pointer. Prior to Gecko 32 the
  <br>
   text was made to look like a link.
  </br>
 </dd>
 <dt>
  <code>
   cookie
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  A blind cookie the alert passes back to the consumer during alert listener callbacks.
 </dd>
 <dt>
  <code>
   alertListener
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  An object to receive callbacks from the alert; may be null if you don't care about callbacks. It must implement an
  <code>
   observe()
  </code>
  method that accepts three parameters:
  <ul>
   <li>
    <code>
     <strong>
      subject
     </strong>
    </code>
    : always null.
   </li>
   <li>
    <code>
     <strong>
      topic
     </strong>
    </code>
    : "alertfinished" when the alert disappears, "alertclickcallback" if the user clicks the text or "alertshow" (since Gecko 22) when the alert is shown.
   </li>
   <li>
    <code>
     <strong>
      data
     </strong>
    </code>
    : The value of the
    <code>
     cookie
    </code>
    parameter passed into the
    <code>
     showAlertNotification
    </code>
    method.
   </li>
  </ul>
 </dd>
 <dt>
  <code>
   name
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  A name for the notification; this is not displayed in the alert. However, certain notification systems (such as Growl on Mac OS X) allow the user to disable alerts by name. This name is used in that configuration panel. On Android the name is hashed and used as a notification ID.
 </dd>
 <dt>
  <code>
   dir
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  Bidi override for the title. Valid values are "auto", "ltr" or "rtl". Only available on supported platforms.
 </dd>
 <dt>
  <code>
   lang
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  Language of title and text of the alert. Only available on supported platforms.
 </dd>
 <dt>
  <code>
   data
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  The value of the cookie parameter passed to showAlertNotification.
 </dd>
 <dt>
  <code>
   principal
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  The principal of the page that created the alert. Used for IPC security checks, and to determine whether the alert is actionable.
 </dd>
 <dt>
  <code>
   inPrivateBrowsing
  </code>
  <span class="inlineIndicator optional optionalInline">
   Optional
  </span>
 </dt>
 <dd>
  Controls the image loading behavior. If true, the image URL will be loaded in private browsing mode.
 </dd>
</dl>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">
 Exceptions thrown
</h6>
<dl>
 <dt>
  <code>
   NS_ERROR_NOT_AVAILABLE
  </code>
 </dt>
 <dd>
  Unable to display the notification; this may happen, for example, on Mac OS X if Growl is not installed.
 </dd>
</dl>
<h3 id="Example" name="Example">
 Example
</h3>
<h4 id="Simple_usage" name="Simple_usage">
 Simple usage
</h4>
<p>
 The following code was used to display the above notification.
</p>
<pre class="brush: js">var alertsService = Components.classes["@mozilla.org/alerts-service;1"].
                      getService(Components.interfaces.nsIAlertsService);
try {
  alertsService.showAlertNotification("<a class="external" rel="freelink">chrome://mozapps/skin/downloads/downloadIcon.png</a>", 
                                      "Alert title", "Alert text goes here.", 
                                      false, "", null, "");
} catch (e) {
  // This can fail on Mac OS X
}
</pre>
<h4 id="Listening_for_callbacks" name="Listening_for_callbacks">
 Listening for callbacks
</h4>
<p>
 You can be notified when the notification window disappears or the user clicks on the message by passing an object implementing
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIObserver" title="">
   nsIObserver
  </a>
 </code>
 as the
 <code>
  alertListener
 </code>
 parameter:
</p>
<pre class="brush: js">var listener = {
  observe: function(subject, topic, data) {
    alert("subject=" + subject + ", topic=" + topic + ", data=" + data);
  }
}
var alertsService = Components.classes["@mozilla.org/alerts-service;1"].
                              getService(Components.interfaces.nsIAlertsService);
try {
  alertsService.showAlertNotification("",  "Alerts service test", "Click me", 
                                      true, "cookie", listener, "");
} catch (e) {
  // This can fail on Mac OS X
}
</pre>
<h2 id="See_also" name="See_also">
 Example 2
</h2>
<p>
 This example shows how to use all the available observer topics:
</p>
<pre class="brush: js">var as = Cc['@mozilla.org/alerts-service;1'].getService(Ci.nsIAlertsService);

var notifListener = {
    observe: function(aSubject, aTopic, aData) {
        console.error('incoming notification observer:', aSubject, aTopic, aData);
        if (aTopic == 'alertclickcallback')    {
            console.error('user clicked trying to throw click');
            Services.prompt.alert(Services.wm.getMostRecentWindow('navigator:firefox'), 'focus firefox', 'will now focus fireox and then focus the tab');
        } else if (aTopic == 'alertshow') {
            console.log('just showed notification');
        } else if (aTopic == 'alertfinished') {
            console.log('just alertfinished')
        }
    }
};

as.showAlertNotification('chrome://branding/content/icon64.png', 'StackOverflow - New Messages', 'There are ## new messages. Click here to focus the tab', true, null, notifListener, 'StackOverflow Notifier');</pre>
<h3 id="closeAlert()" name="closeAlert()">
 closeAlert()
</h3>
<p>
 Closes alerts created by the service.
</p>
<pre class="eval">void closeAlert(
  in AString name, <span class="inlineIndicator optional optionalInline">Optional</span>
  in nsIPrincipal principal <span class="inlineIndicator optional optionalInline">Optional</span>
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   name
  </code>
 </dt>
 <dd>
  The name of the notification to close. If no name is provided then only a notification created with no name (if any) will be closed.
 </dd>
 <dt>
  <code>
   principal
  </code>
 </dt>
 <dd>
  The title for the alert.
 </dd>
</dl>
<h2 id="See_also" name="See_also">
</h2>
<h2 id="See_also" name="See_also">
 See also
</h2>
<ul>
 <li>
  <a href="https://developer.mozilla.org/en-US/docs/Archive/Add-ons/Code_snippets/Alerts_and_Notifications" title="en/Code snippets/Alerts and Notifications">
   Alerts and Notifications
  </a>
 </li>
 <li>
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=782211">
   Bug 782211 - Implement notification API spec
  </a>
 </li>
 <li>
  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/Preference_reference/ui.alertNotificationOrigin">
   ui.alertNotificationOrigin [en-US]
  </a>
 </li>
 <li>
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1270819">
   Bug 1270819 - nsIAlertsService showAlertNotification sliding alert unnecessarily big / high
  </a>
 </li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Makyen">Makyen</a>, <a href="https://developer.mozilla.org/en-US/profiles/RealRaven2000">RealRaven2000</a>, <a href="https://developer.mozilla.org/en-US/profiles/Noitidart">Noitidart</a>, <a href="https://developer.mozilla.org/en-US/profiles/Markus%20Prokott">Markus Prokott</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Rob%20W">Rob W</a>, <a href="https://developer.mozilla.org/en-US/profiles/mkato">mkato</a>, <a href="https://developer.mozilla.org/en-US/profiles/MKaply">MKaply</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wladimir_Palant">Wladimir_Palant</a>, <a href="https://developer.mozilla.org/en-US/profiles/madarche">madarche</a>, <a href="https://developer.mozilla.org/en-US/profiles/Ctd1500">Ctd1500</a>, <a href="https://developer.mozilla.org/en-US/profiles/Kris.shannon">Kris.shannon</a>, <a href="https://developer.mozilla.org/en-US/profiles/Nickolay">Nickolay</a>, <a href="https://developer.mozilla.org/en-US/profiles/Nc15">Nc15</a>, <a href="https://developer.mozilla.org/en-US/profiles/sdwilsh">sdwilsh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Ted_Mielczarek">Ted_Mielczarek</a>, <a href="https://developer.mozilla.org/en-US/profiles/Jminta">Jminta</a>.</p></div></body>
</html>
