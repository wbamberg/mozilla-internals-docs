<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIScriptableUnescapeHTML</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIScriptableUnescapeHTML</h1></div>
<div class="content"><p>
</p>
<div style="border: solid #ddd 2px; margin-bottom: 12px;">
 <div style="background: #eee; padding: 2px;">
  <code>
   <a href="https://dxr.mozilla.org/mozilla-central/source/parser/html/nsIScriptableUnescapeHTML.idl" rel="custom">
    parser/html/nsIScriptableUnescapeHTML.idl
   </a>
  </code>
  <span style="text-align: right; float: right;">
   <a href="https://developer.mozilla.org/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">
    Scriptable
   </a>
  </span>
 </div>
 <span style="padding: 4px 2px;">
  This interface is a utility interface that exposes the kind of markup parser behavior that the feed service needs.
 </span>
 <div style="height: 42px; position: relative; padding: 2px; width: auto;">
  <div style="top: 22px; font-size: 11px; position: absolute;">
   1.0
  </div>
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">
   66
  </div>
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 5.714285714285714%;">
  </div>
  <div style="height: 8px; top: 16px; left: 5.714285714285714%; background: #00dd00; position: absolute; width: 19.999999999999996%;" title="Introduced in Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)">
  </div>
  <div style="top: 0px; font-size: 11px; position: absolute; left: 5.714285714285714%;">
   Introduced
  </div>
  <div style="top: 22px; font-size: 11px; position: absolute; left: 5.714285714285714%;">
   Gecko 1.8
  </div>
  <div style="height: 8px; top: 16px; left: 25.71428571428571%; background: #000000; position: absolute; width: 74.28571428571429%;" title="Obsolete in Gecko 14.0 (Firefox 14.0 / Thunderbird 14.0 / SeaMonkey 2.11)">
  </div>
  <div style="top: 0px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 25.71428571428571%;">
   Obsolete
  </div>
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 25.71428571428571%;">
   Gecko 14.0
  </div>
 </div>
 <div style="background: #eee; padding: 2px;">
  Inherits from:
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">
    nsISupports
   </a>
  </code>
  <span style="text-align: right; float: right;">
   Last changed in Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)
  </span>
 </div>
</div>
<p>
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 As of Firefox 14, this interface is obsolete (but still available for compatibility with legacy extensions) and all its functionality is available with more configuration options via the
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIParserUtils" title="">
   nsIParserUtils
  </a>
 </code>
 interface.
</div>
<p>
 Implemented by:
 <code>
  @mozilla.org/feed-unescapehtml;1
 </code>
 as a service:
</p>
<pre class="eval">var scriptableUnescapeHTML = Components.classes["@mozilla.org/feed-unescapehtml;1"]
                             .getService(Components.interfaces.nsIScriptableUnescapeHTML);
</pre>
<h2 id="Method_overview" name="Method_overview">
 Method overview
</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td>
    <code>
     nsIDOMDocumentFragment
     <a href="#parseFragment()">
      parseFragment
     </a>
     (in AString fragment, in PRBool isXML, in nsIURI baseURI, in nsIDOMElement element);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     AString
     <a href="#unescape()">
      unescape
     </a>
     (in AString src);
    </code>
   </td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">
 Methods
</h2>
<h3 id="parseFragment()" name="parseFragment()">
 parseFragment()
</h3>
<p>
 Parses a string of HTML or XML source into a sanitized
 <a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment" title="The DocumentFragment interface represents a minimal document object that has no parent. It is used as a lightweight version of Document that stores a segment of a document structure comprised of nodes just like a standard document. The key difference is that because the document fragment isn't part of the active document tree structure, changes made to the fragment don't affect the document, cause reflow, or incur any performance impact that can occur when changes are made.">
  <code>
   DocumentFragment
  </code>
 </a>
 .
</p>
<p lang="en">
 <span id="the-code">
  <span class="c">
   This is equivalent to
  </span>
  <span class="c">
   calling
   <code>
    nsIParserUtils::parseFragment(fragment, 0, isXML, baseURI,
   </code>
  </span>
  <span class="c">
   <code>
    element)
   </code>
   .
  </span>
  <span class="c">
   You should call
   <code>
    nsIParserUtils::parseFragment()
   </code>
   instead of calling this
  </span>
  <span class="c">
   method.
  </span>
 </span>
</p>
<pre class="eval">nsIDOMDocumentFragment parseFragment(
  in AString fragment,
  in PRBool isXML,
  in nsIURI baseURI,
  in nsIDOMElement element
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   fragment
  </code>
 </dt>
 <dd>
  A string of HTML or XML source to parse as a fragment.
 </dd>
 <dt>
  <code>
   isXML
  </code>
 </dt>
 <dd>
  Set this to
  <code>
   true
  </code>
  if the
  <code>
   fragment
  </code>
  is an XML string; otherwise set it to
  <code>
   false
  </code>
  .
 </dd>
 <dt>
  <code>
   baseURI
  </code>
 </dt>
 <dd>
  Pointer to the base URI against which to resolve any URIs included in the fragment. This parameter is ignored if
  <code>
   isXML
  </code>
  is
  <code>
   false
  </code>
  .
 </dd>
 <dt>
  <code>
   element
  </code>
 </dt>
 <dd>
  The
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMElement" title="">
    nsIDOMElement
   </a>
  </code>
  to be used as the context node for the purposes of the fragment parsing algorithm.
 </dd>
</dl>
<h6 id="Return_value" name="Return_value">
 Return value
</h6>
<p>
 An
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMDocumentFragment" title="">
   nsIDOMDocumentFragment
  </a>
 </code>
 of the element with the new text appended.
</p>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">
 Exceptions thrown
</h6>
<dl>
 <dt>
  <code>
   NS_ERROR_FAILURE
  </code>
 </dt>
 <dd>
  Unable to append the text to the element.
 </dd>
</dl>
<h3 id="unescape()" name="unescape()">
 unescape()
</h3>
<p>
 Convents HTML source into plain text.
</p>
<p lang="en">
 <span id="the-code">
  <span class="c">
   This is equivalent to calling
  </span>
  <span class="c">
   <code>
    nsIParserUtils::convertToPlainText(src,
   </code>
  </span>
  <code>
   <span class="c">
    nsIDocumentEncoder::OutputSelectionOnly |
   </span>
  </code>
  <span class="c">
   <code>
    nsIDocumentEncoder::OutputAbsoluteLinks, 0)
   </code>
   .
  </span>
  <span class="c">
   You should call
   <code>
    nsIParserUtils::convertToPlainText()
   </code>
   instead of calling
  </span>
  <span class="c">
   this method.
  </span>
 </span>
</p>
<pre class="eval">AString unescape(
  in AString src
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   src
  </code>
 </dt>
 <dd>
  The HTML string to convert into plain text.
 </dd>
</dl>
<h6 id="Return_value" name="Return_value">
 Return value
</h6>
<p>
 The result of the plain text conversion.
</p>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">
 Exceptions thrown
</h6>
<dl>
 <dt>
  <code>
   NS_ERROR_FAILURE
  </code>
 </dt>
 <dd>
  Unable to convert the string.
 </dd>
</dl>
<h2 id="See_also" name="See_also">
 See also
</h2>
<ul>
 <li>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMDocumentFragment" title="">
    nsIDOMDocumentFragment
   </a>
  </code>
 </li>
 <li>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">
    nsIURI
   </a>
  </code>
 </li>
 <li>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMElement" title="">
    nsIDOMElement
   </a>
  </code>
 </li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Hsivonen">Hsivonen</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Nickolay">Nickolay</a>, <a href="https://developer.mozilla.org/en-US/profiles/Planche">Planche</a>.</p></div></body>
</html>
