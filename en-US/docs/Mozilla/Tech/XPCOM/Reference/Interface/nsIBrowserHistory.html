<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIBrowserHistory</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIBrowserHistory</h1></div>
<div class="content"><p>
</p>
<div style="border: solid #ddd 2px; margin-bottom: 12px;">
 <div style="background: #eee; padding: 2px;">
  <code>
   <a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/public/nsIBrowserHistory.idl" rel="custom">
    toolkit/components/places/public/nsIBrowserHistory.idl
   </a>
  </code>
  <span style="text-align: right; float: right;">
   <a href="https://developer.mozilla.org/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">
    Scriptable
   </a>
  </span>
 </div>
 <span style="padding: 4px 2px;">
  A browser-specific interface to global history. It adds functions used by the basic browser like, marking pages as typed in the URL bar, and removing pages as from the history interface.
 </span>
 <div style="background: #eee; padding: 2px;">
  Inherits from:
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIGlobalHistory2" title="">
    nsIGlobalHistory2
   </a>
  </code>
  <span style="text-align: right; float: right;">
   Last changed in Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)
  </span>
 </div>
</div>
<p>
</p>
<p>
 Implemented by:
 <code>
  @mozilla.org/browser/nav-history-service;1
 </code>
 . To use this service, use:
</p>
<pre class="eval">var browserHistory = Components.classes["@mozilla.org/browser/nav-history-service;1"]
                     .getService(Components.interfaces.nsIBrowserHistory);
</pre>
<h2 id="Method_overview" name="Method_overview">
 Method overview
</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td>
    <code>
     void
     <a href="#addPageWithDetails()">
      addPageWithDetails
     </a>
     (in nsIURI aURI, in wstring aTitle, in long long aLastVisited);
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 15.0 / Thunderbird 15.0 / SeaMonkey 2.12)">
     Obsolete since Gecko 15.0
    </span>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#markPageAsFollowedLink()">
      markPageAsFollowedLink
     </a>
     (in nsIURI aURI);
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">
     Obsolete since Gecko 22.0
    </span>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#markPageAsTyped()">
      markPageAsTyped
     </a>
     (in nsIURI aURI);
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">
     Obsolete since Gecko 22.0
    </span>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#registerOpenPage()">
      registerOpenPage
     </a>
     (in nsIURI aURI);
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6)">
     Obsolete since Gecko 9.0
    </span>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removeAllPages()">
      removeAllPages
     </a>
     ();
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removePage()">
      removePage
     </a>
     (in nsIURI aURI);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removePages()">
      removePages
     </a>
     ([array, size_is(aLength)] in nsIURI aURIs, in unsigned long aLength, in boolean aDoBatchNotify);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removePagesByTimeframe()">
      removePagesByTimeframe
     </a>
     (in long long aBeginTime, in long long aEndTime);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removePagesFromHost()">
      removePagesFromHost
     </a>
     (in AUTF8String aHost, in boolean aEntireDomain);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#removeVisitsByTimeframe()">
      removeVisitsByTimeframe
     </a>
     (in long long aBeginTime, in long long aEndTime);
    </code>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     void
     <a href="#unregisterOpenPage()">
      unregisterOpenPage
     </a>
     (in nsIURI aURI);
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6)">
     Obsolete since Gecko 9.0
    </span>
   </td>
  </tr>
 </tbody>
</table>
<div class="note">
 <strong>
  Note:
 </strong>
 The
 <code>
  markPageAsFollowedLink
 </code>
 and
 <code>
  markPageAsTyped
 </code>
 methods were moved to
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService" title="">
   nsINavHistoryService
  </a>
 </code>
 in
 <span title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">
  Gecko 22.0
 </span>
 so that all
 <code>
  markPageAs*
 </code>
 methods can be found in one interface.
</div>
<h2 id="Attributes" name="Attributes">
 Attributes
</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">
    Attribute
   </td>
   <td class="header">
    Type
   </td>
   <td class="header">
    Description
   </td>
  </tr>
  <tr>
   <td>
    <code>
     count
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 15.0 / Thunderbird 15.0 / SeaMonkey 2.12)">
     Obsolete since Gecko 15.0
    </span>
   </td>
   <td>
    <code>
     <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSPR/Reference/PRUint32" title="en/PRUint32">
      PRUint32
     </a>
    </code>
   </td>
   <td>
    Indicates if there are entries in global history. For performance reasons this does not return the real number of entries.
    <strong>
     Read only.
    </strong>
   </td>
  </tr>
  <tr>
   <td>
    <code>
     lastPageVisited
    </code>
    <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 10.0 / Thunderbird 10.0 / SeaMonkey 2.7)">
     Obsolete since Gecko 10.0
    </span>
   </td>
   <td>
    <code>
     <a href="https://developer.mozilla.org/en-US/AUTF8String" title="en/AUTF8String">
      AUTF8String
     </a>
    </code>
   </td>
   <td>
    The last page that was visited in a top-level window.
    <strong>
     Read only.
    </strong>
   </td>
  </tr>
 </tbody>
</table>
<div class="note">
 <strong>
  Note:
 </strong>
 The
 <code>
  count
 </code>
 attribute was removed in
 <span title="(Firefox 15.0 / Thunderbird 15.0 / SeaMonkey 2.12)">
  Gecko 15.0
 </span>
 because it was only used to determine if there were any entries at all anyway, so the
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService">
   nsINavHistoryService.hasHistoryEntries
  </a>
 </code>
 attribute is better for this.
</div>
<h2 id="Methods" name="Methods">
 Methods
</h2>
<p>
</p>
<div class="headingWithIndicator">
 <h3 id="addPageWithDetails()">
  addPageWithDetails()
 </h3>
 <span class="indicatorInHeadline obsolete obsoleteMethod">
  Obsolete since Gecko 15.0 (Firefox 15.0 / Thunderbird 15.0 / SeaMonkey 2.12)
 </span>
</div>
<p>
</p>
<div class="note">
 <p>
  <strong>
   Note:
  </strong>
  This method was removed in
  <span title="(Firefox 15.0 / Thunderbird 15.0 / SeaMonkey 2.12)">
   Gecko 15.0
  </span>
  . You should use
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/mozIAsyncHistory">
    mozIAsyncHistory.updatePlaces()
   </a>
  </code>
  instead.
 </p>
</div>
<p>
 This method adds a page to the history with specific time stamp information. It is called by history importing code and is used in the History migration tool.
</p>
<pre class="eval">void addPageWithDetails(
  in nsIURI aURI,
  in wstring aTitle,
  in long long aLastVisited
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The page that will be added to the history.
 </dd>
 <dt>
  <code>
   aTitle
  </code>
 </dt>
 <dd>
  The title of the page.
 </dd>
 <dt>
  <code>
   aLastVisited
  </code>
 </dt>
 <dd>
  When the page was last visited, in microseconds since the Unix epoch.
 </dd>
</dl>
<p>
</p>
<div class="headingWithIndicator">
 <h3 id="markPageAsFollowedLink()">
  markPageAsFollowedLink()
 </h3>
 <span class="indicatorInHeadline obsolete obsoleteMethod">
  Obsolete since Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)
 </span>
</div>
<p>
</p>
<div class="note">
 <p>
  <strong>
   Note:
  </strong>
  This method was moved to another interface in
  <span title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">
   Gecko 22.0
  </span>
  . You should use
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService">
    nsINavHistoryService.markPageAsFollowedLink()
   </a>
  </code>
  instead. This function was originally added in Gecko 2.0 (Firefox 4/Thunderbird 3.3/SeaMonkey 2.1).
 </p>
</div>
<p>
 Designates the specified URL as coming from a link explicitly followed by the user (for example by clicking on it).
</p>
<pre class="eval">void markPageAsFollowedLink(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The URL that is to be marked as explicitly followed by the user.
 </dd>
</dl>
<p>
</p>
<div class="headingWithIndicator">
 <h3 id="markPageAsTyped()">
  markPageAsTyped()
 </h3>
 <span class="indicatorInHeadline obsolete obsoleteMethod">
  Obsolete since Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)
 </span>
</div>
<p>
</p>
<div class="note">
 <p>
  <strong>
   Note:
  </strong>
  This method was moved to another interface in
  <span title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">
   Gecko 22.0
  </span>
  . You should use
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService">
    nsINavHistoryService.markPageAsTyped()
   </a>
  </code>
  instead.
 </p>
</div>
<p>
 This method designates the URL as having been explicitly typed in by the user, so it can be used as an autocomplete result. It is called by the URL bar when the user types in a URL. This can be and is called before the page is actually added to history, since the page isn't added until it actually starts loading. The typed flag affects the URL bar autocomplete. This will cause the transition type of the next visit of the URL to be marked as "typed."
</p>
<pre class="eval">void markPageAsTyped(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The page that is to be marked as typed by the user.
 </dd>
</dl>
<p>
</p>
<div class="headingWithIndicator">
 <h3 id="registerOpenPage()">
  registerOpenPage()
 </h3>
 <span class="indicatorInHeadline obsolete obsoleteMethod">
  Obsolete since Gecko 9.0 (Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6)
 </span>
</div>
<p>
</p>
<p>
 Mark a page as being currently open.
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 This method was an alias for
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/mozIPlacesAutoComplete">
   mozIPlacesAutoComplete.registerOpenPage()
  </a>
 </code>
 , which still exists and can be used instead.
</div>
<pre class="eval">void registerOpenPage(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The page that is to be marked as currently open.
 </dd>
</dl>
<h3 id="removeAllPages()" name="removeAllPages()">
 removeAllPages()
</h3>
<p>
 This method removes all the pages from the global history.
</p>
<pre class="eval">void removeAllPages();
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<p>
 None.
</p>
<h6 id="Remarks">
 Remarks
</h6>
<p>
 Visits are removed synchronously, but pages are expired asynchronously, off the main thread.
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 Removals are handled in a batch. Single removals are not subject to individual notification; instead,
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryObserver">
   nsINavHistoryObserver.onClearHistory()
  </a>
 </code>
 is called on the history observer.
</div>
<h3 id="removePage()" name="removePage()">
 removePage()
</h3>
<p>
 This method removes all visits for a page from the history. The page itself is only deleted when it is not bookmarked and when it is not a
 <code>
  place:
 </code>
 URI. This method is called by the UI when the user deletes a history entry.
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 If removing fewer than 10 pages, calling this repeatedly is preferable over calling
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIBrowserHistory#removePages()">
   removePages()
  </a>
 </code>
 , since that's about the point at which the overhead of setting up a batch operation doesn't make sense anymore.
</div>
<pre class="eval">void removePage(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The added page which is to be removed.
 </dd>
</dl>
<p>
</p>
<h3 id="removePages()">
 removePages()
</h3>
<p>
</p>
<p>
 Removes multiple pages from history using a batch.
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 If removing fewer than 10 pages, calling
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIBrowserHistory#removePage()">
   removePage()
  </a>
 </code>
 repeatedly is preferable over calling this, since that's about the point at which the overhead of setting up a batch operation doesn't make sense anymore.
</div>
<pre class="eval">void removePages(
  [array, size_is(aLength)] in nsIURI aURIs,
  in unsigned long aLength,
  in boolean aDoBatchNotify /* parameter removed in Gecko 9.0 */
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURIs
  </code>
 </dt>
 <dd>
  An array of page URIs to be removed from history.
 </dd>
 <dt>
  <code>
   aLength
  </code>
 </dt>
 <dd>
  The number of pages listed in the
  <code>
   aURIs
  </code>
  array.
 </dd>
 <dt>
  <code>
   aDoBatchNotify
  </code>
  <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6)">
   Obsolete since Gecko 9.0
  </span>
 </dt>
 <dd>
  If set to
  <code>
   true
  </code>
  , the
  <code>
   BeginUpdateBatch
  </code>
  and
  <code>
   EndUpdateBatch
  </code>
  events are sent; otherwise, no notification of changes to the history is provided.  This parameter was
  <strong>
   removed
  </strong>
  in Gecko 9.0.
 </dd>
</dl>
<p>
</p>
<h3 id="removePagesByTimeframe()">
 removePagesByTimeframe()
</h3>
<p>
</p>
<p>
 Removes all pages within the given timeframe, using a batch.
</p>
<pre class="eval">void removePagesByTimeframe(
  in long long aBeginTime,
  in long long aEndTime
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aBeginTime
  </code>
 </dt>
 <dd>
  The time of the first page to remove, in microseconds from epoch.
 </dd>
 <dt>
  <code>
   aEndTime
  </code>
 </dt>
 <dd>
  The time of the last page to remove, in microseconds from epoch.
 </dd>
</dl>
<h3 id="removePagesFromHost()" name="removePagesFromHost()">
 removePagesFromHost()
</h3>
<p>
 This method removes all the pages from the given host. It is called from the UI when the user deletes a group associated with a host or domain. This method lets you delete pages from a specific host, or pages from all hosts in a given domain.
</p>
<p>
 If
 <code>
  aEntireDomain
 </code>
 is
 <code>
  true
 </code>
 , it will assume
 <code>
  aHost
 </code>
 is a domain, and remove all pages from the entire domain.
</p>
<pre class="eval">void removePagesFromHost(
  in AUTF8String aHost,
  in boolean aEntireDomain
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aHost
  </code>
 </dt>
 <dd>
  The name of the host to be removed. An empty value for this parameter means local files and anything else without a hostname. You can also pass in the localized "(local files)" title given to you by a history query to remove all history information for local files.
 </dd>
 <dt>
  <code>
   aEntireDomain
  </code>
 </dt>
 <dd>
  If set to
  <code>
   true
  </code>
  , it will assume
  <code>
   aHost
  </code>
  is a domain, and remove all pages from the entire domain, including subdomains. Set to
  <code>
   false
  </code>
  otherwise.
 </dd>
</dl>
<p>
</p>
<h3 id="removeVisitsByTimeframe()">
 removeVisitsByTimeframe()
</h3>
<p>
</p>
<p>
 Removes all visits within the given timeframe, using a batch. Any pages that become unvisited as a result are also deleted.
</p>
<pre class="eval">void removeVisitsByTimeframe(
  in long long aBeginTime,
  in long long aEndTime
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aBeginTime
  </code>
 </dt>
 <dd>
  The time of the first page to remove, in microseconds from epoch.
 </dd>
 <dt>
  <code>
   aEndTime
  </code>
 </dt>
 <dd>
  The time of the last page to remove, in microseconds from epoch.
 </dd>
</dl>
<p>
</p>
<div class="headingWithIndicator">
 <h3 id="unregisterOpenPage()">
  unregisterOpenPage()
 </h3>
 <span class="indicatorInHeadline obsolete obsoleteMethod">
  Obsolete since Gecko 9.0 (Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6)
 </span>
</div>
<p>
</p>
<p>
 Mark a page as no longer being open (either by closing the window or tab, or by navigating away from that page).
</p>
<div class="note">
 <strong>
  Note:
 </strong>
 This method was an alias for
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/mozIPlacesAutoComplete">
   mozIPlacesAutoComplete.unregisterOpenPage()
  </a>
 </code>
 , which still exists and can be used instead.
</div>
<pre class="eval">void unregisterOpenPage(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">
 Parameters
</h6>
<dl>
 <dt>
  <code>
   aURI
  </code>
 </dt>
 <dd>
  The page to unregister as an open page.
 </dd>
</dl>
<h2 id="See_also" name="See_also">
 See also
</h2>
<ul>
 <li>
  <a href="/en-US/docs/Mozilla/Tech/Places" title="en/Places">
   Places
  </a>
 </li>
 <li>
  <a href="/en-US/docs/Mozilla/Tech/Places/Using_the_Places_history_service" title="en/Using_the_Places_history_service">
   Using the Places history service
  </a>
 </li>
 <li>
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIGlobalHistory2" title="">
    nsIGlobalHistory2
   </a>
  </code>
 </li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mistyyyy">Mistyyyy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/Editmonkey">Editmonkey</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/woby">woby</a>, <a href="https://developer.mozilla.org/en-US/profiles/Swiney">Swiney</a>, <a href="https://developer.mozilla.org/en-US/profiles/One">One</a>, <a href="https://developer.mozilla.org/en-US/profiles/sdwilsh">sdwilsh</a>, <a href="https://developer.mozilla.org/en-US/profiles/V%20thunder">V thunder</a>, <a href="https://developer.mozilla.org/en-US/profiles/Arehman4">Arehman4</a>.</p></div></body>
</html>
