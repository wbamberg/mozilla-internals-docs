<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIWebSocketChannel</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIWebSocketChannel</h1></div>
<div class="content"><h1 id="nsIWebSocketChannel">nsIWebSocketChannel</h1>
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/websocket/nsIWebSocketChannel.idl" rel="custom">netwerk/protocol/websocket/nsIWebSocketChannel.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Provides support for WebSocket channels.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>
  
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>
  
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 17.142857142857142%;"></div>
  
<div style="height: 8px; top: 16px; left: 17.142857142857142%; background: #00dd00; position: absolute; width: 82.85714285714286%;" title="Introduced in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 17.142857142857142%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 17.142857142857142%;">Gecko 8.0</div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)</span></div>
</div><p></p>
<p>Implemented by: <code>?????????????????????????????????????</code>. To create an instance, use:</p>
<pre class="eval">var webSocketChannel = Components.classes["@mozilla.org/????????????????????????????"]
                       .createInstance(Components.interfaces.nsIWebSocketChannel);
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#asyncOpen()">asyncOpen</a>(in nsIURI aURI, in ACString aOrigin, in nsIWebSocketListener aListener, in nsISupports aContext);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#close()">close</a>(in unsigned short aCode, in AUTF8String aReason);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#sendBinaryMsg()">sendBinaryMsg</a>(in ACString aMsg);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#sendMsg()">sendMsg</a>(in AUTF8String aMsg);</code></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>extensions</code></td>
   <td><code><a href="/en/ACString" title="en/ACString">ACString</a></code></td>
   <td><code>Sec-Websocket-Extensions</code> response header value. <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>loadGroup</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsILoadGroup" title="">nsILoadGroup</a></code></code></td>
   <td>The load group of the WebSockets code.</td>
  </tr>
  <tr>
   <td><code>notificationCallbacks</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIInterfaceRequestor" title="">nsIInterfaceRequestor</a></code></code></td>
   <td>The notification callbacks for authorization and so forth.</td>
  </tr>
  <tr>
   <td><code>originalURI</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code></code></td>
   <td>The original <code>URI</code> used to construct the <code>protocol</code> connection. This is used in the case of a redirect or <code>URI</code> "resolution" (for example resolving a resource: <code>URI</code> to a file: <code>URI</code>) so that the original pre-redirect <code>URI</code> can still be obtained. This is never <code>null</code>. <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>protocol</code></td>
   <td><code><a href="/en/ACString" title="en/ACString">ACString</a></code></td>
   <td><code>Sec-Websocket-Protocol</code> value.</td>
  </tr>
  <tr>
   <td><code>securityInfo</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></code></td>
   <td>Transport-level security information (if any). <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>URI</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code></code></td>
   <td>The <code>URI</code> corresponding to the protocol connection after any redirections are completed. <strong>Read only.</strong></td>
  </tr>
 </tbody>
</table>
<h2 id="Status_codes">Status codes</h2>
<p>The following values are permitted status codes.</p>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Status code</td>
   <td class="header">Name</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td>0-999</td>
   <td> </td>
   <td><strong>Reserved and not used.</strong></td>
  </tr>
  <tr>
   <td>1000</td>
   <td><code>CLOSE_NORMAL</code></td>
   <td>Normal closure; the connection successfully completed whatever purpose for which it was created.</td>
  </tr>
  <tr>
   <td>1001</td>
   <td><code>CLOSE_GOING_AWAY</code></td>
   <td>The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.</td>
  </tr>
  <tr>
   <td>1002</td>
   <td><code>CLOSE_PROTOCOL_ERROR</code></td>
   <td>The endpoint is terminating the connection due to a protocol error.</td>
  </tr>
  <tr>
   <td>1003</td>
   <td><code>CLOSE_UNSUPPORTED</code></td>
   <td>The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).</td>
  </tr>
  <tr>
   <td>1004</td>
   <td><code>CLOSE_TOO_LARGE</code></td>
   <td>The endpoint is terminating the connection because a data frame was received that is too large.</td>
  </tr>
  <tr>
   <td>1005</td>
   <td><code>CLOSE_NO_STATUS</code></td>
   <td><strong>Reserved.</strong>  Indicates that no status code was provided even though one was expected.</td>
  </tr>
  <tr>
   <td>1006</td>
   <td><code>CLOSE_ABNORMAL</code></td>
   <td><strong>Reserved.</strong> Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.</td>
  </tr>
  <tr>
   <td>1007-1999</td>
   <td> </td>
   <td><strong>Reserved for future use by the WebSocket standard.</strong></td>
  </tr>
  <tr>
   <td>2000-2999</td>
   <td> </td>
   <td><strong>Reserved for use by WebSocket extensions.</strong></td>
  </tr>
  <tr>
   <td>3000-3999</td>
   <td> </td>
   <td>Available for use by libraries and frameworks. <strong>May not</strong> be used by applications.</td>
  </tr>
  <tr>
   <td>4000-4999</td>
   <td> </td>
   <td>Available for use by applications.</td>
  </tr>
 </tbody>
</table>
<h2 id="Methods"><span style="font-weight: bold;">Methods</span></h2>
<h3 id="asyncOpen()" name="asyncOpen()">asyncOpen()</h3>
<p>Asynchronously opens the WebSocket connection. Received messages are fed to the socket listener as they arrive. The socket listener's methods are called on the thread that calls <code>asyncOpen()</code> and are not called until after <code>asyncOpen()</code> returns. If <code>asyncOpen()</code> returns successfully, the <code>protocol</code> implementation promises to call at least <code>onStart</code> and <code>onStop</code> of the listener.</p>
<p></p><div class="blockIndicator note"><strong>Note:</strong> Implementations should throw NS_ERROR_ALREADY_OPENED if the WebSocket connection is reopened.</div><p></p>
<pre class="eval">void asyncOpen(
  in nsIURI aURI,
  in ACString aOrigin,
  in nsIWebSocketListener aListener,
  in nsISupports aContext
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The <code>uri</code> of the websocket protocol; this may be redirected.</dd>
 <dt>
  <code>aOrigin</code></dt>
 <dd>
  The URI of the originating resource.</dd>
 <dt>
  <code>aListener</code></dt>
 <dd>
  The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebSocketListener" title="">nsIWebSocketListener</a></code> implementation.</dd>
 <dt>
  <code>aContext</code></dt>
 <dd>
  An opaque parameter forwarded to <code>aListener</code>'s methods.</dd>
</dl>
<h3 id="close()" name="close()">close()</h3>
<pre class="eval">void close(
  in unsigned short aCode,
  in AUTF8String aReason
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aCode</code></dt>
 <dd>
  The status of the connection when closed; see <a href="#Status_codes">Status codes</a> for possible values.</dd>
 <dt>
  <code>aReason</code></dt>
 <dd>
  A human-readable string describing the reason the connection closed.</dd>
</dl>
<h3 id="sendBinaryMsg()" name="sendBinaryMsg()">sendBinaryMsg()</h3>
<p>Sends a binary message to the WebSocket peer.</p>
<pre class="eval">void sendBinaryMsg(
  in ACString aMsg
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aMsg</code></dt>
 <dd>
  The data to send.</dd>
</dl>
<h3 id="sendMsg()" name="sendMsg()">sendMsg()</h3>
<p>Sends a text message to the WebSocket peer.</p>
<pre class="eval">void sendMsg(
  in AUTF8String aMsg
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aMsg</code></dt>
 <dd>
  The UTF-8 string to send.</dd>
</dl>
<h2 id="See_also" name="See_also">See also</h2>
<ul>
 <li><a href="/en/WebSockets" title="WebSockets">WebSockets</a></li>
 <li><a href="/en/WebSockets/WebSockets_reference/WebSocket" title="WebSocket"><code>WebSocket</code></a></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/shawntea">shawntea</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>.</p></div></body>
</html>
