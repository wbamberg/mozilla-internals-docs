<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsIHttpUpgradeListener</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsIHttpUpgradeListener</h1></div>
<div class="content"><p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/nsIHttpChannelInternal.idl" rel="custom">netwerk/protocol/http/nsIHttpChannelInternal.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

The callback interface for <a href="/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannelInternal">nsIHttpChannelInternal.HTTPUpgrade</a>; this is called when an HTTP protocol upgrade is finished.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>
  
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>
  
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 14.285714285714285%;"></div>
  
<div style="height: 8px; top: 16px; left: 14.285714285714285%; background: #00dd00; position: absolute; width: 85.71428571428572%;" title="Introduced in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 14.285714285714285%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 14.285714285714285%;">Gecko 6.0</div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)</span></div>
</div><p></p>
<p>This is used, for example, by <a href="/en/WebSockets" title="en/WebSockets">WebSockets</a> in order to upgrade an HTTP channel to use the WebSocket protocol.</p>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#onTransportAvailable()">onTransportAvailable</a>(in nsISocketTransport aTransport, in nsIAsyncInputStream aSocketIn, in nsIAsyncOutputStream aSocketOut);</code></td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="onTransportAvailable()" name="onTransportAvailable()">onTransportAvailable()</h3>
<p>Called when an HTTP protocol upgrade attempt is completed, passing in the information needed by the protocol handler to take over the channel that is no longer being used by HTTP.</p>
<div class="note">
 <strong>Note:</strong> To begin a protocol upgrade, call <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannelInternal#HTTPUpgrade()">nsIHttpChannelInternal.HTTPUpgrade()</a></code>.</div>
<pre class="eval">void onTransportAvailable(
  in nsISocketTransport aTransport,
  in nsIAsyncInputStream aSocketIn,
  in nsIAsyncOutputStream aSocketOut
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aTransport</code></dt>
 <dd>
  The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISocketTransport" title="">nsISocketTransport</a></code> describing the socket connection between the browser and the server; this socket can now be used for the new protocol instead of HTTP.</dd>
 <dt>
  <code>aSocketIn</code></dt>
 <dd>
  The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAsyncInputStream" title="">nsIAsyncInputStream</a></code> object representing the input stream for data coming from the server over the socket connection.</dd>
 <dt>
  <code>aSocketOut</code></dt>
 <dd>
  The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAsyncOutputStream" title="">nsIAsyncOutputStream</a></code> object representing the out stream for sending data to the server over the socket.</dd>
</dl></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/fscholz">fscholz</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>.</p></div></body>
</html>
