<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>nsITransferable</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../../Tech.html">Tech</a>&raquo;<a href="../../../XPCOM.html">XPCOM</a>&raquo;<a href="../../Reference.html">Reference</a>&raquo;<a href="../Interface.html">Interface</a></nav><div class="content-heading"><h1>nsITransferable</h1></div>
<div class="content"><p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/widget/nsITransferable.idl" rel="custom">widget/nsITransferable.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

A container for typed data that can be transferred from one place or owner to another, possibly involving format conversion. These objects are used during drag-and-drop operations.
</span>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 13.0 (Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10)</span></div>
</div><p></p>

<p>Implemented by: <code>@mozilla.org/widget/transferable;1</code>. To create an instance, use:</p>

<pre class="eval">var transferable = Components.classes["@mozilla.org/widget/transferable;1"]
                   .createInstance(Components.interfaces.nsITransferable);
</pre>

<p>It's important to note that a <strong>flavor</strong>, which specifies a type of data the transferable supports, is represented by a null-terminated string indicating the MIME type of the format supported by the flavor.</p>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#addDataFlavor()">addDataFlavor</a>( in string aDataFlavor );</code></td>
  </tr>
  <tr>
   <td><code>nsISupportsArray <a href="#flavorsTransferableCanExport()">flavorsTransferableCanExport</a>( );</code></td>
  </tr>
  <tr>
   <td><code>nsISupportsArray <a href="#flavorsTransferableCanImport()">flavorsTransferableCanImport</a>( );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getAnyTransferData()">getAnyTransferData</a>( out string aFlavor, out nsISupports aData, out unsigned long aDataLen );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getTransferData()">getTransferData</a>( in string aFlavor, out nsISupports aData, out unsigned long aDataLen );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#init()">init</a>(in nsILoadContext aContext);</code> </td>
  </tr>
  <tr>
   <td><code>boolean <a href="#isLargeDataSet()">isLargeDataSet</a>( );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeDataFlavor()">removeDataFlavor</a>( in string aDataFlavor );</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setTransferData()">setTransferData</a>( in string aFlavor, in nsISupports aData, in unsigned long aDataLen );</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Attributes" name="Attributes">Attributes</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>converter</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFormatConverter" title="">nsIFormatConverter</a></code></code></td>
   <td>An <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFormatConverter" title="">nsIFormatConverter</a></code> instance which implements the code needed to convert data into and out of the transferable given the supported flavors.</td>
  </tr>
  <tr>
   <td><code>isPrivateData</code></td>
   <td><code><a title="en/boolean">boolean</a></code></td>
   <td>Although this is not a read-only attribute, you should generally avoid changing it, since doing so may cause it not to actually reflect the status of the context in which the transferable was created. <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span> </td>
  </tr>
  <tr>
   <td><code>requestingNode</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMNode" title="">nsIDOMNode</a></code></code></td>
   <td>
    <p>The source DOM <a href="/en-US/docs/Web/API/Node" title="Node is an interface from which a number of DOM API object types inherit. It allows those types to be treated similarly; for example, inheriting the same set of methods, or being tested in the same way."><code>Node</code></a> this transferable was created from. <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span> </p>

    <div class="note">
    <p><strong>Note:</strong> Currently, this can only be used on Windows (in order to support network principal information in drag operations).</p>
    </div>
   </td>
  </tr>
 </tbody>
</table>

<h2 id="Constants" name="Constants">Constants</h2>

<h3 id="kFlavorHasDataProvider">kFlavorHasDataProvider</h3>

<p>(that title needs to be better)</p>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>kFlavorHasDataProvider</code></td>
   <td><code>0</code></td>
   <td><strong>A description is needed here.</strong></td>
  </tr>
 </tbody>
</table>

<h3 id="Methods" name="Methods">Common MIME types</h3>

<p>Some of these need better descriptions, especially the Mozilla-specific ones.</p>

<table class="standard-table">
 <thead>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code>kTextMime</code></td>
   <td><code>text/plain</code></td>
   <td>Plain text.</td>
  </tr>
  <tr>
   <td><code>kUnicodeMime</code></td>
   <td><code>text/unicode</code></td>
   <td>Unicode text.</td>
  </tr>
  <tr>
   <td><code>kMozTextInternal</code></td>
   <td><code>text/x-moz-text-internal</code></td>
   <td>Text data that isn't meant to be used by non-Mozilla code.</td>
  </tr>
  <tr>
   <td><code>kHTMLMime</code></td>
   <td><code>text/html</code></td>
   <td>HTML.</td>
  </tr>
  <tr>
   <td><code>kAOLMailMime</code></td>
   <td><code>AOLMAIL</code></td>
   <td>AOL mail. <strong>Need details.</strong></td>
  </tr>
  <tr>
   <td><code>kPNGImageMime</code></td>
   <td><code>image/png</code></td>
   <td>PNG image.</td>
  </tr>
  <tr>
   <td><code>kJPEGImageMime</code></td>
   <td><code>image/jpeg</code></td>
   <td>JPEG image.</td>
  </tr>
  <tr>
   <td><code>kJPGImageMime</code></td>
   <td><code>image/jpg</code></td>
   <td>JPEG image.</td>
  </tr>
  <tr>
   <td><code>kGIFImageMime</code></td>
   <td><code>image/gif</code></td>
   <td>GIF image.</td>
  </tr>
  <tr>
   <td><code>kFileMime</code></td>
   <td><code>application/x-moz-file</code></td>
   <td>An arbitrary file (is this an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title="">nsIFile</a></code>?)</td>
  </tr>
  <tr>
   <td><code>kURLMime</code></td>
   <td><code>text/x-moz-url</code></td>
   <td>A Mozilla URL object; this is a text string containing the URL, a newline (\n), then the title of the page.</td>
  </tr>
  <tr>
   <td><code>kURLDataMime</code></td>
   <td><code>text/x-moz-url-data</code></td>
   <td>A string containing only a URL.</td>
  </tr>
  <tr>
   <td><code>kURLDescriptionMime</code></td>
   <td><code>text/x-moz-url-desc</code></td>
   <td>A string containing only a description.</td>
  </tr>
  <tr>
   <td><code>kURLPrivateMime</code></td>
   <td><code>text/x-moz-url-priv</code></td>
   <td>The same as <code>kURLDataMIme</code>, except intended for private use only.</td>
  </tr>
  <tr>
   <td><code>kNativeImageMime</code></td>
   <td><code>application/x-moz-nativeimage</code></td>
   <td>An image in Gecko's native internal image storage format.</td>
  </tr>
  <tr>
   <td><code>kNativeHTMLMime</code></td>
   <td><code>application/x-moz-nativehtml</code></td>
   <td>HTML in Gecko's native internal storage format.</td>
  </tr>
  <tr>
   <td><code>kHTMLContext</code></td>
   <td><code>text/_moz_htmlcontext</code></td>
   <td>Along with <code>kHTMLInfo</code>, this is used to provide the context for a fragment of HTML source. Contains the serialized ancestor elements.</td>
  </tr>
  <tr>
   <td><code>kHTMLInfo</code></td>
   <td><code>text/_moz_htmlinfo</code></td>
   <td>Along with <code>kHTMLContext</code>, this is used to provide the context for a fragment of HTML source. Contains numbers identifying where in the context the fragment came from.</td>
  </tr>
  <tr>
   <td><code>kFilePromiseURLMime</code></td>
   <td><code>application/x-moz-file-promise-url</code></td>
   <td>The source URL for a file promise.</td>
  </tr>
  <tr>
   <td><code>kFilePromiseDestFilename</code></td>
   <td><code>application/x-moz-file-promise-dest-filename</code></td>
   <td>The destination URL for a file promise.</td>
  </tr>
  <tr>
   <td><code>kFilePromiseMime</code></td>
   <td><code>application/x-moz-file-promise</code></td>
   <td>A dataless flavor used to interact with the operating system during file drags.</td>
  </tr>
  <tr>
   <td><code>kFilePromiseDirectoryMime</code></td>
   <td><code>application/x-moz-file-promise-dir</code></td>
   <td>A synthetic flavor which is added to the transferable once the destination directory for a file drag is known.</td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="addDataFlavor()" name="addDataFlavor()">addDataFlavor()</h3>

<p>Adds a new data flavor, indicating that this transferable can receive the type of data represented by the specified flavor string.</p>

<pre class="eval">void addDataFlavor(
  in string aDataFlavor 
);
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<dl>
 <dt><code>aDataFlavor</code></dt>
 <dd>A string defining a new data flavor that the transferable supports.</dd>
</dl>

<h3 id="flavorsTransferableCanExport()" name="flavorsTransferableCanExport()">flavorsTransferableCanExport()</h3>

<p>Returns a list of flavors (mime types as <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsCString" title="">nsISupportsCString</a></code>) that the transferable can export, either through intrinsic knowledge<code> </code>or output data converters.</p>

<pre class="eval">nsISupportsArray flavorsTransferableCanExport();
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<p>None.</p>

<h5 id="Return_value" name="Return_value">Return value</h5>

<p>Missing Description</p>

<h3 id="flavorsTransferableCanImport()" name="flavorsTransferableCanImport()">flavorsTransferableCanImport()</h3>

<p>Computes a list of flavors (<code>MIME</code> types as <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsCString" title="">nsISupportsCString</a></code>) that the transferable can accept into it, either through intrinsic knowledge or input data converters.</p>

<pre class="eval">nsISupportsArray flavorsTransferableCanImport();
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<p>None.</p>

<h5 id="Return_value" name="Return_value">Return value</h5>

<p>Missing Description</p>

<h3 id="getAnyTransferData()" name="getAnyTransferData()">getAnyTransferData()</h3>

<p>Returns the best flavor in the transferable, given those that have been added to it with <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITransferable#addDataFlavor()">addDataFlavor()</a></code>.</p>

<pre class="eval">void getAnyTransferData(
  out string aFlavor,
  out nsISupports aData,
  out unsigned long aDataLen 
);
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<dl>
 <dt><code>aFlavor</code></dt>
 <dd>On return, contains the flavor of data that was retrieved.</dd>
 <dt><code>aData</code></dt>
 <dd>On return, this is the data itself, which is an instance of a class based upon <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsPrimitives" title="">nsISupportsPrimitives</a></code>.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>On return, this value contains the size of the returned data.</dd>
</dl>

<h3 id="getTransferData()" name="getTransferData()">getTransferData()</h3>

<p>Returns the transfer data for a given flavor.</p>

<pre class="eval">void getTransferData(
  in string aFlavor,
  out nsISupports aData,
  out unsigned long aDataLen 
);
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<dl>
 <dt><code>aFlavor</code></dt>
 <dd>The flavor of data to retrieve.</dd>
 <dt><code>aData</code></dt>
 <dd>On return, this is the data itself, which is an instance of a class based upon <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsPrimitives" title="">nsISupportsPrimitives</a></code>.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>On return, this value contains the size of the returned data.</dd>
</dl>

<p></p><h3 id="init()">init()</h3><p></p>

<p>Initializes a transferable object. This should be called on all transferable objects. Failure to do so will result in fatal assertions in debug builds.</p>

<pre>void init(
  in nsILoadContext aContext
);</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aContext</code></dt>
 <dd>The load context associated with the transferable object. This can be set to <code>null</code> if a load context is not available.</dd>
</dl>

<h5 id="Remarks">Remarks</h5>

<p>The load context is used to track whether the transferable is storing privacy-sensitive information. For example, we try to delete data that you copy to the clipboard when you close a Private Browsing window.</p>

<p>To get the appropriate load context in JavaScript callers, one needs to get to the document that the transferable corresponds to, and then get the load context from the document like this:</p>

<pre class="brush: js">var loadContext = doc.defaultView.QueryInterface(Ci.<code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIInterfaceRequestor" title="">nsIInterfaceRequestor</a></code>)
                  .getInterface(Ci.<code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebNavigation" title="">nsIWebNavigation</a></code>)
                  .QueryInterface(Ci.<code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsILoadContext" title="">nsILoadContext</a></code>);</pre>

<p>In C++ callers, if you have the corresponding document, you can just call <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIDocument#GetLoadContext()">nsIDocument.GetLoadContext()</a></code> to get to the load context object.</p>

<h3 id="isLargeDataSet()" name="isLargeDataSet()">isLargeDataSet()</h3>

<p>Returns <code>true</code> if the data is large.</p>

<pre class="eval">boolean isLargeDataSet();
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<dl>
 <dt>None.</dt>
</dl>

<h5 id="Return_value" name="Return_value">Return value</h5>

<p><code>true</code> if the data is large; otherwise, the result is <code>false</code>.</p>

<h3 id="removeDataFlavor()" name="removeDataFlavor()">removeDataFlavor()</h3>

<p>Removes the data flavor matching the given one (as determined by a string comparison), along with the corresponding data.</p>

<pre class="eval">void removeDataFlavor(
  in string aDataFlavor 
);
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<dl>
 <dt><code>aDataFlavor</code></dt>
 <dd>The data flavor to remove.</dd>
</dl>

<h3 id="setTransferData()" name="setTransferData()">setTransferData()</h3>

<p>Sets the data in the transferable with the specified flavor. The transferable maintains its own copy of the data, so you can safely discard the original after making this call, if you wish.</p>

<pre class="eval">void setTransferData(
  in string aFlavor,
  in nsISupports aData,
  in unsigned long aDataLen 
);
</pre>

<h5 id="Parameters" name="Parameters">Parameters</h5>

<ul>
 <li>An instance of a class based upon <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsPrimitives" title="">nsISupportsPrimitives</a></code></li>
 <li>An <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title="">nsIFile</a></code></li>
 <li>An <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFlavorDataProvider" title="">nsIFlavorDataProvider</a></code></li>
</ul>

<dl>
 <dt><code>aFlavor</code></dt>
 <dd>The flavor of data that is being set.</dd>
 <dt><code>aData</code></dt>
 <dd>The data.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>The length of the data, or 0 if <code>aData</code> is an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFlavorDataProvider" title="">nsIFlavorDataProvider</a></code>.</dd>
</dl>

<h2 id="See_also" name="See_also">See also</h2>

<ul>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFlavorDataProvider" title="">nsIFlavorDataProvider</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsPrimitives" title="">nsISupportsPrimitives</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFormatConverter" title="">nsIFormatConverter</a></code></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>.</p></div></body>
</html>
