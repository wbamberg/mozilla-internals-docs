<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Components.utils.schedulePreciseGC</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../Tech.html">Tech</a>&raquo;<a href="../../XPCOM.html">XPCOM</a>&raquo;<a href="../Language_Bindings.html">Language_Bindings</a></nav><div class="content-heading"><h1>Components.utils.schedulePreciseGC</h1></div>
<div class="content"><p></p>
<p>This method lets scripts schedule a garbage collection cycle. The garbage collection cycle will occur sometime in the future, when no JavaScript code is executing. This is useful particularly when testing for memory leaks, because normal garbage collection is conservative when JavaScript code is running to ensure that in-use memory isn't inadvertently collected.</p>
<div class="note">
 <strong>Note:</strong> Garbage collection is a very expensive operation and should only be forced when it is <strong>known</strong> to be absolutely necessary.</div>
<p>Requires chrome privileges.</p>
<h2 id="Using_schedulePreciseGC()">Using schedulePreciseGC()</h2>
<p>When you call <code>Components.utils.schedulePreciseGC()</code>, you specify a callback that is executed in once the scheduled garbage collection has been completed:</p>
<pre class="brush: js">Components.utils.schedulePreciseGC(
  function() {
    // This code is executed when the garbage collection has completed
  }
); 
</pre>
<p>Since the garbage collection doesn't occur until some time in the future (unlike, for example, <a href="/en/Components.utils.forceGC" title="en/Components.utils.forceGC"><code>Components.utils.forceGC()</code></a>, which causes garbage collection immediately but isn't able to collect all JavaScript-related memory), the callback lets you know when that's been finished.</p>
<h2 id="See_also">See also</h2>
<ul>
 <li><a href="/en/Components.utils.forceGC" title="en/Components.utils.forceGC"><code>Components.utils.forceGC()</code></a></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIDOMWindowUtils#garbageCollect()">nsIDOMWindowUtils.garbageCollect()</a></code></li>
</ul></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/jryans">jryans</a>, <a href="https://developer.mozilla.org/en-US/profiles/nikhilm">nikhilm</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>.</p></div></body>
</html>
