<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Components.utils.forceGC</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../Tech.html">Tech</a>&raquo;<a href="../../XPCOM.html">XPCOM</a>&raquo;<a href="../Language_Bindings.html">Language_Bindings</a></nav><div class="content-heading"><h1>Components.utils.forceGC</h1></div>
<div class="content"><p>
</p>
<p>
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils">
   Components.utils
  </a>
  .forceGC
 </code>
 lets scripts force a garbage collection cycle. The Mozilla JavaScript engine will perform garbage collection automatically when the JavaScript heap grows beyond a certain size. This mechanism doesn't account for any native (C++) XPCOM objects hanging off JavaScript objects though. In many cases a JavaScript application will have internal knowledge of JavaScript objects referencing large (trees of) XPCOM objects and know when they are no longer reachable. In this case it can be important to be able to force a garbage collection cycle from JavaScript.
</p>
<p>
 Another instance where it can be useful to force garbage collection is before cleaning out dead reference from a hash of weak JavaScript references.
</p>
<p>
 Users should note that garbage collection is a very expensive operation and should only be forced when it is
 <strong>
  known
 </strong>
 to be absolutely necessary.
</p>
<div class="note">
 <strong>
  Note
 </strong>
 :
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindowUtils">
   nsIDOMWindowUtils.garbageCollect()
  </a>
 </code>
 offers similar functionality but will trigger the cycle collector in addition to the garbage collector in the JavaScript engine. This will make sure that XPCOM components that build cycles with JavaScript objects also get collected which might be important, for example for testcases that depend on the garbage collector.
</div>
<p>
 Requires
 <code>
  UniversalXPConnect
 </code>
 privileges.
</p>
<p>
 If you want to schedule garbage collection to occur in the future, at a time when noÂ JavaScript code is running, you can use
 <a href="/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.schedulePreciseGC" title="en/Components.utils.schedulePreciseGC">
  <code>
   Components.utils.schedulePreciseGC()
  </code>
 </a>
 instead.
</p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, <a href="https://developer.mozilla.org/en-US/profiles/Delapouite">Delapouite</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wladimir_Palant">Wladimir_Palant</a>, <a href="https://developer.mozilla.org/en-US/profiles/RoyK">RoyK</a>, <a href="https://developer.mozilla.org/en-US/profiles/Jorend">Jorend</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mgjbot">Mgjbot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Jonathan_Watt">Jonathan_Watt</a>.</p></div></body>
</html>
