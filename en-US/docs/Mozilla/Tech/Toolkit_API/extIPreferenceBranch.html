<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>extIPreferenceBranch</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../Tech.html">Tech</a>&raquo;<a href="../Toolkit_API.html">Toolkit_API</a></nav><div class="content-heading"><h1>extIPreferenceBranch</h1></div>
<div class="content"><p></p>

<p></p><div class="blockIndicator standardNote">
<p>This content covers features introduced in <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Thunderbird/Releases/3">Thunderbird 3</a></p>
</div><p></p>

<p>The <code>extIPreferenceBranch</code> interface provides simplified access to preferences. The interface has a predefined root preference branch. The root branch is set based on the context of the owner. For example, an extension's preferences has a root of "<code>extensions.<em>extensionid</em>.</code>", while the application-level preferences have an empty root. All preference "<code>aName</code>" parameters used in this interface are relative to the root branch. <code>extIPreferenceBranch</code> is defined in <code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/exthelper/extIApplication.idl" rel="custom">toolkit/components/exthelper/extIApplication.idl</a></code>.</p>

<p>Implemented via XPCOM service for <a class="internal" href="/en/Toolkit_API/extIApplication" title="en/Toolkit API/extIApplication"><code>extIApplication</code></a>: see the instructions on the <a class="internal" href="/en/Toolkit_API/FUEL" title="en/FUEL">FUEL</a> (Firefox), <a class="internal" href="/en/Toolkit_API/STEEL" title="en/Thunderbird/STEEL">STEEL</a> (Thunderbird) and <a class="internal" href="/en/Toolkit_API/SMILE" title="en/SeaMonkey/SMILE">SMILE</a> (SeaMonkey) pages.</p>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>boolean <a href="#has.28.29">has</a>(in AString aName)</code></td>
  </tr>
  <tr>
   <td><code><a href="/en/Toolkit_API/extIPreference" title="en/FUEL/Preference">extIPreference</a> <a href="#get.28.29">get</a>(in AString aName)</code></td>
  </tr>
  <tr>
   <td><code>nsIVariant <a href="#getValue.28.29">getValue</a>(in AString aName, in nsIVariant aDefaultValue)</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setValue.28.29">setValue</a>(in AString aName, in nsIVariant aValue)</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#reset.28.29">reset</a>()</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Attributes" name="Attributes">Attributes</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>root</code></td>
   <td><code>readonly attribute AString</code></td>
   <td>The name of the branch root.</td>
  </tr>
  <tr>
   <td><code>all</code></td>
   <td><code>readonly attribute nsIVariant</code></td>
   <td>Array of <code>extIPreference</code> listing all preferences in this branch.</td>
  </tr>
  <tr>
   <td><code>events</code></td>
   <td><code>readonly attribute extIEvents</code></td>
   <td>The events object for the preferences supports: "change"</td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="has.28.29" name="has.28.29">has()</h3>

<p>Check to see if a preference exists.</p>

<pre class="eval">boolean has(in AString aName)
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aName</code></dt>
 <dd>The name of preference</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>true if the preference exists, false if not</p>

<h3 id="get.28.29" name="get.28.29">get()</h3>

<p>Gets an object representing a preference</p>

<pre class="eval">extIPreference get(in AString aName)
</pre>

<h6 id="Parameters_2" name="Parameters_2">Parameters</h6>

<dl>
 <dt><code>aName</code></dt>
 <dd>The name of preference</dd>
</dl>

<h6 id="Return_value_2" name="Return_value_2">Return value</h6>

<p>a preference object, or null if the preference does not exist</p>

<h3 id="getValue.28.29" name="getValue.28.29">getValue()</h3>

<p>Gets the value of a preference. Returns a default value if the preference does not exist.</p>

<pre class="eval">nsIVariant getValue(in AString aName, in nsIVariant aDefaultValue)
</pre>

<h6 id="Parameters_3" name="Parameters_3">Parameters</h6>

<dl>
 <dt><code>aName</code></dt>
 <dd>The name of a preference</dd>
 <dt><code>aDefaultValue</code></dt>
 <dd>The default value of a preference.  This will be passed back to you without any processing and can be something which would not be valid as a preference.  For example, null/undefined/an object.</dd>
</dl>

<h6 id="Return_value_3" name="Return_value_3">Return value</h6>

<p>The value of the preference or the given default value if preference does not exists.  The use of a variant as the return value means that to JavaScript code the value will appear as a value of the same type as is used in the preferences file and no coercion will occur.  A quoted string in the preference file will always appear as a string, even if the value of the string is "true" or "false".  An integer preference appears as a JavaScript Number, and a boolean appears as a JavaScript Boolean.  There are no other types supported by the preference subsystem.</p>

<h3 id="setValue.28.29" name="setValue.28.29">setValue()</h3>

<p>Sets the value of a preference with the given name.</p>

<pre class="eval">void setValue(in AString aName, in nsIVariant aValue)
</pre>

<h6 id="Parameters_4" name="Parameters_4">Parameters</h6>

<dl>
 <dt><code>aName</code></dt>
 <dd>The name of a preference</dd>
 <dt><code>aValue</code></dt>
 <dd>The value of a preference</dd>
</dl>

<h6 id="Return_value_4" name="Return_value_4">Return value</h6>

<p> </p>

<h3 id="reset.28.29" name="reset.28.29">reset()</h3>

<p>Resets all preferences in a branch back to their default values.</p>

<div class="note"><strong>Note:</strong> This function has not been implemented and will raise an exception.  See <a class="__firefox_bugidhelper external" href="http://bugzilla.mozilla.org/show_bug.cgi?id=481044" title="Bug 481044 -- FUEL fuelIPreferenceBranch.reset doesn't work">bug 481044</a></div>

<pre class="eval">void reset()
</pre>

<h6 id="Parameters_5" name="Parameters_5">Parameters</h6>

<h6 id="Return_value_5" name="Return_value_5">Return value</h6>

<h2 id="Examples" name="Examples">Examples</h2>

<pre>var myExt = Application.extensions.get('myapplicationid');

function myFunc (event) {
  Application.console.log('change!');
};

myExt.prefs.get("myprefname").events.addListener("change", myFunc);
</pre>

<h2 id="See_also" name="See_also">See also</h2>

<p> <a class="internal" href="/en/Toolkit_API/FUEL" title="en/FUEL">FUEL</a> (Firefox), <a class="internal" href="/en/Toolkit_API/STEEL" title="en/Thunderbird/STEEL">STEEL</a> (Thunderbird) and <a class="internal" href="/en/Toolkit_API/SMILE" title="en/SeaMonkey/SMILE">SMILE</a> (SeaMonkey)</p>

<h2 id="See_also" name="See_also">Known issues</h2>

<p><a class="link-https" href="https://bugzilla.mozilla.org/show_bug.cgi?id=488587" title="https://bugzilla.mozilla.org/show_bug.cgi?id=488587">Bug 488587</a> - Function registered as FUEL preference listener not always called</p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Clarkbw">Clarkbw</a>, <a href="https://developer.mozilla.org/en-US/profiles/Ruakh">Ruakh</a>, <a href="https://developer.mozilla.org/en-US/profiles/jenzed">jenzed</a>, <a href="https://developer.mozilla.org/en-US/profiles/AndrewSutherland">AndrewSutherland</a>, <a href="https://developer.mozilla.org/en-US/profiles/MarkFinkle">MarkFinkle</a>, <a href="https://developer.mozilla.org/en-US/profiles/SylvainPasche">SylvainPasche</a>, <a href="https://developer.mozilla.org/en-US/profiles/Docwhat">Docwhat</a>, <a href="https://developer.mozilla.org/en-US/profiles/Potappo">Potappo</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mgjbot">Mgjbot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Gomita">Gomita</a>.</p></div></body>
</html>
