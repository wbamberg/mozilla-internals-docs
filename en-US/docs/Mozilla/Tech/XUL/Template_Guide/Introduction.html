<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Introduction</title>
  </head>

  <body><div class="content-heading"><h1>Introduction</h1></div>
<div class="content"><p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL/Template_Guide/Rule_Compilation">Next  »</a></p>
</div> A XUL template is a means of producing a block of content for each result from some query or query-like operation. A good analogy is to the results of a database query. For each result returned from the query, generate some content. The template syntax allows for different rules to generate different content based on particular criteria as well as set attribute values from returned results. Some other systems call this databinding. Effectively, XUL templates are the XUL way of doing databinding.<p></p>
<p>Each template retrieves its data from a datasource. Several types of datasources are supported by default, RDF, XML and SQLite databases, however, processors may be written to support other types of datasources. In XUL, the datasource is specified by placing the <code id="a-datasources"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/datasources">datasources</a></code> attribute on an element. Typically, the value will be a URI that identifies the location of the data. For example, for an XML datasource, the URL of an XML file is specified. When the XUL parser sees an element with this attribute, it constructs a template builder for the element and attaches it to the element. It is expected that there will be a template inside the element. The template builder loads the datasource, performs a query on the datasource and generates content based on the results in combination with the template. The type of datasource is specified with the <code id="a-querytype"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/querytype">querytype</a></code> attribute. The type affects how the datasource is used as well as the syntax for specifying queries.</p>
<p>Content generated by the template is inserted into the XUL just as if you had placed it there yourself. Here is an example:</p>
<pre>&lt;vbox datasources="http://www.xulplanet.com/ds/sample.rdf" querytype="rdf"&gt;
</pre>
<p>This example specifies the datasource '<span class="nowiki">http://www.xulplanet.com/ds/sample.rdf</span>', using the datasource type <code>rdf</code> as indicated by the <code>querytype</code> attribute'.</p>
<p>We'll look at RDF datasources first. The template builder loads an RDF datasource using the RDF service in the same way as you would create a datasource through the RDF service directly. The datasource is loaded via its URL. Some RDF datasources are provided with Mozilla -- their URL's start with 'rdf:'. Otherwise, the datasource is loaded as any other URL is loaded. If the datasource is already loaded and cached, the template builder can begin work right away. Otherwise, there isn't anything to do until the data is loaded. Actually, this isn't quite true. The RDF service starts the loading of the datasource in the background, and the template builder goes through the process of building content anyway. Naturally, since there is no data yet, no results will be available, so the builder ends up building nothing.</p>
<p>Once some data starts arriving, the template builder scans its information to see if some results can be created. If so, some content can be generated. If not, nothing gets generated again. An interesting thing to note is that due to the nature of the RDF parsing process, the builder generates results and builds content incrementally while the data arrives. Of course, since the data arrives so quickly from the network, you really don't notice this. If the datasource is already loaded, the builder can construct content all in one step, although even this isn't completely true as we'll see later.</p>
<p>For XML datasources, use a querytype of <code>xml</code>. The <code>datasources</code> attribute should be the URL of an XML file, which can be either the location of a web site or a file on the local file system, using its file or chrome URL. This file will be loaded and the resulting XML document will be used as the datasource when the template builder generates results and creates content. For example:</p>
<pre>&lt;listbox datasources="http://www.xulplanet.com/ds/sample.xml" querytype="xml"&gt;
  &lt;template&gt;
    &lt;listitem label="?name"/&gt;
  &lt;/template&gt;
&lt;/listbox&gt;
</pre>
<p>This template uses an XML datasource to generate a <code><a href="/en-US/docs/Mozilla/Tech/XUL/listbox" title="listbox">listbox</a></code>. Although we'll look at the details of this later, the simple result here is that a <code><a href="/en-US/docs/Mozilla/Tech/XUL/listitem" title="listitem">listitem</a></code> will be generated for each child node in the XML data, setting the label to the name attribute for each XML node.</p>
<p>For SQLite datasources, the <code>datasources</code> attribute specifies the URI of a database file. Only local files are supported, so a file URL should be used.</p>
<p>If the datasource type supports it, the template builder can also use multiple datasources which are all combined into a single datasource as if they were all in one datasource to begin with. Only the built-in RDF type supports this mechanism; the XML and SQLite types do not. When multiple datasources are used, an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIRDFCompositeDataSource" title="">nsIRDFCompositeDataSource</a></code> is created to hold all of the datasources. You can get this composite datasource in a script by using an element's 'database' property if you want to add or remove datasources from it.</p>
<p>When multiple datasources are used, the RDF is combined as if it were one large datasource. That means that a template query can grab data from anywhere in all of the datasources. This combining of datasources is often termed 'aggregation'. This can be quite a useful feature and works regardless of the datasource. For instance, you might use the built-in bookmarks datasource which holds the user's browser bookmarks and use your own datasource to add custom data about those bookmarks.</p>
<pre>&lt;vbox datasources="rdf:bookmarks http://www.xulplanet.com/ds/sample.rdf"&gt;
</pre>
<p>In addition, when using the RDF type for chrome XUL (such as in extensions), the datasource rdf:local-store is always included in the composite. The local store is a datasource which is usually used to hold state information such as window sizes, which columns in a tree are showing, and which tree items are open. You can query for any data in the local store in a template though this is rarely done.</p>
<p>Sometimes, you will want to specify the datasource to be used later, possibly determined dynamically by a script. The special URI rdf:null is used to indicate that you intend no datasources, or an empty datasource. This special URI will also work even for non-RDF types, so feel free to use it when needed. It effectively means, use no datasource for this template, which will likely result in no output being generated.</p>
<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL/Template_Guide/Rule_Compilation">Next  »</a></p>
</div><p></p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Brettz9">Brettz9</a>, <a href="https://developer.mozilla.org/en-US/profiles/Enn">Enn</a>, <a href="https://developer.mozilla.org/en-US/profiles/Bektur">Bektur</a>, <a href="https://developer.mozilla.org/en-US/profiles/Prodizy">Prodizy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mole">Mole</a>.</p></div></body>
</html>
