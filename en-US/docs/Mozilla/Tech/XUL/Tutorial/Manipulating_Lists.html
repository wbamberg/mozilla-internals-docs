<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Manipulating Lists</title>
  </head>

  <body><div class="content-heading"><h1>Manipulating Lists</h1></div>
<div class="content"><p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial/Modifying_a_XUL_Interface" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial/Box_Objects">Next  »</a></p>
</div><p></p>

<p>The XUL listbox provides a number of specialized methods.</p>

<h3 id="List_Manipulation" name="List_Manipulation">List Manipulation</h3>

<p>The <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/listbox" title="listbox">listbox</a></code></code> element provides numerous methods to retrieve and manipulate its items. Although <a href="/en/XUL_Tutorial/List_Controls" title="en/XUL_Tutorial/List_Controls">listboxes</a> may be manipulated using the standard <a href="/en/DOM" title="en/DOM">DOM</a> functions as well, it is recommended that the specialized listbox functions be used instead when possible. These functions are bit simpler and will do the right thing.</p>

<p>The <code><span id="m-appendItem"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/appendItem">appendItem()</a></code></span></code> function is used to append a new item to the end a list. Similar to the <a href="/En/DOM/Node.appendChild" title="En/DOM/Node.appendChild">DOM appendChild()</a> function except that it takes a string label, and you do not have to worry about where to add it in the list structure. Here is an example:</p>

<p><span id="Example_1"><a id="Example_1"></a><strong>Example 1</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_1.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_1.xul">View</a></p>

<pre>&lt;script&gt;
function addItem(){
  document.getElementById('thelist').appendItem("Thursday", "thu");
}
&lt;/script&gt;

&lt;listbox id="thelist"/&gt;

&lt;button label="Add" oncommand="addItem();"/&gt;
</pre>

<p>The <code><span id="m-appendItem"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/appendItem">appendItem()</a></code></span></code> takes two arguments, the <code>label</code>, in this case 'Thursday', and a <code>value</code> 'thu'. The two arguments correspond to the <code><code id="a-label"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/label">label</a></code></code> attribute and the <code><code id="a-value"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/value">value</a></code></code> attribute on the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/listitem" title="listitem">listitem</a></code></code> element. The value is used only as an extra optional value associated with an item which you might wish to use in a script.</p>

<p>Similarly, there is also an <code><span id="m-insertItemAt"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/insertItemAt">insertItemAt()</a></code></span></code> and a <code><span id="m-removeItemAt"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/removeItemAt">removeItemAt()</a></code></span></code> function which inserts a new item and removes an existing item respectively. The syntax is as follows:</p>

<pre>list.insertItemAt(3, "Thursday", "thu");
list.removeItemAt(3);
</pre>

<p>The <code><span id="m-insertItemAt"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/insertItemAt">insertItemAt()</a></code></span></code> function takes an additional argument, the position to insert the new item. The new item is inserted at this index, so, in the example, the new item will be added at position 3 while the item previously at that position will now be at position 4. Remember that the first item is 0. The <code><span id="m-removeItemAt"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/removeItemAt">removeItemAt()</a></code></span></code> function will remove the item at a specific index.</p>

<p>These three methods are also available for several other XUL elements and work in the same manner. In fact, these methods are part of the <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMXULSelectControlElement" title="">nsIDOMXULSelectControlElement</a></code> interface so any XUL elements which implement this interface have these methods. This includes the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menulist" title="menulist">menulist</a></code></code>, <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/radiogroup" title="radiogroup">radiogroup</a></code></code> and <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tabs" title="tabs">tabs</a></code></code> elements. For example, to add a new item to a <a href="/en/XUL_Tutorial/Simple_Menu_Bars" title="en/XUL_Tutorial/Simple_Menu_Bars">menulist</a>, you can use the same syntax as for a <a href="/en/XUL_Tutorial/List_Controls" title="en/XUL_Tutorial/List_Controls">listbox</a>. The right kind of element will be appended in each situation.</p>

<h3 id="List_Selection" name="List_Selection">List Selection</h3>

<p>The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMXULSelectControlElement" title="">nsIDOMXULSelectControlElement</a></code> interface provides two additonal properties, <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedIndex">selectedIndex</a></span></code></code> and <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedItem">selectedItem</a></span></code></code>. The former returns the index of the selected item while the latter returns the selected element. For instance the selectedItem of a menulist will be the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menuitem" title="menuitem">menuitem</a></code></code> that is selected. If no item is selected, <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedIndex">selectedIndex</a></span></code></code> will return -1, while <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedItem">selectedItem</a></span></code></code> will return null.</p>

<h4 id="Getting_the_selected_item" name="Getting_the_selected_item">Getting the selected item</h4>

<p>These two properties are commonly inspected during a select event, as in the following example:</p>

<p><span id="Example_2"><a id="Example_2"></a><strong>Example 2</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_2.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_2.xul">View</a></p>

<pre>&lt;listbox id="thelist" onselect="alert(this.selectedItem.label);"&gt;
  &lt;listitem label="Short"/&gt;
  &lt;listitem label="Medium"/&gt;
  &lt;listitem label="Tall"/&gt;
&lt;/listbox&gt;
</pre>

<p>The select event is fired for a <code><a href="/en-US/docs/Mozilla/Tech/XUL/listbox" title="listbox">listbox</a></code> when an item in the list is selected. The select handler here displays an alert containing the label of the selected item in the list. Since the select event fired we can assume that an item is selected. In other cases, you may wish to check to ensure that selectedItem is not null before continuing.</p>

<p>The select event is also fired when a radio button in a <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/radiogroup" title="radiogroup">radiogroup</a></code></code> is selected and when a tab is selected in a <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tabs" title="tabs">tabs</a></code></code> element. However, <code><a href="/en/XUL/menulist" title="en/XUL/menulist">menulists</a></code> do not fire the select event; instead you can listen to the command event to handle when an item is selected.</p>

<p>For the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tabs" title="tabs">tabs</a></code></code> element, it is often more convenient to use functions of the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tabbox" title="tabbox">tabbox</a></code></code> element instead. It also has a <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedIndex">selectedIndex</a></span></code></code> function which will return the index of the selected tab. However, to get the selected item, use the tabbox's <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedTab">selectedTab</a></span></code></code> property instead. Or, use the <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedPanel">selectedPanel</a></span></code></code> property to get the selected panel, that is, return the content associated with the <code><a href="/en-US/docs/Mozilla/Tech/XUL/tab" title="tab">tab</a></code>.</p>

<h4 id="Changing_the_selection" name="Changing_the_selection">Changing the selection</h4>

<p>All of the selection related properties described above may also be assigned a new value to change the selection. In the next example, the <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedIndex">selectedIndex</a></span></code></code> property of a <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/radiogroup" title="radiogroup">radiogroup</a></code></code> element is changed based on the value entered in a textbox. This code isn't foolproof though; for example it doesn't check if the value entered is out of range. You will want to make sure that you add this kind of error checking.</p>

<p><span id="Example_3"><a id="Example_3"></a><strong>Example 3</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_3.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_3.xul">View</a></p>

<pre>&lt;script&gt;
function doSelect(){
  var val = document.getElementById('number').value;
  val = Number(val);
  if (val != null)
    document.getElementById('level').selectedIndex = val - 1;
}
&lt;/script&gt;

&lt;hbox align="center"&gt;
  &lt;label value="Enter a number from 1 to 3:"/&gt;
  &lt;textbox id="number"/&gt;
  &lt;button label="Select" oncommand="doSelect();"/&gt;
&lt;/hbox&gt;

&lt;radiogroup id="level"&gt;
  &lt;radio label="Excellent"/&gt;
  &lt;radio label="Good"/&gt;
  &lt;radio label="Poor"/&gt;
&lt;/radiogroup&gt;
</pre>

<p>Listboxes also support multiple selection and the functions of the <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMXULMultiSelectControlElement" title="">nsIDOMXULMultiSelectControlElement</a></code> interface. This interface provides a number of functions specifically for handling multiple selection. For example the <code><code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedItems">selectedItems</a></span></code></code> property holds a list of the items that are selected, while the <code><span><a href="https://developer.mozilla.org/en-US/docs/XUL/Property/selectedCount">selectedCount</a></span></code> property holds the number of items selected. Typically, you will use these properties to iterate over the list and perform some operation for each item. Be careful when iterating over the selected items; if you modify the items in the list while iterating, the list will change and the selection properties may return different values. This is one reason why it is useful to manipulate the list by the item rather than by index.</p>

<h4 id="Deleting_selected_items" name="Deleting_selected_items">Deleting selected items</h4>

<p>The following example shows a method of deleting the selected items properly:</p>

<p><span id="Example_4"><a id="Example_4"></a><strong>Example 4</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_4.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_4.xul">View</a></p>

<pre>&lt;script&gt;
function deleteSelection(){
  var list = document.getElementById('thelist');
  var count = list.selectedCount;
  while (count--){
    var item = list.selectedItems[0];
    list.removeItemAt(list.getIndexOfItem(item));
  }
}
&lt;/script&gt;

&lt;button label="Delete" oncommand="deleteSelection();"/&gt;

&lt;listbox id="thelist" seltype="multiple"&gt;
  &lt;listitem label="Cheddar"/&gt;
  &lt;listitem label="Cheshire"/&gt;
  &lt;listitem label="Edam"/&gt;
  &lt;listitem label="Gouda"/&gt;
  &lt;listitem label="Havartie"/&gt;
&lt;/listbox&gt;
</pre>

<p>Inside the while loop we</p>

<ul>
 <li>first get the selectedItem at index 0. The first selected item is always retrieved as the size of the array will decrease as the items are removed.</li>
 <li>Next, we remove the item using the <code><span id="m-removeItemAt"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/removeItemAt">removeItemAt()</a></code></span></code> function. Since this function requires an index</li>
 <li>we can convert between an item and an index using the <code><span id="m-getIndexOfItem"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/getIndexOfItem">getIndexOfItem()</a></code></span></code> function. There is also a corresponding <code><span id="m-getItemAtIndex"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/getItemAtIndex">getItemAtIndex()</a></code></span></code> function to do the reverse.</li>
</ul>

<p>The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMXULMultiSelectControlElement" title="">nsIDOMXULMultiSelectControlElement</a></code> interface also provides methods for modifying the selected items. For instance, the <code><span id="m-addItemToSelection"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/addItemToSelection">addItemToSelection()</a></code></span></code> function adds a new item to the set of selected items, without clearing the existing selection. The <code><span id="m-removeItemFromSelection"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/removeItemFromSelection">removeItemFromSelection()</a></code></span></code> function removes a single item from the selection.</p>

<h3 id="List_Scrolling" name="List_Scrolling">List Scrolling</h3>

<p>If there are more rows in the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/listbox" title="listbox">listbox</a></code></code> than can be displayed, a scroll bar will appear to allow the user to scroll the list. The scroll position may be adjusted using a couple of listbox methods.</p>

<p>The <code><span id="m-scrollToIndex"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/scrollToIndex">scrollToIndex()</a></code></span></code> method scrolls to a given row. This listbox will scroll such that the row will be the top row visible, unless the row is near the end of the list of items. The <code><span id="m-ensureIndexIsVisible"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/ensureIndexIsVisible">ensureIndexIsVisible()</a></code></span></code> method is similar in that it also scrolls to show a row, but this method does not scroll if the item is already visible. Thus, the former function is used to scroll to a specific row while the latter is used just to make sure that a row is visible. There is also an <code><span id="m-ensureIndexIsVisible"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/ensureIndexIsVisible">ensureIndexIsVisible()</a></code></span></code> that takes an item as an argument instead of an index. Compare the effect of both functions at different scroll positions in this example:</p>

<p><span id="Example_5"><a id="Example_5"></a><strong>Example 5</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_5.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_domlists_5.xul">View</a></p>

<pre>&lt;button label="scrollToIndex"
           oncommand="document.getElementById('thelist').scrollToIndex(4);"/&gt;
&lt;button label="ensureIndexIsVisible"
           oncommand="document.getElementById('thelist').ensureIndexIsVisible(4);"/&gt;

&lt;listbox id="thelist" rows="5"&gt;
  &lt;listitem label="1"/&gt;
  &lt;listitem label="2"/&gt;
  &lt;listitem label="3"/&gt;
  &lt;listitem label="4"/&gt;
  &lt;listitem label="5"/&gt;
  &lt;listitem label="6"/&gt;
  &lt;listitem label="7"/&gt;
  &lt;listitem label="8"/&gt;
  &lt;listitem label="9"/&gt;
  &lt;listitem label="10"/&gt;
  &lt;listitem label="11"/&gt;
  &lt;listitem label="12"/&gt;
&lt;/listbox&gt;
</pre>

<p>Next, we'll look at <a href="/en/XUL_Tutorial/Box_Objects" title="en/XUL_Tutorial/Box_Objects">XUL box objects</a>.</p>

<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial/Modifying_a_XUL_Interface" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial/Box_Objects">Next  »</a></p>
</div><p></p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mixticius">Mixticius</a>, <a href="https://developer.mozilla.org/en-US/profiles/Chbok">Chbok</a>, <a href="https://developer.mozilla.org/en-US/profiles/Nathymig">Nathymig</a>, <a href="https://developer.mozilla.org/en-US/profiles/Morishoji">Morishoji</a>, <a href="https://developer.mozilla.org/en-US/profiles/Jjinux">Jjinux</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mgjbot">Mgjbot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Pmash">Pmash</a>, <a href="https://developer.mozilla.org/en-US/profiles/Ptak82">Ptak82</a>, <a href="https://developer.mozilla.org/en-US/profiles/Dria">Dria</a>.</p></div></body>
</html>
