<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Persistent Data</title>
  </head>

  <body><div class="content-heading"><h1>Persistent Data</h1></div>
<div class="content"><p> </p>
<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial:Advanced_Rules" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial:Adding_Style_Sheets">Next  »</a></p>
</div><p></p>
<p>This section describes how to save the state of a XUL window.</p>
<h3 id="Remembering_State" name="Remembering_State">Remembering State</h3>
<p>When building a large application, you will typically want to be able to save some of the state of a window across sessions. For example, the window should remember which toolbars are collapsed even after the user exits.</p>
<p>One possibility would be to write a script to collect information about what you would like to save and then save it to a file. However, that would be a pain to do for every application. Conveniently, XUL provides such a mechanism to save the state of a window.</p>
<p>The information is collected and stored in a RDF file (localstore.rdf) in the same directory as other user preferences. It holds state information about each window. This method has the advantage that it works with Mozilla user profiles, so that each user can have different settings.</p>
<p>XUL allows you to save the state of any element. You will typically want to save toolbar states, window positions and whether certain panels are displayed or not, but you can save almost anything.</p>
<h4 id="persist_attribute" name="persist_attribute"><code>persist</code> attribute</h4>
<p>To allow the saving of state, you simply add a <code>persist</code> attribute to the element which holds a value you want to save. The <code><code id="a-persist"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/persist">persist</a></code></code> attribute should be set to a space-separated list of attributes of the element that you want to save. The element must also have an <code><code id="a-id"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/id">id</a></code></code> attribute in order to identify it.</p>
<p>For example, to save the size of a window, you would do the following:</p>
<pre>&lt;window
  id="someWindow"
  width="200"
  height="300"
  persist="width height"
  .
  .
  .
</pre>
<p>The two attributes of the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/window" title="window">window</a></code></code> element, the <code><code id="a-width"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/width">width</a></code></code> and the <code><code id="a-height"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/height">height</a></code></code> will be saved. You could add additional attributes by adding a space and another attribute name to the <code><code id="a-persist"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/persist">persist</a></code></code> attribute. You can add the <code><code id="a-persist"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/persist">persist</a></code></code> attribute to any element and store any attribute. You might use unusual values if you adjust attributes using a script.</p>
<h4 id="Our_Find_Files_Example" name="Our_Find_Files_Example">Our Find Files Example</h4>
<div class="highlight">
  <p>Let's add the persist attribute to some of the elements in the find files dialog. To save the position of the window. To do this, we need to modify the window.</p>
  <pre class="eval">&lt;window
  id="findfile-window"
  title="Find Files"
  <span class="highlightred">persist="screenX screenY width height"</span>
  orient="horizontal"
  xmlns="<span class="nowiki">http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul</span>"&gt;
</pre>
  <p>This will cause the x and y position of the window and the width and height of the window to be saved. We could extend it further to save the collapsed state of the splitter. It doesn't really make sense to save the current tab state.</p>
  <p><span id="Find_files_example_so_far"><a id="Find_files_example_so_far"></a><strong>Find files example so far</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/findfile/findfile-persist.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/findfile/findfile-persist.xul">View</a></p>
</div>
<p>Next, we'll look at using style sheets with XUL files.</p>
<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial:Advanced_Rules" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial:Adding_Style_Sheets">Next  »</a></p>
</div><p></p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/teoli">teoli</a>, <a href="https://developer.mozilla.org/en-US/profiles/fscholz">fscholz</a>, <a href="https://developer.mozilla.org/en-US/profiles/Chbok">Chbok</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mgjbot">Mgjbot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Morishoji">Morishoji</a>, <a href="https://developer.mozilla.org/en-US/profiles/Jjinux">Jjinux</a>, <a href="https://developer.mozilla.org/en-US/profiles/Pmash">Pmash</a>, <a href="https://developer.mozilla.org/en-US/profiles/Ptak82">Ptak82</a>, <a href="https://developer.mozilla.org/en-US/profiles/Dria">Dria</a>.</p></div></body>
</html>
