<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Panels</title>
  </head>

  <body><nav class="breadcrumbs"><a href="../../../../Mozilla.html">Mozilla</a>&raquo;<a href="../../../Tech.html">Tech</a>&raquo;<a href="../../XUL.html">XUL</a>&raquo;<a href="../PopupGuide.html">PopupGuide</a></nav><div class="content-heading"><h1>Panels</h1></div>
<div class="content"><p>
</p>
<p>
 A panel is a popup which can support any type of content. It is used when supporting temporary popup displays for selecting or entering data.
</p>
<h2 id="The_panel_element">
 The panel element
</h2>
<p>
 The
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XUL/panel" title="panel">
   panel
  </a>
 </code>
 element is used to create panels. The panel will display whatever elements are placed as children of the panel element. For example, the following panel displays a textbox for entering a name. Note that the panel is not placed in a separate file and is instead placed inside another window.
</p>
<pre>&lt;?xml-stylesheet href="chrome://global/skin" type="text/css"?&gt;
&lt;window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;

&lt;button label="Details" type="panel"&gt;
  &lt;panel id="search-panel"&gt;
    &lt;label control="name" value="Name:"/&gt;
    &lt;textbox id="name"/&gt;
  &lt;/panel&gt;
&lt;/button&gt;

&lt;/window&gt;
</pre>
<p>
 Many panels will be associated with a button, as in this example. When the button is pressed, the panel is opened. Clicking outside the panel or pressing Escape will close the panel. You can also place a close button in the panel which will close the panel with a script if desired. When you want to associate a panel with a button, place the &lt;panel&gt; element directly inside the
 <code>
  <a href="/en-US/docs/Mozilla/Tech/XUL/button" title="button">
   button
  </a>
 </code>
 element. You also need to set the
 <code>
  type
 </code>
 attribute on the button to the value
 <code>
  panel
 </code>
 , or the button will look and behave like a regular button.
</p>
<p>
 The popup panel will, by default, appear with its topleft corner just underneath the bottom edge of the button, much as a menu does. The position can, however, be changed. For more information about positioning the popup, see
 <a href="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/Positioning" title="en/XUL/PopupGuide/Positioning">
  Positioning Popups
 </a>
 .
</p>
<p>
 Only buttons (and toolbarbuttons) have this automatic behaviour which opens the popup when pressed. For other types of elements, you need to use a different technique as in the following example.
</p>
<pre>&lt;label value="Search" popup="search-panel"/&gt;

&lt;panel id="search-panel"&gt;
  &lt;label control="search" value="Terms:"/&gt;
  &lt;textbox id="search"/&gt;
&lt;/panel&gt;
</pre>
<p>
 <img alt="Image:Popupguide-panel.png" class="internal" src="/@api/deki/files/304/=Popupguide-panel.png"/>
</p>
<p>
 To attach a panel to an non-button element, for instance to have a panel open when a label is clicked, use the
 <code id="a-popup">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">
   popup
  </a>
 </code>
 attribute. The popup attribute should be set to the id of a panel within the same document. When the left mouse button is pressed on the element with the
 <code id="a-popup">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">
   popup
  </a>
 </code>
 attribute, the corresponding panel will be displayed. For instance, to attach the popup defined above to a label, use the following code:
</p>
<pre>&lt;label value="Search" popup="search-panel"/&gt;
</pre>
<p>
 The result is a search button which opens a panel for entering the search term. When using the
 <code id="a-popup">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">
   popup
  </a>
 </code>
 attribute, the panel will appear with the top left corner at the mouse position. In this case, you may wish to have the popup appear below the label instead. The
 <code id="a-position">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/position">
   position
  </a>
 </code>
 attribute may be used to control the placement of the popup. Here is a complete example:
</p>
<pre>&lt;panel id="search-panel" position="after_start"&gt;
  &lt;label control="search" value="Terms:"/&gt;
  &lt;textbox id="search"/&gt;
&lt;/panel&gt;

&lt;label value="Search" popup="search-panel"/&gt;
</pre>
<p>
 The
 <code id="a-position">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/position">
   position
  </a>
 </code>
 attribute has been added to the panel element with the value 'after_start'. This causes the panel to be displayed not where the mouse was clicked but aligned along the bottom edge of the label. For more information about this attribute and other possible values that can be used, see
 <a href="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/Positioning" title="en/XUL/PopupGuide/Positioning">
  Positioning Popups
 </a>
 .
</p>
<p>
 It is also possible to open a panel like a context menu using the
 <code id="a-context">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/context">
   context
  </a>
 </code>
 attribute instead of the popup attribute. This works just like using context menus except that the panel element is used instead of the menupopup element. See
 <a href="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/ContextMenus" title="en/XUL/PopupGuide/ContextMenus">
  Context Menus
 </a>
 for more details on this.
</p>
<h2 id="Opening_a_panel_with_script">
 Opening a panel with script
</h2>
<p>
 The panel, like all popups, has an
 <span id="m-openPopup">
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XUL/Method/openPopup">
    openPopup
   </a>
  </code>
 </span>
 method which may be used to open the popup using a script. For example, the following would open a panel underneath a button:
</p>
<pre>panel.openPopup(button, "after_start", 0, 0, false, false);
</pre>
<p>
 Likewise, the
 <span id="m-openPopupAtScreen">
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XUL/Method/openPopupAtScreen">
    openPopupAtScreen
   </a>
  </code>
 </span>
 method will open a panel at a specific screen position. For more details about both methods, see
 <a href="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/OpenClose" title="en/XUL/PopupGuide/OpenClose">
  Opening and Closing Popups
 </a>
 .
</p>
<h2 id="Closing_a_panel">
 Closing a panel
</h2>
<p>
 A panel is closed automatically when the user clicks outside of the panel. It is quite common however, to have an element such as a button within the panel to close it as well. For instance, using the search panel example above, we could add a button which closes the panel when pressed:
</p>
<pre>&lt;script&gt;
function doSearch() {
  document.getElementById("search-panel").hidePopup();
}
&lt;/script&gt;

&lt;toolbarbutton label="Search" type="panel"&gt;
  &lt;panel id="search-panel" position="after_start"&gt;
    &lt;textbox id="search"/&gt;
    &lt;button label="Search" oncommand="doSearch();"/&gt;
  &lt;/panel&gt;
&lt;/toolbarbutton&gt;
</pre>
<p>
 In this example, the
 <code>
  doSearch()
 </code>
 function is called when the "Search" button is pressed. This function retrieves the popup and calls the
 <span id="m-hidePopup">
  <code>
   <a href="/en-US/docs/Mozilla/Tech/XUL/Method/hidePopup">
    hidePopup
   </a>
  </code>
 </span>
 method. Naturally, this function would also include code to start the search operation.
</p>
<h3 id="Preventing_panels_from_automatically_closing">
 Preventing panels from automatically closing
</h3>
<p>
 A panel will be closed when a user clicks outside of the panel or when the escape key is pressed. This is the normal way in which a user would cancel the operation. You may wish to also place a cancel or close button within the panel, especially if the panel is larger with a lot of controls within it.
</p>
<p>
 Sometimes, however, you may wish to keep the panel open, even if the user clicks outside of it. This is useful when creating floating tool panels. To do this, set the
 <code id="a-noautohide">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/noautohide">
   noautohide
  </a>
 </code>
 attribute on the panel to true.
</p>
<pre>&lt;panel id="search-panel" noautohide="true"&gt;
  &lt;textbox id="search"/&gt;
  &lt;button label="Search" oncommand="doSearch();"/&gt;
  &lt;button label="Cancel" oncommand="this.parentNode.hidePopup();"/&gt;
&lt;/panel&gt;
</pre>
<p>
 Because the panel can no longer be closed by clicking elsewhere, the panel should always provide a means to close the panel itself. In this example a cancel button has been added.
</p>
<p>
 For more information about these types of panels, see
 <a href="/en-US/docs/Mozilla/Tech/XUL/PopupGuide/Floating_Panels" title="en/XUL/PopupGuide/Floating_Panels">
  Floating Panels
 </a>
 .
</p>
<h2 id="Focus_in_panels">
 Focus in panels
</h2>
<p>
 Elements within panels may be focused with the mouse, and the currently focused element may be adjusted by pressing the Tab key. When a popup is opened, if an element in the main window is focused, that element is unfocused, and a
 <code>
  blur
 </code>
 event is fired at it. Although no element within the popup panel is focused by default, the user may focus the first element within the panel by pressing the Tab key. If you want to set the focus to an element by default when a panel is opened, adjust the focus within a
 <code>
  popupshown
 </code>
 event handler. For instance, to have the textbox initially focused in the example above:
</p>
<pre>&lt;panel id="search-panel" onpopupshown="document.getElementById('search').focus()"&gt;
</pre>
<p>
 To disable the adjusting of focus when a panel is opened, set the
 <code id="a-noautofocus">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/noautofocus">
   noautofocus
  </a>
 </code>
 attribute to
 <code>
  true
 </code>
 :
</p>
<pre>&lt;panel noautofocus="true"&gt;
</pre>
<p>
 This will cause the focus to remain on the element within the main window that has focus when the panel is opened. Note that this will also keep the focus within the panel when it is closed.
</p>
<p>
 When a panel is closed, the focus is removed from the element within the panel which has the focus event, if any, and whatever element was focused before the panel was opened is refocused. You can prevent the focus from being removed by setting the
 <code id="a-noautofocus">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/noautofocus">
   noautofocus
  </a>
 </code>
 attribute to
 <code>
  true
 </code>
 as above. In addition, the
 <code id="a-norestorefocus">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/norestorefocus">
   norestorefocus
  </a>
 </code>
 attribute should be set to
 <code>
  true
 </code>
 in order to prevent the previously focused element from being refocused. Normally, only the latter would be set if needed.
</p>
<p>
 This process of removing the focus when opening and closing a popup occurs after the
 <code>
  popupshowing
 </code>
 event or
 <code>
  popuphiding
 </code>
 event is fired, which means that if those events are cancelled, the focus is not adjusted.
</p>
<p>
</p>
<div class="headingWithIndicator">
 <h1 id="Letting_panels_be_dragged_by_grabbing_the_background">
  Letting panels be dragged by grabbing the background
 </h1>
 <span class="indicatorInHeadline minVer geckoMinVerMethod">
  Requires Gecko 7.0(Firefox 7.0 / Thunderbird 7.0 / SeaMonkey 2.4)
 </span>
</div>
<p>
</p>
<p>
 Starting in Gecko 7.0 (Firefox 7.0 / Thunderbird 7.0 / SeaMonkey 2.4), you can use the
 <code id="a-backdrag">
  <a href="/en-US/docs/Mozilla/Tech/XUL/Attribute/backdrag">
   backdrag
  </a>
 </code>
 attribute to create panels that the user can drag by clicking and dragging anywhere on their backgrounds. This is a simple, Boolean attribute, so you can enable this feature like this:
</p>
<pre>&lt;panel backdrag="true"&gt;</pre></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/madarche">madarche</a>, <a href="https://developer.mozilla.org/en-US/profiles/Enn">Enn</a>, <a href="https://developer.mozilla.org/en-US/profiles/Standard8">Standard8</a>, <a href="https://developer.mozilla.org/en-US/profiles/SylvainPasche">SylvainPasche</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mgjbot">Mgjbot</a>, <a href="https://developer.mozilla.org/en-US/profiles/Shoot">Shoot</a>.</p></div></body>
</html>
