<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Positioning</title>
  </head>

  <body><div class="content-heading"><h1>Positioning</h1></div>
<div class="content"><h3 id="Positioning_Popups" name="Positioning_Popups">Positioning Popups</h3>

<p>There are several ways in which the location of a popup on screen may be controlled.</p>

<h4 id="Default_Positioning_of_Popups" name="Default_Positioning_of_Popups">Default Positioning of Popups</h4>

<p>A top level menu popup is, by default, placed with the upper edge of the popup flush with the lower edge of the menu or button it is associated with. Horizontally, the left edge of the menu popup is aligned with the left edge of the menu or button.</p>

<p>A submenu, however, is placed by default to the right of the parent menu item, such that the top edge of the menu is aligned with the top edge of the parent menu item. However, the submenu will appear to the left instead for right to left locales.</p>

<p>For both top level menus and submenus, they may appear above or to the left instead of their usual placement if there is not enough room to display the menu at full size below or to the right. If there is not enough room on either side, the menu will be shrunk down to fit.</p>

<p>For popups attached using the <code id="a-popup"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">popup</a></code> or <code id="a-context"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/context">context</a></code> attributes, the default position to appear is with the upper left corner (or upper right corner in right to left locales) at the position where the mouse was clicked. Context menus will appear offset down and to the right a couple of pixels so that the menu can be dismissed again just by clicking in the same place. If a context menu was opened via the keyboard only, the menu will appear at the top left corner of the document, or underneath the currently selected item if a list is focused.  Context menus will always appear in this location, and not respect any position attribute value.</p>

<p>Tooltips will always appear near the current mouse position, offset vertically by a small amount.</p>

<h4 id="The_position_attribute" name="The_position_attribute">The position attribute</h4>

<p>The position of all types of popups can be controlled in two ways. First, the position can be specified when using the popup's <span id="m-openPopup"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/openPopup">openPopup</a></code></span> method. This is used when a popup is opened by a script. Second, the position can be specified using several attributes placed on the menupopup, panel or tooltip element. These attributes are described below and function the same for all three elements.</p>

<p>The <code id="a-position"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/position">position</a></code> attribute specifies the alignment of the popup with respect to the element that the popup is attached to.</p>

<ul>
 <li>for a menupopup placed inside a menu, button or toolbarbutton, the position attribute controls how the menupopup is anchored to the parent menu, button or toolbarbutton.</li>
 <li>for a menupopup or panel attached using the <code id="a-popup"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">popup</a></code> attribute, the <code>position</code> attribute controls how the popup is anchored to the element with the <code>popup</code> attribute.</li>
 <li>for a context menu, that is, a menu that is attached to an an element using the <code id="a-context"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/context">context</a></code> attribute and opened via context-clicking the mouse, the <code>position</code> attribute is ignored. The menu appears at the mouse position offset by a couple of pixels so that the user can close the context menu just by clicking in the same location.</li>
 <li>for a tooltip, the <code>position</code> attribute controls how the tooltip is anchored to the element with the <code id="a-tooltip"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/tooltip">tooltip</a></code> attribute. You wouldn't normally use the <code>position</code> attribute on a tooltip; instead you would just want the tooltip to appear at its default position which is near the mouse pointer.</li>
</ul>

<p>For instance:</p>

<pre>&lt;menupopup id="editItems" position="end_before"&gt;
  &lt;menuitem label="Cut"/&gt;
  &lt;menuitem label="Copy"/&gt;
  &lt;menuitem label="Paste"/&gt;
&lt;/menupopup&gt;

&lt;label value="Clipboard" popup="editItems"/&gt;
</pre>

<p>In this example, a menupopup is attached to a label via the <code id="a-popup"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">popup</a></code> attribute, which will cause the popup to appear when the label is left-clicked. The position attribute is used to specify that the popup should appear at the 'end_before' location, which will cause the popup to appear to the right of the label aligned along the top edge. There are several possible values for the position attribute, described here, along with images which show how a popup would be aligned in each case.</p>

<p>The following assumes a left to right user interface. For right to left user interfaces, the same values should be used, but will cause the popup to appear and be aligned on the opposite side.</p>

<p>The position attribute can be specified either as a single word offering pre-defined alignment positions, or as 2 words specifying exactly which part of the popup and associated element should be aligned.</p>

<h5 id="Explicit_Alignment_Values">Explicit Alignment Values</h5>

<p>If specified as 2 words there must be exactly 1 space between the 2 words and indicates which corner or edge of the anchor is aligned with which corner of the popup.  The first word specifies the anchor corner/edge and the second species the popup corner.  Valid values for the anchor alignment (ie, the first word) are shown below</p>

<table>
 <thead>
  <tr>
   <th scope="col">Anchor Alignment Values</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code><strong>topleft</strong></code>
    <p>The popup will be aligned with the upper-left corner of the anchor.</p>

    <p><code><strong>topright</strong></code></p>

    <p>The popup will be aligned with the upper-right corner of the anchor.</p>

    <p><code><strong>bottomleft</strong></code></p>

    <p>The popup will be aligned with the lower-left corner of the anchor.<br>
     <br>
     <code><strong>bottomright</strong></code></p>

    <p>The popup will be aligned with the bottom-right corner of the anchor.<br>
     <br>
     <code><strong>leftcenter</strong></code></p>

    <p>The popup will be aligned with the center of the left-hand edge of the anchor.<br>
     <br>
     <code><strong>rightcenter</strong></code></p>

    <p>The popup will be aligned with the center of the right-hand edge of the anchor.<br>
     <br>
     <code><strong>topcenter</strong></code></p>

    <p>The popup will be aligned with the center of the top edge the anchor.<br>
     <br>
     <code><strong>bottomcenter</strong></code></p>

    <p>The popup will be aligned with the center of the bottom edge the anchor.</p>
   </td>
  </tr>
 </tbody>
</table>

<p>Valid values for the popup alignment (ie, the second word) are shown below</p>

<table>
 <thead>
  <tr>
   <th scope="col">Popup Alignment Values</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>
    <p><code><strong>topleft</strong></code></p>

    <p>The top-left corner of the popup will be aligned with the specified corner or edge of the anchor element.<br>
     <br>
     <code><strong>topright</strong></code></p>

    <p>The top-right corner of the popup will be aligned with the specified corner or edge of the anchor element.<br>
     <br>
     <code><strong>bottomleft</strong></code></p>

    <p>The bottom-left corner of the popup will be aligned with the specified corner or edge of the anchor element.<br>
     <br>
     <code><strong>bottomright</strong></code></p>

    <p>The bottom-right corner of the popup will be aligned with the specified corner or edge of the anchor element</p>
   </td>
  </tr>
 </tbody>
</table>

<p>For example, a position value of <code>bottomleft topleft</code> means that the popup will be positioned such that the bottom-left corner of the anchor is aligned with the upper-left corner of the popup.</p>

<h5 id="Simple_Alignment_Values">Simple Alignment Values</h5>

<p>Positions specified as a single word string are shortcuts for the values above.  The following table shows the valid values, corresponding explicit (ie, 2 word) alignment values and an example of the alignment.<br>
  </p>

<table>
 <thead>
  <tr>
   <th scope="col">Single Word Alignment Values</th>
   <th scope="col">Example</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><strong><code>before_start</code></strong>
    <p>The left side of the popup is aligned with the left side of the anchor, and the bottom of the popup is aligned along the top of the anchor. Equivalent to <code>topleft bottomleft</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-beforestart.png" class="internal" src="/@api/deki/files/309/=Popupguide-position-beforestart.png"></td>
  </tr>
  <tr>
   <td><strong><code>before_end</code></strong>
    <p>The right side of the popup is aligned with the right side of the anchor, and the bottom of the popup is aligned along the top of the anchor. Equivalent to <code>topright bottomright</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-beforeend.png" class="internal" src="/@api/deki/files/308/=Popupguide-position-beforeend.png"></td>
  </tr>
  <tr>
   <td><strong><code>after_start</code></strong>
    <p>The left side of the popup is aligned with the left side of the anchor, and the top of the popup is aligned along the bottom of the anchor. This value is commonly used for menu buttons. Equivalent to <code>bottomleft topleft</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-afterstart.png" class="internal" src="/@api/deki/files/307/=Popupguide-position-afterstart.png"></td>
  </tr>
  <tr>
   <td><strong><code>after_end</code></strong>
    <p>The right side of the popup is aligned with the right side of the anchor, and the top of the popup is aligned along the bottom of the anchor. Equivalent to <code>bottomright topright</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-afterend.png" class="internal" src="/@api/deki/files/306/=Popupguide-position-afterend.png"></td>
  </tr>
  <tr>
   <td><strong><code>start_before</code></strong>
    <p>The top edge of the popup is aligned with the top edge of the anchor, and the right side of the popup is aligned along the left side of the anchor. Equivalent to <code>topleft topright</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-startbefore.png" class="internal" src="/@api/deki/files/313/=Popupguide-position-startbefore.png"></td>
  </tr>
  <tr>
   <td><strong><code>start_after</code></strong>
    <p>The bottom side of the popup is aligned with the bottom side of the anchor, and the right side of the popup is aligned along the left side of the anchor.  Equivalent to <code>bottomleft bottomright</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-startafter.png" class="internal" src="/@api/deki/files/312/=Popupguide-position-startafter.png"></td>
  </tr>
  <tr>
   <td><strong><code>end_before</code></strong>
    <p>The top edge of the popup is aligned with the top edge of the anchor, and the left side of the popup is aligned along the right side of the anchor. This value is used for submenus. Equivalent to <code>topright topleft</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-endbefore.png" class="internal" src="/@api/deki/files/311/=Popupguide-position-endbefore.png"></td>
  </tr>
  <tr>
   <td><strong><code>end_after</code></strong>
    <p>The bottom side of the popup is aligned with the bottom side of the anchor, and the left side of the popup is aligned along the right side of the anchor. Equivalent to <code>bottomright bottomleft</code></p>
   </td>
   <td><img alt="Image:Popupguide-position-endafter.png" class="internal" src="/@api/deki/files/310/=Popupguide-position-endafter.png"></td>
  </tr>
  <tr>
   <td><strong><code>overlap</code></strong>
    <p>The upper left corner of the popup is placed at the upper left corner of the anchor. Equivalent to <code>topleft topleft</code></p>
   </td>
   <td> </td>
  </tr>
  <tr>
   <td><strong><code>after_pointer</code></strong>
    <p>The popup appears vertically offset a few pixels from the mouse pointer <span style="color: #ff0000;">(after_pointer is not currently implemented with respect to the mouse pointer. It currently offsets 21 pixels vertically from the anchor, see <a class="link-https" href="https://bugzilla.mozilla.org/show_bug.cgi?id=619887" title="https://bugzilla.mozilla.org/show_bug.cgi?id=619887">Bug 619887</a>). </span>Roughly equivalent to <code>topleft topleft</code> with the additional consideration of the offset mentioned.</p>
   </td>
   <td> </td>
  </tr>
 </tbody>
</table>

<p>If the menupopup did not have a position attribute, the popup would appear at its default position, in this case, the mouse position.</p>

<p>When opening a popup via a script using the <span id="m-openPopup"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/openPopup">openPopup</a></code></span> method, the second argument may be used to specify the position instead of using the position attribute. For example, the following might be used with the above example to open the popup:</p>

<pre>menupopup.openPopup(label, "end_before", 0, 0, false, false);
</pre>

<p>Note that the position has been set to 'end_before', as above. When both are used, the value supplied to openPopup overrides the attribute. However, if the attributesOverride argument to openPopup (the last argument, false in the example above) was true, the attribute would override the value supplied to openPopup. This allows the script and XUL code to coordinate in different ways as to how the popup should be opened.</p>

<h4 id="Positioning_using_Coordinates" name="Positioning_using_Coordinates">Positioning using Coordinates</h4>

<p>A popup can be positioned further using the x and y arguments to openPopup. After the popup is positioned using the anchor, the x and y arguments may be used to offset the popup by a certain distance. The section on the <a href="/en/XUL/PopupGuide/OpenClose#The_openPopup_method" title="en/XUL/PopupGuide/OpenClose#The_openPopup_method">openPopup method</a> provides an example of this.</p>

<p>If a menupopup, panel or tooltip has a margin specified in a style sheet or using the inline <code id="a-style"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/style">style</a></code> attribute, this margin will be applied around the outside of the popup. In the following example, the menupopup has a 2ex margin above it, so when opened, the popup will be placed a distance of 2ex below the bottom of the button.</p>

<pre>&lt;button label="Popup" type="menu"&gt;
  &lt;menupopup style="margin-top: 2ex;"&gt;
    &lt;menuitem label="Cat"/&gt;
    &lt;menuitem label="Dog"/&gt;
  &lt;/menupopup&gt;
&lt;/button&gt;
</pre>

<p>This technique is used internally for tooltips. If you notice in the Firefox browser when a tooltip is opened it appears not at the mouse position, but slightly below it. This is because the default theme has a 21 pixel top margin on tooltips that moves them down by that much. This is used so that the tooltip doesn't cover up what it is providing a description of.</p>

<h4 id="Screen_Positioning" name="Screen_Positioning">Screen Positioning</h4>

<p>The <span id="m-openPopupAtScreen"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/openPopupAtScreen">openPopupAtScreen</a></code></span> method may be used to open a popup via a script at a specific screen position. The section on the <a href="/en/XUL/PopupGuide/OpenClose#The_openPopupAtScreen_method" title="en/XUL/PopupGuide/OpenClose#The_openPopupAtScreen_method">openPopupAtScreen method</a> provides more details.</p>

<p>For all popups, the <code id="a-left"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/left">left</a></code> and <code id="a-top"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/top">top</a></code> attributes may be used to specify pixel coordinates of where the popup should appear on the screen. If these attributes are used, the popup will appear at the location the attributes specify. As with the position attribute, the arguments to the <span id="m-openPopup"><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Method/openPopup">openPopup</a></code></span> method override unless the last argument is set to true.</p>

<p>Here is an example:</p>

<pre>&lt;panel left="100" top="200"&gt;
  &lt;button label="Test"/&gt;
&lt;/panel&gt;
</pre>

<p>The <code id="a-left"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/left">left</a></code> and <code id="a-top"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/top">top</a></code> attributes are most useful when using non-autohiding panels. With these, you can record the left and top positions as the popup is moved around, and use the persist attribute to maintain these attributes across sessions. This way, a panel will always open at the same location on the screen as it was the last time.</p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>, <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot">mdnwebdocs-bot</a>, <a href="https://developer.mozilla.org/en-US/profiles/SphinxKnight">SphinxKnight</a>, <a href="https://developer.mozilla.org/en-US/profiles/Allasso">Allasso</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/Markh">Markh</a>, <a href="https://developer.mozilla.org/en-US/profiles/CheekySp">CheekySp</a>, <a href="https://developer.mozilla.org/en-US/profiles/madarche">madarche</a>, <a href="https://developer.mozilla.org/en-US/profiles/arantius">arantius</a>, <a href="https://developer.mozilla.org/en-US/profiles/Enn">Enn</a>, <a href="https://developer.mozilla.org/en-US/profiles/SylvainPasche">SylvainPasche</a>, <a href="https://developer.mozilla.org/en-US/profiles/Shoot">Shoot</a>.</p></div></body>
</html>
