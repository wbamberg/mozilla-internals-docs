<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/zilla-slab.css"/>
    <link rel="stylesheet" href="/css/page.css"/>
    <title>Event Handlers</title>
  </head>

  <body><div class="content-heading"><h1>Event Handlers</h1></div>
<div class="content"><p> </p>

<p>Event handlers are defined using <a href="/en-US/docs/XBL/XBL_1.0_Reference/Elements#handler" title="/en-US/docs/XBL/XBL_1.0_Reference/Elements#handler"><code>handler</code></a> elements. A handler specifies what event it is listening for using the <code>event</code> attribute. The handler contains script that is executed when an event flows to the object the handler is attached to and if that event matches all of the criteria specified by the handler.</p>

<p>The most basic handler specifies the event to listen for and an action to take when the handler fires. This action can be specified either using an <code>action</code> attribute or by specifying the script as a child of the <code>handler</code> element. If both are specified, the attribute wins. In both cases the JavaScript body is compiled just before execution; code that does not depend on the context of the event should be factored into normal Javascript file. (Note that there is a possibility that this may change in the future.)</p>

<p>Handlers are attached to the bound element, and they are registered by default for bubbling events. This means that</p>

<pre>&lt;handler event="click" action="foo()"/&gt;
</pre>

<p>is analogous to <code>onclick="foo()"</code> defined on the bound element.</p>

<p>The <code>phase</code> attribute specifies the phase of event flow that the handler is registered for. The default value is <code>bubbling</code>, which means that the event handler will fire during the bubbling phase. The other possible values are <code>target</code>, which means the handler will only fire if <code>event.originalTarget</code> is the same as the target to which the handler is attached, and <code>capturing</code>, which indicates the handler should fire during the capturing phase of event flow.</p>

<p>XBL event handlers always fire last, after all other event handlers at the same position in the event flow. Since XBL handlers usually constitute the default actions for a widget, this allows authors in the bound document to write events that potentially suppress the default actions taken by the XBL handlers.</p>

<p>Within an XBL inheritance chain, event handlers always fire first on the derived binding and then on the base binding in the chain. A derived handler then has a way of preventing the event from flowing to its base binding handlers.</p>

<p>Mouse and key handlers have certain additional properties that are supported by XBL. Additional attributes can be used to impose a <em>filter</em> on the event handler. When a filter is imposed, additional conditions must be met before the event handler will fire.</p>

<p>For both mouse and key events, modifier keys can be specified using the <code>modifiers</code> attribute. This attribute is a comma-separated list of modifier keys that must be down at the time the key or mouse event occurs in order for the handler to execute. Examples of common keys in the list are <code>shift</code> and <code>control</code>.  For more details, see the <a href="/en-US/docs/XBL/XBL_1.0_Reference/Elements#handler" title="/en-US/docs/XBL/XBL_1.0_Reference/Elements#handler">XBL Element Reference for <code>&lt;handler&gt;</code></a>.</p>

<p>In addition, mouse events can specify the <code>button</code> and the <code>clickcount</code>. This allows XBL authors to easily define handlers for right-click, or for left double-click, without having to write script on the same handler to differentiate those cases.</p>

<p>Key events support the <code>charcode</code> and <code>keycode</code> attributes. When set, the corresponding fields in the <code>event</code> object must match for the event to fire.</p>

<p>[Editor's Note: Should we have section on error-handling? Probably.]</p></div><div id="footer"><hr/><p>This page was originally written for <a href="https://developer.mozilla.org">developer.mozilla.org</a> and is used here under the <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative Commons Attribution-ShareAlike license</a> (CC-BY-SA).</p>
<p>Original contributors to this page: <a href="https://developer.mozilla.org/en-US/profiles/wbamberg">wbamberg</a>.</p></div></body>
</html>
